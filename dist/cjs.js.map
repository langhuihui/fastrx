{"version":3,"file":"cjs.js","sources":["../es/combination.js","../es/mathematical.js","../es/filtering.js","../es/transformation.js","../es/producer.js","../es/pipe.js","../es/common.js","../es/chain.js"],"sourcesContent":["import { Sink, LastSink, deliver, nothing, create } from \"./common\";\nclass Share extends LastSink {\n    constructor(source) {\n        super();\n        this.source = source;\n        this.sinks = new Set();\n    }\n    add(sink) {\n        sink.defer(() => this.remove(sink));\n        if (this.sinks.add(sink).size === 1) {\n            this.reset();\n            this.subscribe(this.source);\n        }\n    }\n    remove(sink) {\n        this.sinks.delete(sink);\n        if (this.sinks.size === 0) {\n            this.dispose();\n        }\n    }\n    next(data) {\n        this.sinks.forEach((s) => s.next(data));\n    }\n    complete() {\n        this.sinks.forEach((s) => s.complete());\n        this.sinks.clear();\n    }\n    error(err) {\n        this.sinks.forEach((s) => s.error(err));\n        this.sinks.clear();\n    }\n}\nexport function share() {\n    return (source) => {\n        const share = new Share(source);\n        return create(share.add.bind(share), \"share\", arguments);\n    };\n}\n;\nexport function merge(...sources) {\n    return create((sink) => {\n        const merge = new Sink(sink);\n        let nLife = sources.length;\n        merge.complete = () => {\n            if (--nLife === 0) {\n                sink.complete();\n            }\n        };\n        sources.forEach(merge.bindSubscribe);\n    }, \"merge\", arguments);\n}\nexport function race(...sources) {\n    return create((sink) => {\n        const sinks = new Map();\n        sources.forEach((source) => {\n            const r = new Sink(sink);\n            sinks.set(source, r);\n            r.complete = () => {\n                sinks.delete(source);\n                if (sinks.size === 0) { //特殊情况：所有流都没有数据\n                    sink.complete();\n                }\n                else {\n                    r.dispose();\n                }\n            };\n            r.next = (data) => {\n                sinks.delete(source); //先排除自己，防止自己调用dispose\n                sinks.forEach((s) => s.dispose()); //其他所有流全部取消订阅\n                r.resetNext();\n                r.resetComplete();\n                r.next(data);\n            };\n        });\n        sources.forEach((source) => sinks.get(source).subscribe(source));\n    }, \"race\", arguments);\n}\nexport function concat(...sources) {\n    return create(sink => {\n        let pos = 0;\n        const len = sources.length;\n        const s = new Sink(sink);\n        s.complete = () => {\n            if (pos < len && !s.disposed) {\n                s.doDefer();\n                s.subscribe(sources[pos++]);\n            }\n            else\n                sink.complete();\n        };\n        s.complete();\n    }, \"concat\", arguments);\n}\nexport function shareReplay(bufferSize) {\n    return (source) => {\n        const share = new Share(source);\n        const buffer = [];\n        share.next = function (data) {\n            buffer.push(data);\n            if (buffer.length > bufferSize) {\n                buffer.shift();\n            }\n            this.sinks.forEach((s) => s.next(data));\n        };\n        return create(sink => {\n            sink.defer(() => share.remove(sink));\n            buffer.forEach((cache) => sink.next(cache));\n            share.add(sink);\n        }, \"shareReplay\", arguments);\n    };\n}\nexport function iif(condition, trueS, falseS) {\n    return create((sink) => condition() ? trueS(sink) : falseS(sink), \"iif\", arguments);\n}\nexport function combineLatest(...sources) {\n    return create((sink) => {\n        const nTotal = sources.length;\n        let nRun = nTotal; //剩余未发出事件的事件流数量\n        let nLife = nTotal; //剩余未完成的事件流数量\n        const array = new Array(nTotal);\n        const onComplete = () => {\n            if (--nLife === 0)\n                sink.complete();\n        };\n        const s = (source, i) => {\n            const ss = new Sink(sink);\n            ss.next = data => {\n                if (--nRun === 0) {\n                    ss.next = data => {\n                        array[i] = data;\n                        sink.next(array);\n                    };\n                    ss.next(data);\n                }\n                else {\n                    array[i] = data;\n                }\n            };\n            ss.complete = onComplete;\n            ss.subscribe(source);\n        };\n        sources.forEach(s);\n    }, \"combineLatest\", arguments);\n}\nexport function zip(...sources) {\n    return create((sink) => {\n        const nTotal = sources.length;\n        let nLife = nTotal; //剩余未完成的事件流数量\n        const array = new Array(nTotal);\n        const onComplete = () => {\n            if (--nLife === 0)\n                sink.complete();\n        };\n        const s = (source, i) => {\n            const ss = new Sink(sink);\n            const buffer = [];\n            array[i] = buffer;\n            ss.next = data => {\n                buffer.push(data);\n                if (array.every(x => x.length)) {\n                    sink.next(array.map(x => x.shift()));\n                }\n            };\n            ss.complete = onComplete;\n            ss.subscribe(source);\n        };\n        sources.forEach(s);\n    }, \"zip\", arguments);\n}\nexport function startWith(...xs) {\n    return (inputSource) => create((sink, pos = 0, l = xs.length) => {\n        while (pos < l && !sink.disposed) {\n            sink.next(xs[pos++]);\n        }\n        sink.disposed || sink.subscribe(inputSource);\n    }, \"startWith\", arguments);\n}\nclass WithLatestFrom extends Sink {\n    constructor(sink, ...sources) {\n        super(sink);\n        const s = new Sink(this.sink);\n        s.next = (data) => (this.buffer = data);\n        s.complete = nothing;\n        s.subscribe(combineLatest(...sources));\n    }\n    next(data) {\n        if (this.buffer) {\n            this.sink.next([data, ...this.buffer]);\n        }\n    }\n}\nexport const withLatestFrom = deliver(WithLatestFrom, \"withLatestFrom\");\nclass BufferCount extends Sink {\n    constructor(sink, bufferSize, startBufferEvery) {\n        super(sink);\n        this.bufferSize = bufferSize;\n        this.startBufferEvery = startBufferEvery;\n        this.buffer = [];\n        this.count = 0;\n        if (this.startBufferEvery) {\n            this.buffers = [[]];\n        }\n    }\n    next(data) {\n        if (this.startBufferEvery) {\n            if (this.count++ === this.startBufferEvery) {\n                this.buffers.push([]);\n                this.count = 1;\n            }\n            this.buffers.forEach((buffer) => {\n                buffer.push(data);\n            });\n            if (this.buffers[0].length === this.bufferSize) {\n                this.sink.next(this.buffers.shift());\n            }\n        }\n        else {\n            this.buffer.push(data);\n            if (this.buffer.length === this.bufferSize) {\n                this.sink.next(this.buffer);\n                this.buffer = [];\n            }\n        }\n    }\n    complete() {\n        if (this.buffer.length) {\n            this.sink.next(this.buffer);\n        }\n        else if (this.buffers.length) {\n            this.buffers.forEach((buffer) => this.sink.next(buffer));\n        }\n        super.complete();\n    }\n}\nexport const bufferCount = deliver(BufferCount, \"bufferCount\");\n// export function operator<T, R, ARG extends unknown[]>(f: (...args: [ISink<R>, ...ARG]) => ISink<T>) {\n//   return (...args: ARG): (Operator<T, R>) => source => sink => f(sink, ...args).subscribe(source);\n// }\nclass Buffer extends Sink {\n    constructor(sink, closingNotifier) {\n        super(sink);\n        this.buffer = [];\n        const s = new Sink(sink);\n        s.next = (_data) => {\n            sink.next(this.buffer);\n            this.buffer = [];\n        };\n        s.complete = nothing;\n        s.subscribe(closingNotifier);\n    }\n    next(data) {\n        this.buffer.push(data);\n    }\n    complete() {\n        if (this.buffer.length) {\n            this.sink.next(this.buffer);\n        }\n        super.complete();\n    }\n}\nexport const buffer = deliver(Buffer, \"buffer\");\n","import { Sink, deliver } from \"./common\";\nclass Reduce extends Sink {\n    constructor(sink, f, seed) {\n        super(sink);\n        this.f = f;\n        const accSet = () => {\n            this.sink.next(this.acc);\n            this.sink.complete();\n        };\n        if (typeof seed === \"undefined\") {\n            this.next = (d) => {\n                this.acc = d;\n                this.complete = accSet;\n                this.resetNext();\n            };\n        }\n        else {\n            this.acc = seed;\n            this.complete = accSet;\n        }\n    }\n    next(data) {\n        this.acc = this.f(this.acc, data);\n    }\n}\nexport const reduce = deliver(Reduce, \"reduce\");\nexport const count = (f) => deliver(Reduce, \"count\")((aac, c) => (f(c) ? aac + 1 : aac), 0);\nexport const max = () => deliver(Reduce, \"max\")(Math.max);\nexport const min = () => deliver(Reduce, \"min\")(Math.min);\nexport const sum = () => deliver(Reduce, \"sum\")((aac, c) => aac + c, 0);\n","import { Sink, deliver, nothing, dispose, create } from \"./common\";\nimport { reduce } from \"./mathematical\";\nimport { timer } from \"./producer\";\nclass Filter extends Sink {\n    constructor(sink, filter, thisArg) {\n        super(sink);\n        this.filter = filter;\n        this.thisArg = thisArg;\n    }\n    next(data) {\n        if (this.filter.call(this.thisArg, data)) {\n            this.sink.next(data);\n        }\n    }\n}\nexport const filter = deliver(Filter, \"filter\");\nclass Ignore extends Sink {\n    next(_data) { }\n}\nexport const ignoreElements = deliver(Ignore, \"ignoreElements\");\nclass Take extends Sink {\n    constructor(sink, count) {\n        super(sink);\n        this.count = count;\n    }\n    next(data) {\n        this.sink.next(data);\n        if (--this.count === 0) {\n            this.complete();\n        }\n    }\n}\nexport const take = deliver(Take, \"take\");\nexport function takeUntil(control) {\n    return (source) => create(sink => {\n        const _takeUntil = new Sink(sink);\n        _takeUntil.next = () => sink.complete();\n        _takeUntil.complete = dispose;\n        _takeUntil.subscribe(control);\n        sink.subscribe(source);\n    }, \"takeUntil\", arguments);\n}\n;\nclass TakeWhile extends Sink {\n    constructor(sink, f) {\n        super(sink);\n        this.f = f;\n    }\n    next(data) {\n        if (this.f(data)) {\n            this.sink.next(data);\n        }\n        else {\n            this.complete();\n        }\n    }\n}\nexport const takeWhile = deliver(TakeWhile, \"takeWhile\");\nexport const takeLast = (count) => reduce((buffer, d) => {\n    buffer.push(d);\n    if (buffer.length > count)\n        buffer.shift();\n    return buffer;\n}, []);\nclass Skip extends Sink {\n    constructor(sink, count) {\n        super(sink);\n        this.count = count;\n    }\n    next(_data) {\n        if (--this.count === 0) {\n            this.next = super.next;\n        }\n    }\n}\nexport const skip = deliver(Skip, \"skip\");\nexport function skipUntil(control) {\n    return (source) => create(sink => {\n        sink.next = nothing;\n        const _skipUntil = new Sink(sink);\n        _skipUntil.next = () => {\n            _skipUntil.dispose();\n            sink.resetNext();\n        };\n        _skipUntil.complete = dispose;\n        _skipUntil.subscribe(control);\n        sink.subscribe(source);\n    }, \"skipUntil\", arguments);\n}\nclass SkipWhile extends Sink {\n    constructor(sink, f) {\n        super(sink);\n        this.f = f;\n    }\n    next(data) {\n        if (!this.f(data)) {\n            this.next = super.next;\n            this.next(data);\n        }\n    }\n}\nexport const skipWhile = deliver(SkipWhile, \"skipWhile\");\nconst defaultThrottleConfig = {\n    leading: true,\n    trailing: false,\n};\nclass _Throttle extends Sink {\n    constructor(sink, durationSelector, trailing) {\n        super(sink);\n        this.durationSelector = durationSelector;\n        this.trailing = trailing;\n    }\n    cacheValue(value) {\n        this.last = value;\n        // @ts-ignore\n        delete this.send;\n        if (this.disposed)\n            this.throttle(value);\n    }\n    send(data) {\n        this.send = nothing;\n        this.sink.next(data);\n        this.throttle(data);\n    }\n    throttle(data) {\n        this.reset();\n        this.subscribe(this.durationSelector(data));\n    }\n    next() {\n        this.complete();\n    }\n    complete() {\n        this.dispose();\n        if (this.trailing) {\n            this.send(this.last);\n        }\n    }\n}\nclass Throttle extends Sink {\n    constructor(sink, durationSelector, config = defaultThrottleConfig) {\n        super(sink);\n        this.durationSelector = durationSelector;\n        this.config = config;\n        this._throttle = new _Throttle(this.sink, this.durationSelector, this.config.trailing);\n        this._throttle.dispose();\n    }\n    next(data) {\n        if (this._throttle.disposed && this.config.leading) {\n            this._throttle.send(data);\n        }\n        else {\n            this._throttle.cacheValue(data);\n        }\n    }\n    complete() {\n        this._throttle.throttle = nothing; //最后不再启动节流\n        this._throttle.complete();\n        super.complete();\n    }\n}\nexport const throttle = deliver(Throttle, \"throttle\");\nconst defaultAuditConfig = {\n    leading: false,\n    trailing: true,\n};\nexport const audit = (durationSelector) => deliver(Throttle, \"audit\")(durationSelector, defaultAuditConfig);\nclass _Debounce extends Sink {\n    next() {\n        this.complete();\n    }\n    complete() {\n        this.dispose();\n        this.sink.next(this.last);\n    }\n}\nclass Debounce extends Sink {\n    constructor(sink, durationSelector) {\n        super(sink);\n        this.durationSelector = durationSelector;\n        this._debounce = new _Debounce(this.sink);\n        this._debounce.dispose();\n    }\n    next(data) {\n        this._debounce.dispose();\n        this._debounce.reset();\n        this._debounce.last = data;\n        this._debounce.subscribe(this.durationSelector(data));\n    }\n    complete() {\n        this._debounce.complete();\n        super.complete();\n    }\n}\nexport const debounce = deliver(Debounce, \"debounce\");\nexport const debounceTime = (period) => deliver(Debounce, \"debounceTime\")((_d) => timer(period));\nclass ElementAt extends Sink {\n    constructor(sink, count, defaultValue) {\n        super(sink);\n        this.count = count;\n        this.defaultValue = defaultValue;\n    }\n    next(data) {\n        if (this.count-- === 0) {\n            this.defaultValue = data;\n            this.complete();\n        }\n    }\n    complete() {\n        if (this.defaultValue === void 0) {\n            this.error(new Error('not enough elements in sequence'));\n            return;\n        }\n        else\n            this.sink.next(this.defaultValue);\n        super.complete();\n    }\n}\nexport const elementAt = deliver(ElementAt, \"elementAt\");\nexport const find = (f) => (source) => take(1)(skipWhile((d) => !f(d))(source));\nclass FindIndex extends Sink {\n    constructor(sink, f) {\n        super(sink);\n        this.f = f;\n        this.i = 0;\n    }\n    next(data) {\n        if (this.f(data)) {\n            this.sink.next(this.i++);\n            this.complete();\n        }\n        else {\n            ++this.i;\n        }\n    }\n}\nexport const findIndex = deliver(FindIndex, \"findIndex\");\nclass First extends Sink {\n    constructor(sink, f, defaultValue) {\n        super(sink);\n        this.f = f;\n        this.defaultValue = defaultValue;\n        this.index = 0;\n    }\n    next(data) {\n        if (!this.f || this.f(data, this.index++)) {\n            this.defaultValue = data;\n            this.complete();\n        }\n    }\n    complete() {\n        if (this.defaultValue === void 0) {\n            this.error(new Error('no elements in sequence'));\n            return;\n        }\n        else\n            this.sink.next(this.defaultValue);\n        super.complete();\n    }\n}\nexport const first = deliver(First, \"first\");\nclass Last extends Sink {\n    constructor(sink, f, defaultValue) {\n        super(sink);\n        this.f = f;\n        this.defaultValue = defaultValue;\n        this.index = 0;\n    }\n    next(data) {\n        if (!this.f || this.f(data, this.index++)) {\n            this.defaultValue = data;\n        }\n    }\n    complete() {\n        if (this.defaultValue === void 0) {\n            this.error(new Error('no elements in sequence'));\n            return;\n        }\n        else\n            this.sink.next(this.defaultValue);\n        super.complete();\n    }\n}\nexport const last = deliver(Last, 'last');\nclass Every extends Sink {\n    constructor(sink, predicate) {\n        super(sink);\n        this.predicate = predicate;\n        this.index = 0;\n    }\n    next(data) {\n        if (!this.predicate(data, this.index++)) {\n            this.result = false;\n            this.complete();\n        }\n        else {\n            this.result = true;\n        }\n    }\n    complete() {\n        if (this.result === void 0) {\n            this.error(new Error('no elements in sequence'));\n            return;\n        }\n        else\n            this.sink.next(this.result);\n        super.complete();\n    }\n}\nexport const every = deliver(Every, \"every\");\n","import { Sink, deliver, nothing } from \"./common\";\nclass Scan extends Sink {\n    constructor(sink, f, seed) {\n        super(sink);\n        this.f = f;\n        if (typeof seed === \"undefined\") {\n            this.next = (d) => {\n                this.acc = d;\n                this.resetNext();\n                this.sink.next(this.acc);\n            };\n        }\n        else {\n            this.acc = seed;\n        }\n    }\n    next(data) {\n        this.sink.next(this.acc = this.f(this.acc, data));\n    }\n}\nexport const scan = deliver(Scan, \"scan\");\nclass Pairwise extends Sink {\n    constructor() {\n        super(...arguments);\n        this.hasLast = false;\n    }\n    next(data) {\n        if (this.hasLast) {\n            this.sink.next([this.last, data]);\n        }\n        else {\n            this.hasLast = true;\n        }\n        this.last = data;\n    }\n}\nexport const pairwise = deliver(Pairwise, \"pairwise\");\nclass MapObserver extends Sink {\n    constructor(sink, mapper, thisArg) {\n        super(sink);\n        this.mapper = mapper;\n        this.thisArg = thisArg;\n    }\n    next(data) {\n        super.next(this.mapper.call(this.thisArg, data));\n    }\n}\nexport const map = deliver(MapObserver, \"map\");\nexport const mapTo = (target) => map((_x) => target);\nclass InnerSink extends Sink {\n    constructor(sink, data, context) {\n        super(sink);\n        this.data = data;\n        this.context = context;\n    }\n    next(data) {\n        const combineResults = this.context.combineResults;\n        if (combineResults) {\n            this.sink.next(combineResults(this.data, data));\n        }\n        else {\n            this.sink.next(data);\n        }\n    }\n    // 如果complete先于context的complete触发，则激活原始的context的complete\n    tryComplete() {\n        this.context.resetComplete();\n        this.dispose();\n    }\n}\nclass Maps extends Sink {\n    constructor(sink, makeSource, combineResults) {\n        super(sink);\n        this.makeSource = makeSource;\n        this.combineResults = combineResults;\n        this.index = 0;\n    }\n    subInner(data, c) {\n        const sink = this.currentSink = new c(this.sink, data, this);\n        this.complete = this.tryComplete;\n        sink.complete = sink.tryComplete;\n        this.makeSource(data, this.index++)(sink);\n    }\n    // 如果complete先于inner的complete触发，则不传播complete\n    tryComplete() {\n        // 如果tryComplete被调用，说明currentSink已经存在\n        this.currentSink.resetComplete();\n        this.dispose();\n    }\n}\nclass _SwitchMap extends InnerSink {\n}\nclass SwitchMap extends Maps {\n    next(data) {\n        this.subInner(data, _SwitchMap);\n        this.next = (data) => {\n            this.currentSink.dispose();\n            this.subInner(data, _SwitchMap);\n        };\n    }\n}\nexport const switchMap = deliver(SwitchMap, \"switchMap\");\nfunction makeMapTo(f) {\n    return (innerSource, combineResults) => f(() => innerSource, combineResults);\n}\nexport const switchMapTo = makeMapTo(switchMap);\nclass _ConcatMap extends InnerSink {\n    tryComplete() {\n        this.dispose();\n        if (this.context.sources.length) {\n            this.context.subNext();\n        }\n        else {\n            this.context.resetNext();\n            this.context.resetComplete();\n        }\n    }\n}\nclass ConcatMap extends Maps {\n    constructor() {\n        super(...arguments);\n        this.sources = [];\n        this.next2 = this.sources.push.bind(this.sources);\n    }\n    next(data) {\n        this.next2(data);\n        this.subNext();\n    }\n    subNext() {\n        this.next = this.next2; //后续直接push，不触发subNext\n        this.subInner(this.sources.shift(), _ConcatMap);\n        if (this.disposed && this.sources.length === 0) {\n            // 最后一个innerSink，需要激活其真实的complete\n            this.currentSink.resetComplete();\n        }\n    }\n    tryComplete() {\n        if (this.sources.length === 0)\n            // 最后一个innerSink，需要激活其真实的complete\n            this.currentSink.resetComplete();\n        this.dispose();\n    }\n}\nexport const concatMap = deliver(ConcatMap, \"concatMap\");\nexport const concatMapTo = makeMapTo(concatMap);\nclass _MergeMap extends InnerSink {\n    tryComplete() {\n        this.context.inners.delete(this);\n        super.dispose();\n        if (this.context.inners.size === 0)\n            this.context.resetComplete();\n    }\n}\n// type __Maps<C> = C extends MapContext<infer T, infer U, infer R> ? C : never;\n// type _Maps<C> = C extends InnerSink<infer T, infer U, infer R, infer> ? Maps<T, U, R, C> : never;\nclass MergeMap extends Maps {\n    constructor() {\n        super(...arguments);\n        this.inners = new Set();\n    }\n    next(data) {\n        this.subInner(data, _MergeMap);\n        this.inners.add(this.currentSink);\n    }\n    tryComplete() {\n        // 最后一个innerSink，需要激活其真实的complete\n        if (this.inners.size === 1)\n            this.inners.forEach(s => s.resetComplete());\n        else\n            this.dispose();\n    }\n}\nexport const mergeMap = deliver(MergeMap, \"mergeMap\");\nexport const mergeMapTo = makeMapTo(mergeMap);\nclass _ExhaustMap extends InnerSink {\n    dispose() {\n        this.context.resetNext();\n        super.dispose();\n    }\n}\nclass ExhaustMap extends Maps {\n    next(data) {\n        this.next = nothing;\n        this.subInner(data, _ExhaustMap);\n    }\n}\nexport const exhaustMap = deliver(ExhaustMap, \"exhaustMap\");\nexport const exhaustMapTo = makeMapTo(exhaustMap);\nclass TimeInterval extends Sink {\n    constructor() {\n        super(...arguments);\n        this.start = new Date();\n    }\n    next(value) {\n        this.sink.next({ value, interval: Number(new Date()) - Number(this.start) });\n        this.start = new Date();\n    }\n}\nexport const timeInterval = deliver(TimeInterval, \"timeInterval\");\nclass BufferTime extends Sink {\n    constructor(sink, miniseconds) {\n        super(sink);\n        this.miniseconds = miniseconds;\n        this.buffer = [];\n        this.id = setInterval(() => {\n            this.sink.next(this.buffer.concat());\n            this.buffer.length = 0;\n        }, this.miniseconds);\n    }\n    next(data) {\n        this.buffer.push(data);\n    }\n    complete() {\n        this.sink.next(this.buffer);\n        super.complete();\n    }\n    dispose() {\n        clearInterval(this.id);\n        super.dispose();\n    }\n}\nexport const bufferTime = deliver(BufferTime, \"bufferTime\");\n","import { merge, share } from \"./combination\";\nimport { nothing, create } from \"./common\";\nimport { takeUntil } from \"./filtering\";\nimport { pipe } from \"./pipe\";\nimport { switchMap } from \"./transformation\";\nexport function subject(source) {\n    const args = arguments;\n    const observable = share()(create((sink) => {\n        observable.next = (data) => sink.next(data);\n        observable.complete = () => sink.complete();\n        observable.error = (err) => sink.error(err);\n        source && sink.subscribe(source);\n    }, \"subject\", args));\n    observable.next = nothing;\n    observable.complete = nothing;\n    observable.error = nothing;\n    return observable;\n}\n;\nexport function defer(f) {\n    return create(sink => sink.subscribe(f()), \"defer\", arguments);\n}\nexport function of(...data) {\n    return create(fromArray(data), \"of\", arguments);\n}\nconst asap = (f) => (sink) => {\n    setTimeout(() => f(sink));\n};\nexport function fromArray(data) {\n    return create(asap((sink) => {\n        for (let i = 0; !sink.disposed && i < data.length; i++) {\n            sink.next(data[i]);\n        }\n        sink.complete();\n    }), \"fromArray\", arguments);\n}\nexport function interval(period) {\n    return create((sink) => {\n        let i = 0;\n        const id = setInterval(() => sink.next(i++), period);\n        sink.defer(() => { clearInterval(id); });\n        return \"interval\";\n    }, \"interval\", arguments);\n}\nexport function timer(delay, period) {\n    return create((sink) => {\n        let i = 0;\n        const id = setTimeout(() => {\n            sink.removeDefer(deferF);\n            sink.next(i++);\n            if (period) {\n                const id = setInterval(() => sink.next(i++), period);\n                sink.defer(() => { clearInterval(id); });\n            }\n            else {\n                sink.complete();\n            }\n        }, delay);\n        const deferF = () => { clearTimeout(id); };\n        sink.defer(deferF);\n    }, \"timer\", arguments);\n}\n;\nexport function fromEventPattern(add, remove) {\n    return create((sink) => {\n        const n = (d) => sink.next(d);\n        sink.defer(() => remove(n));\n        add(n);\n        return name;\n    }, \"fromEventPattern\", arguments);\n}\n;\nexport function fromEvent(target, name) {\n    if (\"on\" in target) {\n        return create(fromEventPattern((h) => target.on(name, h), (h) => target.off(name, h)), \"fromEvent\", arguments);\n    }\n    else if (\"addListener\" in target) {\n        return create(fromEventPattern((h) => target.addListener(name, h), (h) => target.removeListener(name, h)), \"fromEvent\", arguments);\n    }\n    else if (\"addEventListener\" in target) {\n        return create(fromEventPattern((h) => target.addEventListener(name, h), (h) => target.removeEventListener(name, h)), \"fromEvent\", arguments);\n    }\n    else\n        throw 'target is not a EventDispachter';\n}\n;\n/**\n *\n * @param {window | Worker | EventSource | WebSocket | RTCPeerConnection} target\n * @returns\n */\nexport function fromMessageEvent(target) {\n    return create((sink) => {\n        const closeOb = fromEvent(target, 'close');\n        const messageOb = fromEvent(target, 'message');\n        const errorOb = fromEvent(target, 'error');\n        sink.defer(() => target.close());\n        sink.subscribe(pipe(merge(messageOb, switchMap(throwError)(errorOb)), takeUntil(closeOb)));\n    }, \"fromMessageEvent\", arguments);\n}\n;\nexport function fromPromise(promise) {\n    return create((sink) => {\n        promise.then(sink.next.bind(sink), sink.error.bind(sink));\n    }, \"fromPromise\", arguments);\n}\nexport function fromFetch(input, init) {\n    return create(defer(() => fromPromise(fetch(input, init))), \"fromFetch\", arguments);\n}\nexport function fromIterable(source) {\n    return create(asap((sink) => {\n        try {\n            for (const data of source) {\n                if (sink.disposed)\n                    return;\n                sink.next(data);\n            }\n            sink.complete();\n        }\n        catch (err) {\n            sink.error(err);\n        }\n    }), \"fromIterable\", arguments);\n}\nexport function fromAnimationFrame() {\n    return create((sink) => {\n        let id = requestAnimationFrame(function next(t) {\n            if (!sink.disposed) {\n                sink.next(t);\n                id = requestAnimationFrame(next);\n            }\n        });\n        sink.defer(() => cancelAnimationFrame(id));\n    }, \"fromAnimationFrame\", arguments);\n}\nexport function range(start, count) {\n    return create((sink, pos = start, end = count + start) => {\n        while (pos < end && !sink.disposed)\n            sink.next(pos++);\n        sink.complete();\n        return \"range\";\n    }, \"range\", arguments);\n}\nexport function bindCallback(call, thisArg, ...args) {\n    return create((sink) => {\n        const inArgs = args.concat((res) => (sink.next(res), sink.complete()));\n        call.apply(thisArg, inArgs);\n    }, \"bindCallback\", arguments);\n}\nexport function bindNodeCallback(call, thisArg, ...args) {\n    return create((sink) => {\n        const inArgs = args.concat((err, res) => err ? (sink.error(err)) : (sink.next(res), sink.complete()));\n        call.apply(thisArg, inArgs);\n    }, \"bindNodeCallback\", arguments);\n}\nexport function never() {\n    return create(() => { }, \"never\", arguments);\n}\n;\nexport function throwError(e) {\n    return create(sink => sink.error(e), \"throwError\", arguments);\n}\nexport function empty() {\n    return create(sink => sink.complete(), \"empty\", arguments);\n}\n;\n","import { Sink, deliver, nothing, LastSink, TimeoutError, create } from './common';\nexport function pipe(first, ...cbs) {\n    return cbs.reduce((aac, c) => c(aac), first);\n}\nexport const toPromise = () => (source) => new Promise((resolve, reject) => {\n    let value;\n    (new Subscribe((d) => (value = d), reject, () => resolve(value))).subscribe(source);\n});\nexport class Subscribe extends LastSink {\n    constructor(next = nothing, _error = nothing, _complete = nothing) {\n        super();\n        this.next = next;\n        this._error = _error;\n        this._complete = _complete;\n        this.then = nothing;\n    }\n    complete() {\n        this.dispose();\n        this._complete();\n    }\n    error(err) {\n        this.dispose();\n        this._error(err);\n    }\n}\n// //SUBSCRIBER\nexport const subscribe = (n = nothing, e = nothing, c = nothing) => (new Subscribe(n, e, c)).bindSubscribe;\n// // UTILITY\nexport function tap(ob) {\n    return (source) => create(sink => {\n        const observer = new Sink(sink);\n        if (ob instanceof Function) {\n            observer.next = (data) => { ob(data); sink.next(data); };\n        }\n        else {\n            if (ob.next)\n                observer.next = (data) => { ob.next(data); sink.next(data); };\n            if (ob.complete)\n                observer.complete = () => { ob.complete(); sink.complete(); };\n            if (ob.error)\n                observer.error = (err) => { ob.error(err); sink.error(err); };\n        }\n        observer.subscribe(source);\n    }, \"tap\", arguments);\n}\n;\nclass Delay extends Sink {\n    constructor(sink, delay) {\n        super(sink);\n        this.buffer = [];\n        this.delayTime = delay;\n    }\n    dispose() {\n        clearTimeout(this.timeoutId);\n        super.dispose();\n    }\n    delay(delay) {\n        this.timeoutId = setTimeout(() => {\n            const d = this.buffer.shift();\n            if (d) {\n                const { time: lastTime, data } = d;\n                super.next(data);\n                if (this.buffer.length) {\n                    this.delay(Number(this.buffer[0].time) - Number(lastTime));\n                }\n            }\n        }, delay);\n    }\n    next(data) {\n        if (!this.buffer.length) {\n            this.delay(this.delayTime);\n        }\n        this.buffer.push({ time: new Date(), data });\n    }\n    complete() {\n        this.timeoutId = setTimeout(() => super.complete(), this.delayTime);\n    }\n}\nexport const delay = deliver(Delay, \"delay\");\nclass CatchError extends Sink {\n    constructor(sink, selector) {\n        super(sink);\n        this.selector = selector;\n    }\n    error(err) {\n        this.dispose();\n        this.selector(err)(this.sink);\n    }\n}\nexport const catchError = deliver(CatchError, \"catchError\");\nimport { subject } from './producer';\nclass GroupBy extends Sink {\n    constructor(sink, f) {\n        super(sink);\n        this.f = f;\n        this.groups = new Map();\n    }\n    next(data) {\n        const key = this.f(data);\n        let group = this.groups.get(key);\n        if (typeof group === 'undefined') {\n            group = subject();\n            group.key = key;\n            this.groups.set(key, group);\n            super.next(group);\n        }\n        group.next(data);\n    }\n    complete() {\n        this.groups.forEach((group) => group.complete());\n        super.complete();\n    }\n    error(err) {\n        this.groups.forEach((group) => group.error(err));\n        super.error(err);\n    }\n}\nexport const groupBy = deliver(GroupBy, \"groupBy\");\nclass Timeout extends Sink {\n    constructor(sink, timeout) {\n        super(sink);\n        this.timeout = timeout;\n        this.id = setTimeout(() => this.error(new TimeoutError(this.timeout)), this.timeout);\n    }\n    next(data) {\n        super.next(data);\n        clearTimeout(this.id);\n        this.next = super.next;\n    }\n    dispose() {\n        clearTimeout(this.id);\n        super.dispose();\n    }\n}\nexport const timeout = deliver(Timeout, \"timeout\");\n","import { pipe } from \"./pipe\";\nexport function nothing(...args) { }\nexport const call = (f) => f();\nexport const identity = (x) => x;\nexport function dispose() {\n    this.dispose();\n}\n// @ts-ignore\nexport const inspect = () => typeof __FASTRX_DEVTOOLS__ !== 'undefined';\nlet obids = 0;\nfunction pp(...args) {\n    return pipe(this, ...args);\n}\nexport class InspectObservable extends Function {\n    toString() {\n        return `${this.name}(${this.args.length ? [...this.args].join(', ') : \"\"})`;\n    }\n    pipe(...args) {\n        return pipe(this, ...args);\n    }\n    subscribe(sink) {\n        const notEnd = sink instanceof Sink;\n        if (notEnd) {\n            const ns = new NodeSink(sink, this, this.streamId++);\n            Events.subscribe({ id: this.id, end: false }, { nodeId: ns.sourceId, streamId: ns.id });\n            this(ns);\n            return ns;\n        }\n        else {\n            Events.subscribe({ id: this.id, end: true });\n            this(sink);\n            return sink;\n        }\n    }\n}\nexport function create(ob, name, args) {\n    if (inspect()) {\n        const result = Object.defineProperties(Object.setPrototypeOf(ob, InspectObservable.prototype), {\n            streamId: { value: 0, writable: true },\n            name: { value: name },\n            args: { value: args },\n            id: { value: obids++ },\n        });\n        Events.create(result);\n        return result;\n    }\n    // @ts-ignore\n    return ob;\n}\nexport class LastSink {\n    constructor() {\n        this.defers = new Set();\n        this.disposed = false;\n    }\n    next(data) {\n    }\n    complete() {\n        this.dispose();\n    }\n    error(err) {\n        this.dispose();\n    }\n    get bindDispose() {\n        return () => this.dispose();\n    }\n    dispose() {\n        this.disposed = true;\n        this.complete = nothing;\n        this.error = nothing;\n        this.next = nothing;\n        this.dispose = nothing;\n        this.subscribe = nothing;\n        this.doDefer();\n    }\n    subscribe(source) {\n        if (inspect())\n            return source.subscribe(this);\n        else\n            source(this);\n        return this;\n    }\n    get bindSubscribe() {\n        return (source) => this.subscribe(source);\n    }\n    doDefer() {\n        this.defers.forEach(call);\n        this.defers.clear();\n    }\n    defer(df) {\n        this.defers.add(df);\n    }\n    removeDefer(df) {\n        this.defers.delete(df);\n    }\n    reset() {\n        this.disposed = false;\n        //@ts-ignore\n        delete this.complete;\n        //@ts-ignore\n        delete this.next;\n        //@ts-ignore\n        delete this.dispose;\n        //@ts-ignore\n        delete this.next;\n        //@ts-ignore\n        delete this.subscribe;\n    }\n    resetNext() {\n        //@ts-ignore\n        delete this.next;\n    }\n    resetComplete() {\n        //@ts-ignore\n        delete this.complete;\n    }\n    resetError() {\n        //@ts-ignore\n        delete this.error;\n    }\n}\nexport class Sink extends LastSink {\n    constructor(sink) {\n        super();\n        this.sink = sink;\n        sink.defer(this.bindDispose);\n    }\n    next(data) {\n        this.sink.next(data);\n    }\n    complete() {\n        this.sink.complete();\n    }\n    error(err) {\n        this.sink.error(err);\n    }\n}\nexport function deliver(c, name) {\n    return function (...args) {\n        if (inspect()) {\n            return source => {\n                const ob = create((observer) => {\n                    const deliverSink = new c(observer, ...args);\n                    deliverSink.sourceId = ob.id;\n                    return deliverSink.subscribe(source);\n                }, name, arguments);\n                ob.source = source;\n                Events.pipe(ob);\n                return ob;\n            };\n        }\n        return (source) => create((observer) => (new c(observer, ...args)).subscribe(source), name, arguments);\n    };\n}\nfunction send(event, payload) {\n    window.postMessage({ source: 'fastrx-devtools-backend', payload: { event, payload } });\n}\nclass NodeSink extends Sink {\n    constructor(sink, source, id) {\n        super(sink);\n        this.source = source;\n        this.id = id;\n        this.defer(() => {\n            Events.defer(this.source, this.id);\n        });\n    }\n    next(data) {\n        Events.next(this.source, this.id, data);\n        this.sink.next(data);\n    }\n    complete() {\n        Events.complete(this.source, this.id);\n        this.sink.complete();\n    }\n    error(err) {\n        Events.complete(this.source, this.id, err);\n        this.sink.error(err);\n    }\n}\nNodeSink.Observables = {};\nexport const Events = {\n    addSource(who, source) {\n        send('addSource', {\n            id: who.id,\n            name: who.toString(),\n            source: { id: source.id, name: source.toString() },\n        });\n    },\n    next(who, streamId, data) {\n        send('next', { id: who.id, streamId, data: data && data.toString() });\n    },\n    subscribe({ id, end }, sink) {\n        send('subscribe', {\n            id,\n            end,\n            sink: { nodeId: sink && sink.nodeId, streamId: sink && sink.streamId },\n        });\n    },\n    complete(who, streamId, err) {\n        send('complete', { id: who.id, streamId, err: err ? err.toString() : null });\n    },\n    defer(who, streamId) {\n        send('defer', { id: who.id, streamId });\n    },\n    pipe(who) {\n        send('pipe', {\n            name: who.toString(),\n            id: who.id,\n            source: { id: who.source.id, name: who.source.toString() },\n        });\n    },\n    update(who) {\n        send('update', { id: who.id, name: who.toString() });\n    },\n    create(who) {\n        send('create', { name: who.toString(), id: who.id });\n    },\n};\nexport class TimeoutError extends Error {\n    constructor(timeout) {\n        super(`timeout after ${timeout}ms`);\n        this.timeout = timeout;\n    }\n}\n","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\n// @ts-nocheck\nimport { tap, delay, timeout, catchError, groupBy, subscribe, toPromise } from './pipe';\nimport * as producer from './producer';\nimport * as filtering from './filtering';\nimport * as mathematical from './mathematical';\nimport * as transformation from './transformation';\nimport * as combination from './combination';\nconst { zip, merge, race, concat, combineLatest } = combination, combinations = __rest(combination, [\"zip\", \"merge\", \"race\", \"concat\", \"combineLatest\"]);\nconst observables = Object.assign({ zip, merge, race, concat, combineLatest }, producer);\nconst operators = Object.assign(Object.assign(Object.assign(Object.assign({ tap, delay, timeout, catchError, groupBy }, combinations), filtering), mathematical), transformation);\nconst rxProxy = {\n    get: (target, prop) => {\n        switch (prop) {\n            case \"subscribe\":\n                return (...args) => subscribe(...args)(target);\n            case \"toPromise\":\n                return () => toPromise()(target);\n            default:\n                return ((operator) => (...args) => new Proxy(operator(...args)(target), rxProxy))(operators[prop]);\n        }\n    }\n};\nexport const rx = new Proxy((f) => new Proxy(f, rxProxy), {\n    get: (_target, prop) => ((observable) => (...args) => new Proxy(observable(...args), rxProxy))(observables[prop]),\n    // @ts-ignore\n    set: (_target, prop, value) => (observables[prop] = value),\n});\n"],"names":["Share","source","sinks","Set","sink","defer","remove","add","size","reset","subscribe","delete","dispose","data","forEach","s","next","complete","clear","err","error","LastSink","share","create","bind","arguments","merge","sources","Sink","nLife","length","bindSubscribe","race","Map","r","set","resetNext","resetComplete","get","concat","pos","len","disposed","doDefer","shareReplay","bufferSize","buffer","push","shift","cache","iif","condition","trueS","falseS","combineLatest","nTotal","nRun","array","Array","onComplete","i","ss","zip","every","x","map","startWith","xs","inputSource","l","WithLatestFrom","nothing","withLatestFrom","deliver","BufferCount","startBufferEvery","count","buffers","bufferCount","Buffer","closingNotifier","_data","Reduce","f","seed","accSet","acc","d","reduce","aac","c","max","Math","min","sum","Filter","filter","thisArg","call","Ignore","ignoreElements","Take","take","takeUntil","control","_takeUntil","TakeWhile","takeWhile","takeLast","Skip","skip","skipUntil","_skipUntil","SkipWhile","skipWhile","defaultThrottleConfig","leading","trailing","_Throttle","durationSelector","value","last","send","throttle","Throttle","config","_throttle","cacheValue","defaultAuditConfig","audit","_Debounce","Debounce","_debounce","debounce","debounceTime","period","_d","timer","ElementAt","defaultValue","Error","elementAt","find","FindIndex","findIndex","First","index","first","Last","Every","predicate","result","Scan","scan","Pairwise","hasLast","pairwise","MapObserver","mapper","mapTo","target","_x","InnerSink","context","combineResults","Maps","makeSource","currentSink","tryComplete","_SwitchMap","SwitchMap","subInner","switchMap","makeMapTo","innerSource","switchMapTo","_ConcatMap","subNext","ConcatMap","next2","concatMap","concatMapTo","_MergeMap","inners","MergeMap","mergeMap","mergeMapTo","_ExhaustMap","ExhaustMap","exhaustMap","exhaustMapTo","TimeInterval","start","Date","interval","Number","timeInterval","BufferTime","miniseconds","id","setInterval","clearInterval","bufferTime","subject","args","observable","of","fromArray","asap","setTimeout","delay","removeDefer","deferF","clearTimeout","fromEventPattern","n","name","fromEvent","h","on","off","addListener","removeListener","addEventListener","removeEventListener","fromMessageEvent","closeOb","messageOb","errorOb","close","pipe","throwError","fromPromise","promise","then","fromFetch","input","init","fetch","fromIterable","fromAnimationFrame","requestAnimationFrame","t","cancelAnimationFrame","range","end","bindCallback","inArgs","res","apply","bindNodeCallback","never","e","empty","cbs","toPromise","Promise","resolve","reject","Subscribe","_error","_complete","tap","ob","observer","Function","Delay","delayTime","timeoutId","lastTime","time","CatchError","selector","catchError","GroupBy","groups","key","group","groupBy","Timeout","timeout","TimeoutError","identity","inspect","__FASTRX_DEVTOOLS__","obids","InspectObservable","join","notEnd","ns","NodeSink","streamId","Events","nodeId","sourceId","Object","defineProperties","setPrototypeOf","prototype","writable","defers","df","bindDispose","deliverSink","event","payload","window","postMessage","Observables","addSource","who","toString","update","__rest","this","p","hasOwnProperty","indexOf","getOwnPropertySymbols","propertyIsEnumerable","combination","combinations","observables","assign","producer","operators","filtering","mathematical","transformation","rxProxy","prop","operator","Proxy","rx","_target"],"mappings":"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"}