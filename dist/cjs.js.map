{"version":3,"file":"cjs.js","sources":["../es/common.js","../es/combination.js","../es/producer.js","../es/mathematical.js","../es/filtering.js","../es/transformation.js","../es/utils.js"],"sourcesContent":["export function nothing(...args) { }\nexport const call = (f) => f();\nexport const identity = (x) => x;\nexport function dispose() {\n    this.dispose();\n}\n// @ts-ignore\nexport const inspect = () => typeof __FASTRX_DEVTOOLS__ !== 'undefined';\nlet obids = 1;\n// function pp(this: Observable<unknown>, ...args: [...Operator<unknown>[], Operator<unknown>]) {\n//   return pipe(this, ...args);\n// }\nexport class Inspect extends Function {\n    toString() {\n        return `${this.name}(${this.args.length ? [...this.args].join(', ') : \"\"})`;\n    }\n    // pipe(...args: [...Operator<unknown>[], Operator<unknown>]): Observable<unknown> {\n    //   return pipe(this as unknown as Observable<T>, ...args);\n    // }\n    subscribe(sink) {\n        const ns = new NodeSink(sink, this, this.streamId++);\n        Events.subscribe({ id: this.id, end: false }, { nodeId: ns.sourceId, streamId: ns.id });\n        this(ns);\n        return ns;\n    }\n}\nexport class LastSink {\n    constructor() {\n        this.defers = new Set();\n        this.disposed = false;\n    }\n    next(data) {\n    }\n    complete() {\n        this.dispose();\n    }\n    error(err) {\n        this.dispose();\n    }\n    get bindDispose() {\n        return () => this.dispose();\n    }\n    dispose() {\n        this.disposed = true;\n        this.complete = nothing;\n        this.error = nothing;\n        this.next = nothing;\n        this.dispose = nothing;\n        this.subscribe = nothing;\n        this.doDefer();\n    }\n    subscribe(source) {\n        if (source instanceof Inspect)\n            source.subscribe(this);\n        else\n            source(this);\n        return this;\n    }\n    get bindSubscribe() {\n        return (source) => this.subscribe(source);\n    }\n    doDefer() {\n        this.defers.forEach(call);\n        this.defers.clear();\n    }\n    defer(df) {\n        this.defers.add(df);\n    }\n    removeDefer(df) {\n        this.defers.delete(df);\n    }\n    reset() {\n        this.disposed = false;\n        //@ts-ignore\n        delete this.complete;\n        //@ts-ignore\n        delete this.next;\n        //@ts-ignore\n        delete this.dispose;\n        //@ts-ignore\n        delete this.next;\n        //@ts-ignore\n        delete this.subscribe;\n    }\n    resetNext() {\n        //@ts-ignore\n        delete this.next;\n    }\n    resetComplete() {\n        //@ts-ignore\n        delete this.complete;\n    }\n    resetError() {\n        //@ts-ignore\n        delete this.error;\n    }\n}\nexport class Sink extends LastSink {\n    constructor(sink) {\n        super();\n        this.sink = sink;\n        sink.defer(this.bindDispose);\n    }\n    next(data) {\n        this.sink.next(data);\n    }\n    complete() {\n        this.sink.complete();\n    }\n    error(err) {\n        this.sink.error(err);\n    }\n}\nexport class Subscribe extends LastSink {\n    constructor(source, _next = nothing, _error = nothing, _complete = nothing) {\n        super();\n        this._next = _next;\n        this._error = _error;\n        this._complete = _complete;\n        this.then = nothing;\n        if (source instanceof Inspect) {\n            const node = { toString: () => 'subscribe', id: 0, source };\n            this.defer(() => {\n                Events.defer(node, 0);\n            });\n            Events.create(node);\n            Events.pipe(node);\n            this.sourceId = node.id;\n            this.subscribe(source);\n            Events.subscribe({ id: node.id, end: true });\n            if (_next == nothing) {\n                this._next = data => Events.next(node, 0, data);\n            }\n            else {\n                this.next = data => {\n                    Events.next(node, 0, data);\n                    _next(data);\n                };\n            }\n            if (_complete == nothing) {\n                this._complete = () => Events.complete(node, 0);\n            }\n            else {\n                this.complete = () => {\n                    this.dispose();\n                    Events.complete(node, 0);\n                    _complete();\n                };\n            }\n            if (_error == nothing) {\n                this._error = err => Events.complete(node, 0, err);\n            }\n            else {\n                this.error = err => {\n                    this.dispose();\n                    Events.complete(node, 0, err);\n                    _error();\n                };\n            }\n        }\n        else {\n            this.subscribe(source);\n        }\n    }\n    next(data) {\n        this._next(data);\n    }\n    complete() {\n        this.dispose();\n        this._complete();\n    }\n    error(err) {\n        this.dispose();\n        this._error(err);\n    }\n}\nexport function pipe(first, ...cbs) {\n    return cbs.reduce((aac, c) => c(aac), first);\n}\nexport function create(ob, name, args) {\n    if (inspect()) {\n        const result = Object.defineProperties(Object.setPrototypeOf(ob, Inspect.prototype), {\n            streamId: { value: 0, writable: true, configurable: true },\n            name: { value: name, writable: true, configurable: true },\n            args: { value: args, writable: true, configurable: true },\n            id: { value: 0, writable: true, configurable: true },\n        });\n        Events.create(result);\n        for (let i = 0; i < args.length; i++) {\n            const arg = args[i];\n            if (typeof arg === 'function') {\n                if (arg instanceof Inspect) {\n                    Events.addSource(result, arg);\n                }\n                else {\n                }\n            }\n        }\n        return result;\n    }\n    return ob;\n}\nexport function deliver(c, name) {\n    return function (...args) {\n        return source => {\n            if (source instanceof Inspect) {\n                const ob = create((observer) => {\n                    const deliverSink = new c(observer, ...args);\n                    deliverSink.sourceId = ob.id;\n                    deliverSink.subscribe(source);\n                }, name, arguments);\n                ob.source = source;\n                Events.pipe(ob);\n                return ob;\n            }\n            else {\n                return observer => source(new c(observer, ...args));\n            }\n        };\n    };\n}\nfunction send(event, payload) {\n    window.postMessage({ source: 'fastrx-devtools-backend', payload: { event, payload } });\n}\nclass NodeSink extends Sink {\n    constructor(sink, source, id) {\n        super(sink);\n        this.source = source;\n        this.id = id;\n        this.sourceId = sink.sourceId;\n        this.defer(() => {\n            Events.defer(this.source, this.id);\n        });\n    }\n    next(data) {\n        Events.next(this.source, this.id, data);\n        this.sink.next(data);\n    }\n    complete() {\n        Events.complete(this.source, this.id);\n        this.sink.complete();\n    }\n    error(err) {\n        Events.complete(this.source, this.id, err);\n        this.sink.error(err);\n    }\n}\nexport const Events = {\n    addSource(who, source) {\n        send('addSource', {\n            id: who.id,\n            name: who.toString(),\n            source: { id: source.id, name: source.toString() },\n        });\n    },\n    next(who, streamId, data) {\n        send('next', { id: who.id, streamId, data: data && data.toString() });\n    },\n    subscribe({ id, end }, sink) {\n        send('subscribe', {\n            id,\n            end,\n            sink: { nodeId: sink && sink.nodeId, streamId: sink && sink.streamId },\n        });\n    },\n    complete(who, streamId, err) {\n        send('complete', { id: who.id, streamId, err: err ? err.toString() : null });\n    },\n    defer(who, streamId) {\n        send('defer', { id: who.id, streamId });\n    },\n    pipe(who) {\n        send('pipe', {\n            name: who.toString(),\n            id: who.id,\n            source: { id: who.source.id, name: who.source.toString() },\n        });\n    },\n    update(who) {\n        send('update', { id: who.id, name: who.toString() });\n    },\n    create(who) {\n        if (!who.id)\n            who.id = obids++;\n        send('create', { name: who.toString(), id: who.id });\n    },\n};\nexport class TimeoutError extends Error {\n    constructor(timeout) {\n        super(`timeout after ${timeout}ms`);\n        this.timeout = timeout;\n    }\n}\n","import { Sink, LastSink, deliver, nothing, create, Inspect, Events } from \"./common\";\nclass Share extends LastSink {\n    constructor(source) {\n        super();\n        this.source = source;\n        this.sinks = new Set();\n    }\n    add(sink) {\n        sink.defer(() => this.remove(sink));\n        if (this.sinks.add(sink).size === 1) {\n            this.reset();\n            this.subscribe(this.source);\n        }\n    }\n    remove(sink) {\n        this.sinks.delete(sink);\n        if (this.sinks.size === 0) {\n            this.dispose();\n        }\n    }\n    next(data) {\n        this.sinks.forEach((s) => s.next(data));\n    }\n    complete() {\n        this.sinks.forEach((s) => s.complete());\n        this.sinks.clear();\n    }\n    error(err) {\n        this.sinks.forEach((s) => s.error(err));\n        this.sinks.clear();\n    }\n}\nexport function share() {\n    return (source) => {\n        const share = new Share(source);\n        if (source instanceof Inspect) {\n            const ob = create((observer) => {\n                share.add(observer);\n            }, \"share\", arguments);\n            share.sourceId = ob.id;\n            ob.source = source;\n            Events.pipe(ob);\n            return ob;\n        }\n        return create(share.add.bind(share), \"share\", arguments);\n    };\n}\n;\nexport function merge(...sources) {\n    return create((sink) => {\n        const merge = new Sink(sink);\n        let nLife = sources.length;\n        merge.complete = () => {\n            if (--nLife === 0) {\n                sink.complete();\n            }\n        };\n        sources.forEach(merge.bindSubscribe);\n    }, \"merge\", arguments);\n}\nexport function race(...sources) {\n    return create((sink) => {\n        const sinks = new Map();\n        sources.forEach((source) => {\n            const r = new Sink(sink);\n            sinks.set(source, r);\n            r.complete = () => {\n                sinks.delete(source);\n                if (sinks.size === 0) { //特殊情况：所有流都没有数据\n                    sink.complete();\n                }\n                else {\n                    r.dispose();\n                }\n            };\n            r.next = (data) => {\n                sinks.delete(source); //先排除自己，防止自己调用dispose\n                sinks.forEach((s) => s.dispose()); //其他所有流全部取消订阅\n                r.resetNext();\n                r.resetComplete();\n                r.next(data);\n            };\n        });\n        sources.forEach((source) => sinks.get(source).subscribe(source));\n    }, \"race\", arguments);\n}\nexport function concat(...sources) {\n    return create(sink => {\n        let pos = 0;\n        const len = sources.length;\n        const s = new Sink(sink);\n        s.complete = () => {\n            if (pos < len && !s.disposed) {\n                s.doDefer();\n                s.subscribe(sources[pos++]);\n            }\n            else\n                sink.complete();\n        };\n        s.complete();\n    }, \"concat\", arguments);\n}\nexport function shareReplay(bufferSize) {\n    return (source) => {\n        const share = new Share(source);\n        const buffer = [];\n        share.next = function (data) {\n            buffer.push(data);\n            if (buffer.length > bufferSize) {\n                buffer.shift();\n            }\n            this.sinks.forEach((s) => s.next(data));\n        };\n        return create(sink => {\n            sink.defer(() => share.remove(sink));\n            buffer.forEach((cache) => sink.next(cache));\n            share.add(sink);\n        }, \"shareReplay\", arguments);\n    };\n}\nexport function iif(condition, trueS, falseS) {\n    return create((sink) => condition() ? trueS(sink) : falseS(sink), \"iif\", arguments);\n}\nexport function combineLatest(...sources) {\n    return create((sink) => {\n        const nTotal = sources.length;\n        let nRun = nTotal; //剩余未发出事件的事件流数量\n        let nLife = nTotal; //剩余未完成的事件流数量\n        const array = new Array(nTotal);\n        const onComplete = () => {\n            if (--nLife === 0)\n                sink.complete();\n        };\n        const s = (source, i) => {\n            const ss = new Sink(sink);\n            ss.next = data => {\n                if (--nRun === 0) {\n                    ss.next = data => {\n                        array[i] = data;\n                        sink.next(array);\n                    };\n                    ss.next(data);\n                }\n                else {\n                    array[i] = data;\n                }\n            };\n            ss.complete = onComplete;\n            ss.subscribe(source);\n        };\n        sources.forEach(s);\n    }, \"combineLatest\", arguments);\n}\nexport function zip(...sources) {\n    return create((sink) => {\n        const nTotal = sources.length;\n        let nLife = nTotal; //剩余未完成的事件流数量\n        const array = new Array(nTotal);\n        const onComplete = () => {\n            if (--nLife === 0)\n                sink.complete();\n        };\n        const s = (source, i) => {\n            const ss = new Sink(sink);\n            const buffer = [];\n            array[i] = buffer;\n            ss.next = data => {\n                buffer.push(data);\n                if (array.every(x => x.length)) {\n                    sink.next(array.map(x => x.shift()));\n                }\n            };\n            ss.complete = onComplete;\n            ss.subscribe(source);\n        };\n        sources.forEach(s);\n    }, \"zip\", arguments);\n}\nexport function startWith(...xs) {\n    return (inputSource) => create((sink, pos = 0, l = xs.length) => {\n        while (pos < l && !sink.disposed) {\n            sink.next(xs[pos++]);\n        }\n        sink.disposed || sink.subscribe(inputSource);\n    }, \"startWith\", arguments);\n}\nclass WithLatestFrom extends Sink {\n    constructor(sink, ...sources) {\n        super(sink);\n        const s = new Sink(this.sink);\n        s.next = (data) => (this.buffer = data);\n        s.complete = nothing;\n        s.subscribe(combineLatest(...sources));\n    }\n    next(data) {\n        if (this.buffer) {\n            this.sink.next([data, ...this.buffer]);\n        }\n    }\n}\nexport const withLatestFrom = deliver(WithLatestFrom, \"withLatestFrom\");\nclass BufferCount extends Sink {\n    constructor(sink, bufferSize, startBufferEvery) {\n        super(sink);\n        this.bufferSize = bufferSize;\n        this.startBufferEvery = startBufferEvery;\n        this.buffer = [];\n        this.count = 0;\n        if (this.startBufferEvery) {\n            this.buffers = [[]];\n        }\n    }\n    next(data) {\n        if (this.startBufferEvery) {\n            if (this.count++ === this.startBufferEvery) {\n                this.buffers.push([]);\n                this.count = 1;\n            }\n            this.buffers.forEach((buffer) => {\n                buffer.push(data);\n            });\n            if (this.buffers[0].length === this.bufferSize) {\n                this.sink.next(this.buffers.shift());\n            }\n        }\n        else {\n            this.buffer.push(data);\n            if (this.buffer.length === this.bufferSize) {\n                this.sink.next(this.buffer);\n                this.buffer = [];\n            }\n        }\n    }\n    complete() {\n        if (this.buffer.length) {\n            this.sink.next(this.buffer);\n        }\n        else if (this.buffers.length) {\n            this.buffers.forEach((buffer) => this.sink.next(buffer));\n        }\n        super.complete();\n    }\n}\nexport const bufferCount = deliver(BufferCount, \"bufferCount\");\n// export function operator<T, R, ARG extends unknown[]>(f: (...args: [ISink<R>, ...ARG]) => ISink<T>) {\n//   return (...args: ARG): (Operator<T, R>) => source => sink => f(sink, ...args).subscribe(source);\n// }\nclass Buffer extends Sink {\n    constructor(sink, closingNotifier) {\n        super(sink);\n        this.buffer = [];\n        const s = new Sink(sink);\n        s.next = (_data) => {\n            sink.next(this.buffer);\n            this.buffer = [];\n        };\n        s.complete = nothing;\n        s.subscribe(closingNotifier);\n    }\n    next(data) {\n        this.buffer.push(data);\n    }\n    complete() {\n        if (this.buffer.length) {\n            this.sink.next(this.buffer);\n        }\n        super.complete();\n    }\n}\nexport const buffer = deliver(Buffer, \"buffer\");\n","import { share } from \"./combination\";\nimport { nothing, create } from \"./common\";\nexport function subject(source) {\n    const args = arguments;\n    const observable = share()(create((sink) => {\n        observable.next = (data) => sink.next(data);\n        observable.complete = () => sink.complete();\n        observable.error = (err) => sink.error(err);\n        source && sink.subscribe(source);\n    }, \"subject\", args));\n    observable.next = nothing;\n    observable.complete = nothing;\n    observable.error = nothing;\n    return observable;\n}\n;\nexport function defer(f) {\n    return create(sink => sink.subscribe(f()), \"defer\", arguments);\n}\nconst asap = (f) => (sink) => {\n    setTimeout(() => f(sink));\n};\nconst _fromArray = (data) => asap((sink) => {\n    for (let i = 0; !sink.disposed && i < data.length; i++) {\n        sink.next(data[i]);\n    }\n    sink.complete();\n});\nexport function of(...data) {\n    return create(_fromArray(data), \"of\", arguments);\n}\nexport function fromArray(data) {\n    return create(_fromArray(data), \"fromArray\", arguments);\n}\nexport function interval(period) {\n    return create((sink) => {\n        let i = 0;\n        const id = setInterval(() => sink.next(i++), period);\n        sink.defer(() => { clearInterval(id); });\n        return \"interval\";\n    }, \"interval\", arguments);\n}\nexport function timer(delay, period) {\n    return create((sink) => {\n        let i = 0;\n        const id = setTimeout(() => {\n            sink.removeDefer(deferF);\n            sink.next(i++);\n            if (period) {\n                const id = setInterval(() => sink.next(i++), period);\n                sink.defer(() => { clearInterval(id); });\n            }\n            else {\n                sink.complete();\n            }\n        }, delay);\n        const deferF = () => { clearTimeout(id); };\n        sink.defer(deferF);\n    }, \"timer\", arguments);\n}\n;\nfunction _fromEventPattern(add, remove) {\n    return (sink) => {\n        const n = (d) => sink.next(d);\n        sink.defer(() => remove(n));\n        add(n);\n    };\n}\nexport function fromEventPattern(add, remove) {\n    return create(_fromEventPattern(add, remove), \"fromEventPattern\", arguments);\n}\n;\nexport function fromEvent(target, name) {\n    if (\"on\" in target) {\n        return create(_fromEventPattern((h) => target.on(name, h), (h) => target.off(name, h)), \"fromEvent\", arguments);\n    }\n    else if (\"addListener\" in target) {\n        return create(_fromEventPattern((h) => target.addListener(name, h), (h) => target.removeListener(name, h)), \"fromEvent\", arguments);\n    }\n    else if (\"addEventListener\" in target) {\n        return create(_fromEventPattern((h) => target.addEventListener(name, h), (h) => target.removeEventListener(name, h)), \"fromEvent\", arguments);\n    }\n    else\n        throw 'target is not a EventDispachter';\n}\n;\nexport function fromPromise(promise) {\n    return create((sink) => {\n        promise.then(sink.next.bind(sink), sink.error.bind(sink));\n    }, \"fromPromise\", arguments);\n}\nexport function fromFetch(input, init) {\n    return create(defer(() => fromPromise(fetch(input, init))), \"fromFetch\", arguments);\n}\nexport function fromIterable(source) {\n    return create(asap((sink) => {\n        try {\n            for (const data of source) {\n                if (sink.disposed)\n                    return;\n                sink.next(data);\n            }\n            sink.complete();\n        }\n        catch (err) {\n            sink.error(err);\n        }\n    }), \"fromIterable\", arguments);\n}\nexport function fromAnimationFrame() {\n    return create((sink) => {\n        let id = requestAnimationFrame(function next(t) {\n            if (!sink.disposed) {\n                sink.next(t);\n                id = requestAnimationFrame(next);\n            }\n        });\n        sink.defer(() => cancelAnimationFrame(id));\n    }, \"fromAnimationFrame\", arguments);\n}\nexport function range(start, count) {\n    return create((sink, pos = start, end = count + start) => {\n        while (pos < end && !sink.disposed)\n            sink.next(pos++);\n        sink.complete();\n        return \"range\";\n    }, \"range\", arguments);\n}\nexport function bindCallback(call, thisArg, ...args) {\n    return create((sink) => {\n        const inArgs = args.concat((res) => (sink.next(res), sink.complete()));\n        call.apply(thisArg, inArgs);\n    }, \"bindCallback\", arguments);\n}\nexport function bindNodeCallback(call, thisArg, ...args) {\n    return create((sink) => {\n        const inArgs = args.concat((err, res) => err ? (sink.error(err)) : (sink.next(res), sink.complete()));\n        call.apply(thisArg, inArgs);\n    }, \"bindNodeCallback\", arguments);\n}\nexport function never() {\n    return create(() => { }, \"never\", arguments);\n}\n;\nexport function throwError(e) {\n    return create(sink => sink.error(e), \"throwError\", arguments);\n}\nexport function empty() {\n    return create(sink => sink.complete(), \"empty\", arguments);\n}\n;\n","import { Sink, deliver } from \"./common\";\nclass Reduce extends Sink {\n    constructor(sink, f, seed) {\n        super(sink);\n        this.f = f;\n        const accSet = () => {\n            this.sink.next(this.acc);\n            this.sink.complete();\n        };\n        if (typeof seed === \"undefined\") {\n            this.next = (d) => {\n                this.acc = d;\n                this.complete = accSet;\n                this.resetNext();\n            };\n        }\n        else {\n            this.acc = seed;\n            this.complete = accSet;\n        }\n    }\n    next(data) {\n        this.acc = this.f(this.acc, data);\n    }\n}\nexport const reduce = deliver(Reduce, \"reduce\");\nexport const count = (f) => deliver(Reduce, \"count\")((aac, c) => (f(c) ? aac + 1 : aac), 0);\nexport const max = () => deliver(Reduce, \"max\")(Math.max);\nexport const min = () => deliver(Reduce, \"min\")(Math.min);\nexport const sum = () => deliver(Reduce, \"sum\")((aac, c) => aac + c, 0);\n","import { Sink, deliver, nothing, dispose } from \"./common\";\nimport { reduce } from \"./mathematical\";\nimport { timer } from \"./producer\";\nclass Filter extends Sink {\n    constructor(sink, filter, thisArg) {\n        super(sink);\n        this.filter = filter;\n        this.thisArg = thisArg;\n    }\n    next(data) {\n        if (this.filter.call(this.thisArg, data)) {\n            this.sink.next(data);\n        }\n    }\n}\nexport const filter = deliver(Filter, \"filter\");\nclass Ignore extends Sink {\n    next(_data) { }\n}\nexport const ignoreElements = deliver(Ignore, \"ignoreElements\");\nclass Take extends Sink {\n    constructor(sink, count) {\n        super(sink);\n        this.count = count;\n    }\n    next(data) {\n        this.sink.next(data);\n        if (--this.count === 0) {\n            this.complete();\n        }\n    }\n}\nexport const take = deliver(Take, \"take\");\nclass TakeUntil extends Sink {\n    constructor(sink, control) {\n        super(sink);\n        const _takeUntil = new Sink(sink);\n        _takeUntil.next = () => sink.complete();\n        _takeUntil.complete = dispose;\n        _takeUntil.subscribe(control);\n    }\n}\nexport const takeUntil = deliver(TakeUntil, \"takeUntil\");\nclass TakeWhile extends Sink {\n    constructor(sink, f) {\n        super(sink);\n        this.f = f;\n    }\n    next(data) {\n        if (this.f(data)) {\n            this.sink.next(data);\n        }\n        else {\n            this.complete();\n        }\n    }\n}\nexport const takeWhile = deliver(TakeWhile, \"takeWhile\");\nexport const takeLast = (count) => reduce((buffer, d) => {\n    buffer.push(d);\n    if (buffer.length > count)\n        buffer.shift();\n    return buffer;\n}, []);\nclass Skip extends Sink {\n    constructor(sink, count) {\n        super(sink);\n        this.count = count;\n    }\n    next(_data) {\n        if (--this.count === 0) {\n            this.next = super.next;\n        }\n    }\n}\nexport const skip = deliver(Skip, \"skip\");\nclass SkipUntil extends Sink {\n    constructor(sink, control) {\n        super(sink);\n        sink.next = nothing;\n        const _skipUntil = new Sink(sink);\n        _skipUntil.next = () => {\n            _skipUntil.dispose();\n            sink.resetNext();\n        };\n        _skipUntil.complete = dispose;\n        _skipUntil.subscribe(control);\n    }\n}\nexport const skipUntil = deliver(SkipUntil, \"skipUntil\");\nclass SkipWhile extends Sink {\n    constructor(sink, f) {\n        super(sink);\n        this.f = f;\n    }\n    next(data) {\n        if (!this.f(data)) {\n            this.next = super.next;\n            this.next(data);\n        }\n    }\n}\nexport const skipWhile = deliver(SkipWhile, \"skipWhile\");\nconst defaultThrottleConfig = {\n    leading: true,\n    trailing: false,\n};\nclass _Throttle extends Sink {\n    constructor(sink, durationSelector, trailing) {\n        super(sink);\n        this.durationSelector = durationSelector;\n        this.trailing = trailing;\n    }\n    cacheValue(value) {\n        this.last = value;\n        // @ts-ignore\n        delete this.send;\n        if (this.disposed)\n            this.throttle(value);\n    }\n    send(data) {\n        this.send = nothing;\n        this.sink.next(data);\n        this.throttle(data);\n    }\n    throttle(data) {\n        this.reset();\n        this.subscribe(this.durationSelector(data));\n    }\n    next() {\n        this.complete();\n    }\n    complete() {\n        this.dispose();\n        if (this.trailing) {\n            this.send(this.last);\n        }\n    }\n}\nclass Throttle extends Sink {\n    constructor(sink, durationSelector, config = defaultThrottleConfig) {\n        super(sink);\n        this.durationSelector = durationSelector;\n        this.config = config;\n        this._throttle = new _Throttle(this.sink, this.durationSelector, this.config.trailing);\n        this._throttle.dispose();\n    }\n    next(data) {\n        if (this._throttle.disposed && this.config.leading) {\n            this._throttle.send(data);\n        }\n        else {\n            this._throttle.cacheValue(data);\n        }\n    }\n    complete() {\n        this._throttle.throttle = nothing; //最后不再启动节流\n        this._throttle.complete();\n        super.complete();\n    }\n}\nexport const throttle = deliver(Throttle, \"throttle\");\nconst defaultAuditConfig = {\n    leading: false,\n    trailing: true,\n};\nexport const audit = (durationSelector) => deliver(Throttle, \"audit\")(durationSelector, defaultAuditConfig);\nclass _Debounce extends Sink {\n    next() {\n        this.complete();\n    }\n    complete() {\n        this.dispose();\n        this.sink.next(this.last);\n    }\n}\nclass Debounce extends Sink {\n    constructor(sink, durationSelector) {\n        super(sink);\n        this.durationSelector = durationSelector;\n        this._debounce = new _Debounce(this.sink);\n        this._debounce.dispose();\n    }\n    next(data) {\n        this._debounce.dispose();\n        this._debounce.reset();\n        this._debounce.last = data;\n        this._debounce.subscribe(this.durationSelector(data));\n    }\n    complete() {\n        this._debounce.complete();\n        super.complete();\n    }\n}\nexport const debounce = deliver(Debounce, \"debounce\");\nexport const debounceTime = (period) => deliver(Debounce, \"debounceTime\")((_d) => timer(period));\nclass ElementAt extends Sink {\n    constructor(sink, count, defaultValue) {\n        super(sink);\n        this.count = count;\n        this.defaultValue = defaultValue;\n    }\n    next(data) {\n        if (this.count-- === 0) {\n            this.defaultValue = data;\n            this.complete();\n        }\n    }\n    complete() {\n        if (this.defaultValue === void 0) {\n            this.error(new Error('not enough elements in sequence'));\n            return;\n        }\n        else\n            this.sink.next(this.defaultValue);\n        super.complete();\n    }\n}\nexport const elementAt = deliver(ElementAt, \"elementAt\");\nexport const find = (f) => (source) => take(1)(skipWhile((d) => !f(d))(source));\nclass FindIndex extends Sink {\n    constructor(sink, f) {\n        super(sink);\n        this.f = f;\n        this.i = 0;\n    }\n    next(data) {\n        if (this.f(data)) {\n            this.sink.next(this.i++);\n            this.complete();\n        }\n        else {\n            ++this.i;\n        }\n    }\n}\nexport const findIndex = deliver(FindIndex, \"findIndex\");\nclass First extends Sink {\n    constructor(sink, f, defaultValue) {\n        super(sink);\n        this.f = f;\n        this.defaultValue = defaultValue;\n        this.index = 0;\n    }\n    next(data) {\n        if (!this.f || this.f(data, this.index++)) {\n            this.defaultValue = data;\n            this.complete();\n        }\n    }\n    complete() {\n        if (this.defaultValue === void 0) {\n            this.error(new Error('no elements in sequence'));\n            return;\n        }\n        else\n            this.sink.next(this.defaultValue);\n        super.complete();\n    }\n}\nexport const first = deliver(First, \"first\");\nclass Last extends Sink {\n    constructor(sink, f, defaultValue) {\n        super(sink);\n        this.f = f;\n        this.defaultValue = defaultValue;\n        this.index = 0;\n    }\n    next(data) {\n        if (!this.f || this.f(data, this.index++)) {\n            this.defaultValue = data;\n        }\n    }\n    complete() {\n        if (this.defaultValue === void 0) {\n            this.error(new Error('no elements in sequence'));\n            return;\n        }\n        else\n            this.sink.next(this.defaultValue);\n        super.complete();\n    }\n}\nexport const last = deliver(Last, 'last');\nclass Every extends Sink {\n    constructor(sink, predicate) {\n        super(sink);\n        this.predicate = predicate;\n        this.index = 0;\n    }\n    next(data) {\n        if (!this.predicate(data, this.index++)) {\n            this.result = false;\n            this.complete();\n        }\n        else {\n            this.result = true;\n        }\n    }\n    complete() {\n        if (this.result === void 0) {\n            this.error(new Error('no elements in sequence'));\n            return;\n        }\n        else\n            this.sink.next(this.result);\n        super.complete();\n    }\n}\nexport const every = deliver(Every, \"every\");\n","import { Sink, deliver, nothing } from \"./common\";\nimport { subject } from \"./producer\";\nclass Scan extends Sink {\n    constructor(sink, f, seed) {\n        super(sink);\n        this.f = f;\n        if (typeof seed === \"undefined\") {\n            this.next = (d) => {\n                this.acc = d;\n                this.resetNext();\n                this.sink.next(this.acc);\n            };\n        }\n        else {\n            this.acc = seed;\n        }\n    }\n    next(data) {\n        this.sink.next(this.acc = this.f(this.acc, data));\n    }\n}\nexport const scan = deliver(Scan, \"scan\");\nclass Pairwise extends Sink {\n    constructor() {\n        super(...arguments);\n        this.hasLast = false;\n    }\n    next(data) {\n        if (this.hasLast) {\n            this.sink.next([this.last, data]);\n        }\n        else {\n            this.hasLast = true;\n        }\n        this.last = data;\n    }\n}\nexport const pairwise = deliver(Pairwise, \"pairwise\");\nclass MapObserver extends Sink {\n    constructor(sink, mapper, thisArg) {\n        super(sink);\n        this.mapper = mapper;\n        this.thisArg = thisArg;\n    }\n    next(data) {\n        super.next(this.mapper.call(this.thisArg, data));\n    }\n}\nexport const map = deliver(MapObserver, \"map\");\nexport const mapTo = (target) => deliver(MapObserver, \"mapTo\")((_x) => target);\nclass InnerSink extends Sink {\n    constructor(sink, data, context) {\n        super(sink);\n        this.data = data;\n        this.context = context;\n    }\n    next(data) {\n        const combineResults = this.context.combineResults;\n        if (combineResults) {\n            this.sink.next(combineResults(this.data, data));\n        }\n        else {\n            this.sink.next(data);\n        }\n    }\n    // 如果complete先于context的complete触发，则激活原始的context的complete\n    tryComplete() {\n        this.context.resetComplete();\n        this.dispose();\n    }\n}\nclass Maps extends Sink {\n    constructor(sink, makeSource, combineResults) {\n        super(sink);\n        this.makeSource = makeSource;\n        this.combineResults = combineResults;\n        this.index = 0;\n    }\n    subInner(data, c) {\n        const sink = this.currentSink = new c(this.sink, data, this);\n        this.complete = this.tryComplete;\n        sink.complete = sink.tryComplete;\n        sink.subscribe(this.makeSource(data, this.index++));\n    }\n    // 如果complete先于inner的complete触发，则不传播complete\n    tryComplete() {\n        // 如果tryComplete被调用，说明currentSink已经存在\n        this.currentSink.resetComplete();\n        this.dispose();\n    }\n}\nclass _SwitchMap extends InnerSink {\n}\nclass SwitchMap extends Maps {\n    next(data) {\n        this.subInner(data, _SwitchMap);\n        this.next = (data) => {\n            this.currentSink.dispose();\n            this.subInner(data, _SwitchMap);\n        };\n    }\n}\nexport const switchMap = deliver(SwitchMap, \"switchMap\");\nfunction makeMapTo(f) {\n    return (innerSource, combineResults) => f(() => innerSource, combineResults);\n}\nexport const switchMapTo = makeMapTo(deliver(SwitchMap, \"switchMapTo\"));\nclass _ConcatMap extends InnerSink {\n    tryComplete() {\n        this.dispose();\n        if (this.context.sources.length) {\n            this.context.subNext();\n        }\n        else {\n            this.context.resetNext();\n            this.context.resetComplete();\n        }\n    }\n}\nclass ConcatMap extends Maps {\n    constructor() {\n        super(...arguments);\n        this.sources = [];\n        this.next2 = this.sources.push.bind(this.sources);\n    }\n    next(data) {\n        this.next2(data);\n        this.subNext();\n    }\n    subNext() {\n        this.next = this.next2; //后续直接push，不触发subNext\n        this.subInner(this.sources.shift(), _ConcatMap);\n        if (this.disposed && this.sources.length === 0) {\n            // 最后一个innerSink，需要激活其真实的complete\n            this.currentSink.resetComplete();\n        }\n    }\n    tryComplete() {\n        if (this.sources.length === 0)\n            // 最后一个innerSink，需要激活其真实的complete\n            this.currentSink.resetComplete();\n        this.dispose();\n    }\n}\nexport const concatMap = deliver(ConcatMap, \"concatMap\");\nexport const concatMapTo = makeMapTo(deliver(ConcatMap, \"concatMapTo\"));\nclass _MergeMap extends InnerSink {\n    tryComplete() {\n        this.context.inners.delete(this);\n        super.dispose();\n        if (this.context.inners.size === 0)\n            this.context.resetComplete();\n    }\n}\n// type __Maps<C> = C extends MapContext<infer T, infer U, infer R> ? C : never;\n// type _Maps<C> = C extends InnerSink<infer T, infer U, infer R, infer> ? Maps<T, U, R, C> : never;\nclass MergeMap extends Maps {\n    constructor() {\n        super(...arguments);\n        this.inners = new Set();\n    }\n    next(data) {\n        this.subInner(data, _MergeMap);\n        this.inners.add(this.currentSink);\n    }\n    tryComplete() {\n        // 最后一个innerSink，需要激活其真实的complete\n        if (this.inners.size === 1)\n            this.inners.forEach(s => s.resetComplete());\n        else\n            this.dispose();\n    }\n}\nexport const mergeMap = deliver(MergeMap, \"mergeMap\");\nexport const mergeMapTo = makeMapTo(deliver(MergeMap, \"mergeMapTo\"));\nclass _ExhaustMap extends InnerSink {\n    dispose() {\n        this.context.resetNext();\n        super.dispose();\n    }\n}\nclass ExhaustMap extends Maps {\n    next(data) {\n        this.next = nothing;\n        this.subInner(data, _ExhaustMap);\n    }\n}\nexport const exhaustMap = deliver(ExhaustMap, \"exhaustMap\");\nexport const exhaustMapTo = makeMapTo(deliver(ExhaustMap, \"exhaustMapTo\"));\nclass GroupBy extends Sink {\n    constructor(sink, f) {\n        super(sink);\n        this.f = f;\n        this.groups = new Map();\n    }\n    next(data) {\n        const key = this.f(data);\n        let group = this.groups.get(key);\n        if (typeof group === 'undefined') {\n            group = subject();\n            group.key = key;\n            this.groups.set(key, group);\n            super.next(group);\n        }\n        group.next(data);\n    }\n    complete() {\n        this.groups.forEach((group) => group.complete());\n        super.complete();\n    }\n    error(err) {\n        this.groups.forEach((group) => group.error(err));\n        super.error(err);\n    }\n}\nexport const groupBy = deliver(GroupBy, \"groupBy\");\nclass TimeInterval extends Sink {\n    constructor() {\n        super(...arguments);\n        this.start = new Date();\n    }\n    next(value) {\n        this.sink.next({ value, interval: Number(new Date()) - Number(this.start) });\n        this.start = new Date();\n    }\n}\nexport const timeInterval = deliver(TimeInterval, \"timeInterval\");\nclass BufferTime extends Sink {\n    constructor(sink, miniseconds) {\n        super(sink);\n        this.miniseconds = miniseconds;\n        this.buffer = [];\n        this.id = setInterval(() => {\n            this.sink.next(this.buffer.concat());\n            this.buffer.length = 0;\n        }, this.miniseconds);\n    }\n    next(data) {\n        this.buffer.push(data);\n    }\n    complete() {\n        this.sink.next(this.buffer);\n        super.complete();\n    }\n    dispose() {\n        clearInterval(this.id);\n        super.dispose();\n    }\n}\nexport const bufferTime = deliver(BufferTime, \"bufferTime\");\nclass Delay extends Sink {\n    constructor(sink, delay) {\n        super(sink);\n        this.buffer = [];\n        this.delayTime = delay;\n    }\n    dispose() {\n        clearTimeout(this.timeoutId);\n        super.dispose();\n    }\n    delay(delay) {\n        this.timeoutId = setTimeout(() => {\n            const d = this.buffer.shift();\n            if (d) {\n                const { time: lastTime, data } = d;\n                super.next(data);\n                if (this.buffer.length) {\n                    this.delay(Number(this.buffer[0].time) - Number(lastTime));\n                }\n            }\n        }, delay);\n    }\n    next(data) {\n        if (!this.buffer.length) {\n            this.delay(this.delayTime);\n        }\n        this.buffer.push({ time: new Date(), data });\n    }\n    complete() {\n        this.timeoutId = setTimeout(() => super.complete(), this.delayTime);\n    }\n}\nexport const delay = deliver(Delay, \"delay\");\nclass CatchError extends Sink {\n    constructor(sink, selector) {\n        super(sink);\n        this.selector = selector;\n    }\n    error(err) {\n        this.dispose();\n        this.selector(err)(this.sink);\n    }\n}\nexport const catchError = deliver(CatchError, \"catchError\");\n","import { nothing, Sink, deliver, TimeoutError, Subscribe } from \"./common\";\nexport const toPromise = () => (source) => new Promise((resolve, reject) => {\n    let value;\n    new Subscribe(source, (d) => (value = d), reject, () => resolve(value));\n});\n// //SUBSCRIBER\nexport const subscribe = (n = nothing, e = nothing, c = nothing) => (source) => new Subscribe(source, n, e, c);\n// // UTILITY\nclass Tap extends Sink {\n    constructor(sink, ob) {\n        super(sink);\n        if (ob instanceof Function) {\n            this.next = (data) => { ob(data); sink.next(data); };\n        }\n        else {\n            if (ob.next)\n                this.next = (data) => { ob.next(data); sink.next(data); };\n            if (ob.complete)\n                this.complete = () => { ob.complete(); sink.complete(); };\n            if (ob.error)\n                this.error = (err) => { ob.error(err); sink.error(err); };\n        }\n    }\n}\nexport const tap = deliver(Tap, \"tap\");\nclass Timeout extends Sink {\n    constructor(sink, timeout) {\n        super(sink);\n        this.timeout = timeout;\n        this.id = setTimeout(() => this.error(new TimeoutError(this.timeout)), this.timeout);\n    }\n    next(data) {\n        super.next(data);\n        clearTimeout(this.id);\n        this.next = super.next;\n    }\n    dispose() {\n        clearTimeout(this.id);\n        super.dispose();\n    }\n}\nexport const timeout = deliver(Timeout, \"timeout\");\n"],"names":["nothing","call","f","identity","x","dispose","inspect","__FASTRX_DEVTOOLS__","obids","Inspect","name","args","length","join","sink","ns","NodeSink","streamId","Events","subscribe","id","end","nodeId","sourceId","Function","LastSink","defers","Set","disposed","data","err","complete","error","next","doDefer","source","forEach","clear","df","add","delete","Sink","defer","bindDispose","Subscribe","_next","_error","_complete","then","node","toString","create","pipe","first","cbs","reduce","aac","c","ob","result","Object","defineProperties","setPrototypeOf","prototype","value","writable","configurable","i","arg","addSource","deliver","observer","deliverSink","arguments","send","event","payload","window","postMessage","who","update","TimeoutError","timeout","Error","Share","sinks","remove","size","reset","s","share","bind","merge","sources","nLife","bindSubscribe","race","Map","r","set","resetNext","resetComplete","get","concat","pos","len","shareReplay","bufferSize","buffer","push","shift","cache","iif","condition","trueS","falseS","combineLatest","nTotal","nRun","array","Array","onComplete","ss","zip","every","map","startWith","xs","inputSource","l","WithLatestFrom","withLatestFrom","BufferCount","startBufferEvery","count","buffers","bufferCount","Buffer","closingNotifier","_data","subject","observable","asap","setTimeout","_fromArray","of","fromArray","interval","period","setInterval","clearInterval","timer","delay","removeDefer","deferF","clearTimeout","_fromEventPattern","n","d","fromEventPattern","fromEvent","target","h","on","off","addListener","removeListener","addEventListener","removeEventListener","fromPromise","promise","fromFetch","input","init","fetch","fromIterable","fromAnimationFrame","requestAnimationFrame","t","cancelAnimationFrame","range","start","bindCallback","thisArg","inArgs","res","apply","bindNodeCallback","never","throwError","e","empty","Reduce","seed","accSet","acc","max","Math","min","sum","Filter","filter","Ignore","ignoreElements","Take","take","TakeUntil","control","_takeUntil","takeUntil","TakeWhile","takeWhile","takeLast","Skip","skip","SkipUntil","_skipUntil","skipUntil","SkipWhile","skipWhile","defaultThrottleConfig","leading","trailing","_Throttle","durationSelector","last","throttle","Throttle","config","_throttle","cacheValue","defaultAuditConfig","audit","_Debounce","Debounce","_debounce","debounce","debounceTime","_d","ElementAt","defaultValue","elementAt","find","FindIndex","findIndex","First","index","Last","Every","predicate","Scan","scan","Pairwise","hasLast","pairwise","MapObserver","mapper","mapTo","_x","InnerSink","context","combineResults","Maps","makeSource","currentSink","tryComplete","_SwitchMap","SwitchMap","subInner","switchMap","makeMapTo","innerSource","switchMapTo","_ConcatMap","subNext","ConcatMap","next2","concatMap","concatMapTo","_MergeMap","inners","MergeMap","mergeMap","mergeMapTo","_ExhaustMap","ExhaustMap","exhaustMap","exhaustMapTo","GroupBy","groups","key","group","groupBy","TimeInterval","Date","Number","timeInterval","BufferTime","miniseconds","bufferTime","Delay","delayTime","timeoutId","lastTime","time","CatchError","selector","catchError","toPromise","Promise","resolve","reject","Tap","tap","Timeout"],"mappings":"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"}