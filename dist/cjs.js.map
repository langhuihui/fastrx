{"version":3,"file":"cjs.js","sources":["../es/common.js","../es/combination.js","../es/mathematical.js","../es/filtering.js","../es/transformation.js","../es/producer.js","../es/utils.js"],"sourcesContent":["export function nothing(...args) { }\nexport const call = (f) => f();\nexport const identity = (x) => x;\nexport function dispose() {\n    this.dispose();\n}\n// @ts-ignore\nexport const inspect = () => typeof __FASTRX_DEVTOOLS__ !== 'undefined';\nlet obids = 1;\n// function pp(this: Observable<unknown>, ...args: [...Operator<unknown>[], Operator<unknown>]) {\n//   return pipe(this, ...args);\n// }\nexport class Inspect extends Function {\n    toString() {\n        return `${this.name}(${this.args.length ? [...this.args].join(', ') : \"\"})`;\n    }\n    // pipe(...args: [...Operator<unknown>[], Operator<unknown>]): Observable<unknown> {\n    //   return pipe(this as unknown as Observable<T>, ...args);\n    // }\n    subscribe(sink) {\n        const ns = new NodeSink(sink, this, this.streamId++);\n        Events.subscribe({ id: this.id, end: false }, { nodeId: ns.sourceId, streamId: ns.id });\n        this(ns);\n        return ns;\n    }\n}\nexport class LastSink {\n    constructor() {\n        this.defers = new Set();\n        this.disposed = false;\n    }\n    next(data) {\n    }\n    complete() {\n        this.dispose();\n    }\n    error(err) {\n        this.dispose();\n    }\n    get bindDispose() {\n        return () => this.dispose();\n    }\n    dispose() {\n        this.disposed = true;\n        this.complete = nothing;\n        this.error = nothing;\n        this.next = nothing;\n        this.dispose = nothing;\n        this.subscribe = nothing;\n        this.doDefer();\n    }\n    subscribe(source) {\n        if (source instanceof Inspect)\n            source.subscribe(this);\n        else\n            source(this);\n        return this;\n    }\n    get bindSubscribe() {\n        return (source) => this.subscribe(source);\n    }\n    doDefer() {\n        this.defers.forEach(call);\n        this.defers.clear();\n    }\n    defer(df) {\n        this.defers.add(df);\n    }\n    removeDefer(df) {\n        this.defers.delete(df);\n    }\n    reset() {\n        this.disposed = false;\n        //@ts-ignore\n        delete this.complete;\n        //@ts-ignore\n        delete this.next;\n        //@ts-ignore\n        delete this.dispose;\n        //@ts-ignore\n        delete this.next;\n        //@ts-ignore\n        delete this.subscribe;\n    }\n    resetNext() {\n        //@ts-ignore\n        delete this.next;\n    }\n    resetComplete() {\n        //@ts-ignore\n        delete this.complete;\n    }\n    resetError() {\n        //@ts-ignore\n        delete this.error;\n    }\n}\nexport class Sink extends LastSink {\n    constructor(sink) {\n        super();\n        this.sink = sink;\n        sink.defer(this.bindDispose);\n    }\n    next(data) {\n        this.sink.next(data);\n    }\n    complete() {\n        this.sink.complete();\n    }\n    error(err) {\n        this.sink.error(err);\n    }\n}\nexport class Subscribe extends LastSink {\n    constructor(source, _next = nothing, _error = nothing, _complete = nothing) {\n        super();\n        this._next = _next;\n        this._error = _error;\n        this._complete = _complete;\n        this.then = nothing;\n        if (source instanceof Inspect) {\n            const node = { toString: () => 'subscribe', id: 0, source };\n            this.defer(() => {\n                Events.defer(node, 0);\n            });\n            Events.create(node);\n            Events.pipe(node);\n            this.sourceId = node.id;\n            this.subscribe(source);\n            Events.subscribe({ id: node.id, end: true });\n            if (_next == nothing) {\n                this._next = data => Events.next(node, 0, data);\n            }\n            else {\n                this.next = data => {\n                    Events.next(node, 0, data);\n                    _next(data);\n                };\n            }\n            if (_complete == nothing) {\n                this._complete = () => Events.complete(node, 0);\n            }\n            else {\n                this.complete = () => {\n                    this.dispose();\n                    Events.complete(node, 0);\n                    _complete();\n                };\n            }\n            if (_error == nothing) {\n                this._error = err => Events.complete(node, 0, err);\n            }\n            else {\n                this.error = err => {\n                    this.dispose();\n                    Events.complete(node, 0, err);\n                    _error();\n                };\n            }\n        }\n        else {\n            this.subscribe(source);\n        }\n    }\n    next(data) {\n        this._next(data);\n    }\n    complete() {\n        this.dispose();\n        this._complete();\n    }\n    error(err) {\n        this.dispose();\n        this._error(err);\n    }\n}\nexport function pipe(first, ...cbs) {\n    return cbs.reduce((aac, c) => c(aac), first);\n}\nexport function create(ob, name, args) {\n    if (inspect()) {\n        const result = Object.defineProperties(Object.setPrototypeOf(ob, Inspect.prototype), {\n            streamId: { value: 0, writable: true },\n            name: { value: name },\n            args: { value: args },\n            id: { value: 0, writable: true },\n        });\n        Events.create(result);\n        for (let i = 0; i < args.length; i++) {\n            const arg = args[i];\n            if (typeof arg === 'function') {\n                if (arg instanceof Inspect) {\n                    Events.addSource(arg, result);\n                }\n                else {\n                }\n            }\n        }\n        return result;\n    }\n    return ob;\n}\nexport function deliver(c, name) {\n    return function (...args) {\n        return source => {\n            if (source instanceof Inspect) {\n                const ob = create((observer) => {\n                    const deliverSink = new c(observer, ...args);\n                    deliverSink.sourceId = ob.id;\n                    deliverSink.subscribe(source);\n                }, name, arguments);\n                ob.source = source;\n                Events.pipe(ob);\n                return ob;\n            }\n            else {\n                return observer => source(new c(observer, ...args));\n            }\n        };\n    };\n}\nfunction send(event, payload) {\n    window.postMessage({ source: 'fastrx-devtools-backend', payload: { event, payload } });\n}\nclass NodeSink extends Sink {\n    constructor(sink, source, id) {\n        super(sink);\n        this.source = source;\n        this.id = id;\n        this.sourceId = sink.sourceId;\n        this.defer(() => {\n            Events.defer(this.source, this.id);\n        });\n    }\n    next(data) {\n        Events.next(this.source, this.id, data);\n        this.sink.next(data);\n    }\n    complete() {\n        Events.complete(this.source, this.id);\n        this.sink.complete();\n    }\n    error(err) {\n        Events.complete(this.source, this.id, err);\n        this.sink.error(err);\n    }\n}\nexport const Events = {\n    addSource(who, source) {\n        send('addSource', {\n            id: who.id,\n            name: who.toString(),\n            source: { id: source.id, name: source.toString() },\n        });\n    },\n    next(who, streamId, data) {\n        send('next', { id: who.id, streamId, data: data && data.toString() });\n    },\n    subscribe({ id, end }, sink) {\n        send('subscribe', {\n            id,\n            end,\n            sink: { nodeId: sink && sink.nodeId, streamId: sink && sink.streamId },\n        });\n    },\n    complete(who, streamId, err) {\n        send('complete', { id: who.id, streamId, err: err ? err.toString() : null });\n    },\n    defer(who, streamId) {\n        send('defer', { id: who.id, streamId });\n    },\n    pipe(who) {\n        send('pipe', {\n            name: who.toString(),\n            id: who.id,\n            source: { id: who.source.id, name: who.source.toString() },\n        });\n    },\n    update(who) {\n        send('update', { id: who.id, name: who.toString() });\n    },\n    create(who) {\n        if (!who.id)\n            who.id = obids++;\n        send('create', { name: who.toString(), id: who.id });\n    },\n};\nexport class TimeoutError extends Error {\n    constructor(timeout) {\n        super(`timeout after ${timeout}ms`);\n        this.timeout = timeout;\n    }\n}\n","import { Sink, LastSink, deliver, nothing, create, Inspect, Events } from \"./common\";\nclass Share extends LastSink {\n    constructor(source) {\n        super();\n        this.source = source;\n        this.sinks = new Set();\n    }\n    add(sink) {\n        sink.defer(() => this.remove(sink));\n        if (this.sinks.add(sink).size === 1) {\n            this.reset();\n            this.subscribe(this.source);\n        }\n    }\n    remove(sink) {\n        this.sinks.delete(sink);\n        if (this.sinks.size === 0) {\n            this.dispose();\n        }\n    }\n    next(data) {\n        this.sinks.forEach((s) => s.next(data));\n    }\n    complete() {\n        this.sinks.forEach((s) => s.complete());\n        this.sinks.clear();\n    }\n    error(err) {\n        this.sinks.forEach((s) => s.error(err));\n        this.sinks.clear();\n    }\n}\nexport function share() {\n    return (source) => {\n        const share = new Share(source);\n        if (source instanceof Inspect) {\n            const ob = create((observer) => {\n                share.add(observer);\n            }, \"share\", arguments);\n            share.sourceId = ob.id;\n            ob.source = source;\n            Events.pipe(ob);\n            return ob;\n        }\n        return create(share.add.bind(share), \"share\", arguments);\n    };\n}\n;\nexport function merge(...sources) {\n    return create((sink) => {\n        const merge = new Sink(sink);\n        let nLife = sources.length;\n        merge.complete = () => {\n            if (--nLife === 0) {\n                sink.complete();\n            }\n        };\n        sources.forEach(merge.bindSubscribe);\n    }, \"merge\", arguments);\n}\nexport function race(...sources) {\n    return create((sink) => {\n        const sinks = new Map();\n        sources.forEach((source) => {\n            const r = new Sink(sink);\n            sinks.set(source, r);\n            r.complete = () => {\n                sinks.delete(source);\n                if (sinks.size === 0) { //特殊情况：所有流都没有数据\n                    sink.complete();\n                }\n                else {\n                    r.dispose();\n                }\n            };\n            r.next = (data) => {\n                sinks.delete(source); //先排除自己，防止自己调用dispose\n                sinks.forEach((s) => s.dispose()); //其他所有流全部取消订阅\n                r.resetNext();\n                r.resetComplete();\n                r.next(data);\n            };\n        });\n        sources.forEach((source) => sinks.get(source).subscribe(source));\n    }, \"race\", arguments);\n}\nexport function concat(...sources) {\n    return create(sink => {\n        let pos = 0;\n        const len = sources.length;\n        const s = new Sink(sink);\n        s.complete = () => {\n            if (pos < len && !s.disposed) {\n                s.doDefer();\n                s.subscribe(sources[pos++]);\n            }\n            else\n                sink.complete();\n        };\n        s.complete();\n    }, \"concat\", arguments);\n}\nexport function shareReplay(bufferSize) {\n    return (source) => {\n        const share = new Share(source);\n        const buffer = [];\n        share.next = function (data) {\n            buffer.push(data);\n            if (buffer.length > bufferSize) {\n                buffer.shift();\n            }\n            this.sinks.forEach((s) => s.next(data));\n        };\n        return create(sink => {\n            sink.defer(() => share.remove(sink));\n            buffer.forEach((cache) => sink.next(cache));\n            share.add(sink);\n        }, \"shareReplay\", arguments);\n    };\n}\nexport function iif(condition, trueS, falseS) {\n    return create((sink) => condition() ? trueS(sink) : falseS(sink), \"iif\", arguments);\n}\nexport function combineLatest(...sources) {\n    return create((sink) => {\n        const nTotal = sources.length;\n        let nRun = nTotal; //剩余未发出事件的事件流数量\n        let nLife = nTotal; //剩余未完成的事件流数量\n        const array = new Array(nTotal);\n        const onComplete = () => {\n            if (--nLife === 0)\n                sink.complete();\n        };\n        const s = (source, i) => {\n            const ss = new Sink(sink);\n            ss.next = data => {\n                if (--nRun === 0) {\n                    ss.next = data => {\n                        array[i] = data;\n                        sink.next(array);\n                    };\n                    ss.next(data);\n                }\n                else {\n                    array[i] = data;\n                }\n            };\n            ss.complete = onComplete;\n            ss.subscribe(source);\n        };\n        sources.forEach(s);\n    }, \"combineLatest\", arguments);\n}\nexport function zip(...sources) {\n    return create((sink) => {\n        const nTotal = sources.length;\n        let nLife = nTotal; //剩余未完成的事件流数量\n        const array = new Array(nTotal);\n        const onComplete = () => {\n            if (--nLife === 0)\n                sink.complete();\n        };\n        const s = (source, i) => {\n            const ss = new Sink(sink);\n            const buffer = [];\n            array[i] = buffer;\n            ss.next = data => {\n                buffer.push(data);\n                if (array.every(x => x.length)) {\n                    sink.next(array.map(x => x.shift()));\n                }\n            };\n            ss.complete = onComplete;\n            ss.subscribe(source);\n        };\n        sources.forEach(s);\n    }, \"zip\", arguments);\n}\nexport function startWith(...xs) {\n    return (inputSource) => create((sink, pos = 0, l = xs.length) => {\n        while (pos < l && !sink.disposed) {\n            sink.next(xs[pos++]);\n        }\n        sink.disposed || sink.subscribe(inputSource);\n    }, \"startWith\", arguments);\n}\nclass WithLatestFrom extends Sink {\n    constructor(sink, ...sources) {\n        super(sink);\n        const s = new Sink(this.sink);\n        s.next = (data) => (this.buffer = data);\n        s.complete = nothing;\n        s.subscribe(combineLatest(...sources));\n    }\n    next(data) {\n        if (this.buffer) {\n            this.sink.next([data, ...this.buffer]);\n        }\n    }\n}\nexport const withLatestFrom = deliver(WithLatestFrom, \"withLatestFrom\");\nclass BufferCount extends Sink {\n    constructor(sink, bufferSize, startBufferEvery) {\n        super(sink);\n        this.bufferSize = bufferSize;\n        this.startBufferEvery = startBufferEvery;\n        this.buffer = [];\n        this.count = 0;\n        if (this.startBufferEvery) {\n            this.buffers = [[]];\n        }\n    }\n    next(data) {\n        if (this.startBufferEvery) {\n            if (this.count++ === this.startBufferEvery) {\n                this.buffers.push([]);\n                this.count = 1;\n            }\n            this.buffers.forEach((buffer) => {\n                buffer.push(data);\n            });\n            if (this.buffers[0].length === this.bufferSize) {\n                this.sink.next(this.buffers.shift());\n            }\n        }\n        else {\n            this.buffer.push(data);\n            if (this.buffer.length === this.bufferSize) {\n                this.sink.next(this.buffer);\n                this.buffer = [];\n            }\n        }\n    }\n    complete() {\n        if (this.buffer.length) {\n            this.sink.next(this.buffer);\n        }\n        else if (this.buffers.length) {\n            this.buffers.forEach((buffer) => this.sink.next(buffer));\n        }\n        super.complete();\n    }\n}\nexport const bufferCount = deliver(BufferCount, \"bufferCount\");\n// export function operator<T, R, ARG extends unknown[]>(f: (...args: [ISink<R>, ...ARG]) => ISink<T>) {\n//   return (...args: ARG): (Operator<T, R>) => source => sink => f(sink, ...args).subscribe(source);\n// }\nclass Buffer extends Sink {\n    constructor(sink, closingNotifier) {\n        super(sink);\n        this.buffer = [];\n        const s = new Sink(sink);\n        s.next = (_data) => {\n            sink.next(this.buffer);\n            this.buffer = [];\n        };\n        s.complete = nothing;\n        s.subscribe(closingNotifier);\n    }\n    next(data) {\n        this.buffer.push(data);\n    }\n    complete() {\n        if (this.buffer.length) {\n            this.sink.next(this.buffer);\n        }\n        super.complete();\n    }\n}\nexport const buffer = deliver(Buffer, \"buffer\");\n","import { Sink, deliver } from \"./common\";\nclass Reduce extends Sink {\n    constructor(sink, f, seed) {\n        super(sink);\n        this.f = f;\n        const accSet = () => {\n            this.sink.next(this.acc);\n            this.sink.complete();\n        };\n        if (typeof seed === \"undefined\") {\n            this.next = (d) => {\n                this.acc = d;\n                this.complete = accSet;\n                this.resetNext();\n            };\n        }\n        else {\n            this.acc = seed;\n            this.complete = accSet;\n        }\n    }\n    next(data) {\n        this.acc = this.f(this.acc, data);\n    }\n}\nexport const reduce = deliver(Reduce, \"reduce\");\nexport const count = (f) => deliver(Reduce, \"count\")((aac, c) => (f(c) ? aac + 1 : aac), 0);\nexport const max = () => deliver(Reduce, \"max\")(Math.max);\nexport const min = () => deliver(Reduce, \"min\")(Math.min);\nexport const sum = () => deliver(Reduce, \"sum\")((aac, c) => aac + c, 0);\n","import { Sink, deliver, nothing, dispose } from \"./common\";\nimport { reduce } from \"./mathematical\";\nimport { timer } from \"./producer\";\nclass Filter extends Sink {\n    constructor(sink, filter, thisArg) {\n        super(sink);\n        this.filter = filter;\n        this.thisArg = thisArg;\n    }\n    next(data) {\n        if (this.filter.call(this.thisArg, data)) {\n            this.sink.next(data);\n        }\n    }\n}\nexport const filter = deliver(Filter, \"filter\");\nclass Ignore extends Sink {\n    next(_data) { }\n}\nexport const ignoreElements = deliver(Ignore, \"ignoreElements\");\nclass Take extends Sink {\n    constructor(sink, count) {\n        super(sink);\n        this.count = count;\n    }\n    next(data) {\n        this.sink.next(data);\n        if (--this.count === 0) {\n            this.complete();\n        }\n    }\n}\nexport const take = deliver(Take, \"take\");\nclass TakeUntil extends Sink {\n    constructor(sink, control) {\n        super(sink);\n        const _takeUntil = new Sink(sink);\n        _takeUntil.next = () => sink.complete();\n        _takeUntil.complete = dispose;\n        _takeUntil.subscribe(control);\n    }\n}\nexport const takeUntil = deliver(TakeUntil, \"takeUntil\");\nclass TakeWhile extends Sink {\n    constructor(sink, f) {\n        super(sink);\n        this.f = f;\n    }\n    next(data) {\n        if (this.f(data)) {\n            this.sink.next(data);\n        }\n        else {\n            this.complete();\n        }\n    }\n}\nexport const takeWhile = deliver(TakeWhile, \"takeWhile\");\nexport const takeLast = (count) => reduce((buffer, d) => {\n    buffer.push(d);\n    if (buffer.length > count)\n        buffer.shift();\n    return buffer;\n}, []);\nclass Skip extends Sink {\n    constructor(sink, count) {\n        super(sink);\n        this.count = count;\n    }\n    next(_data) {\n        if (--this.count === 0) {\n            this.next = super.next;\n        }\n    }\n}\nexport const skip = deliver(Skip, \"skip\");\nclass SkipUntil extends Sink {\n    constructor(sink, control) {\n        super(sink);\n        sink.next = nothing;\n        const _skipUntil = new Sink(sink);\n        _skipUntil.next = () => {\n            _skipUntil.dispose();\n            sink.resetNext();\n        };\n        _skipUntil.complete = dispose;\n        _skipUntil.subscribe(control);\n    }\n}\nexport const skipUntil = deliver(SkipUntil, \"skipUntil\");\nclass SkipWhile extends Sink {\n    constructor(sink, f) {\n        super(sink);\n        this.f = f;\n    }\n    next(data) {\n        if (!this.f(data)) {\n            this.next = super.next;\n            this.next(data);\n        }\n    }\n}\nexport const skipWhile = deliver(SkipWhile, \"skipWhile\");\nconst defaultThrottleConfig = {\n    leading: true,\n    trailing: false,\n};\nclass _Throttle extends Sink {\n    constructor(sink, durationSelector, trailing) {\n        super(sink);\n        this.durationSelector = durationSelector;\n        this.trailing = trailing;\n    }\n    cacheValue(value) {\n        this.last = value;\n        // @ts-ignore\n        delete this.send;\n        if (this.disposed)\n            this.throttle(value);\n    }\n    send(data) {\n        this.send = nothing;\n        this.sink.next(data);\n        this.throttle(data);\n    }\n    throttle(data) {\n        this.reset();\n        this.subscribe(this.durationSelector(data));\n    }\n    next() {\n        this.complete();\n    }\n    complete() {\n        this.dispose();\n        if (this.trailing) {\n            this.send(this.last);\n        }\n    }\n}\nclass Throttle extends Sink {\n    constructor(sink, durationSelector, config = defaultThrottleConfig) {\n        super(sink);\n        this.durationSelector = durationSelector;\n        this.config = config;\n        this._throttle = new _Throttle(this.sink, this.durationSelector, this.config.trailing);\n        this._throttle.dispose();\n    }\n    next(data) {\n        if (this._throttle.disposed && this.config.leading) {\n            this._throttle.send(data);\n        }\n        else {\n            this._throttle.cacheValue(data);\n        }\n    }\n    complete() {\n        this._throttle.throttle = nothing; //最后不再启动节流\n        this._throttle.complete();\n        super.complete();\n    }\n}\nexport const throttle = deliver(Throttle, \"throttle\");\nconst defaultAuditConfig = {\n    leading: false,\n    trailing: true,\n};\nexport const audit = (durationSelector) => deliver(Throttle, \"audit\")(durationSelector, defaultAuditConfig);\nclass _Debounce extends Sink {\n    next() {\n        this.complete();\n    }\n    complete() {\n        this.dispose();\n        this.sink.next(this.last);\n    }\n}\nclass Debounce extends Sink {\n    constructor(sink, durationSelector) {\n        super(sink);\n        this.durationSelector = durationSelector;\n        this._debounce = new _Debounce(this.sink);\n        this._debounce.dispose();\n    }\n    next(data) {\n        this._debounce.dispose();\n        this._debounce.reset();\n        this._debounce.last = data;\n        this._debounce.subscribe(this.durationSelector(data));\n    }\n    complete() {\n        this._debounce.complete();\n        super.complete();\n    }\n}\nexport const debounce = deliver(Debounce, \"debounce\");\nexport const debounceTime = (period) => deliver(Debounce, \"debounceTime\")((_d) => timer(period));\nclass ElementAt extends Sink {\n    constructor(sink, count, defaultValue) {\n        super(sink);\n        this.count = count;\n        this.defaultValue = defaultValue;\n    }\n    next(data) {\n        if (this.count-- === 0) {\n            this.defaultValue = data;\n            this.complete();\n        }\n    }\n    complete() {\n        if (this.defaultValue === void 0) {\n            this.error(new Error('not enough elements in sequence'));\n            return;\n        }\n        else\n            this.sink.next(this.defaultValue);\n        super.complete();\n    }\n}\nexport const elementAt = deliver(ElementAt, \"elementAt\");\nexport const find = (f) => (source) => take(1)(skipWhile((d) => !f(d))(source));\nclass FindIndex extends Sink {\n    constructor(sink, f) {\n        super(sink);\n        this.f = f;\n        this.i = 0;\n    }\n    next(data) {\n        if (this.f(data)) {\n            this.sink.next(this.i++);\n            this.complete();\n        }\n        else {\n            ++this.i;\n        }\n    }\n}\nexport const findIndex = deliver(FindIndex, \"findIndex\");\nclass First extends Sink {\n    constructor(sink, f, defaultValue) {\n        super(sink);\n        this.f = f;\n        this.defaultValue = defaultValue;\n        this.index = 0;\n    }\n    next(data) {\n        if (!this.f || this.f(data, this.index++)) {\n            this.defaultValue = data;\n            this.complete();\n        }\n    }\n    complete() {\n        if (this.defaultValue === void 0) {\n            this.error(new Error('no elements in sequence'));\n            return;\n        }\n        else\n            this.sink.next(this.defaultValue);\n        super.complete();\n    }\n}\nexport const first = deliver(First, \"first\");\nclass Last extends Sink {\n    constructor(sink, f, defaultValue) {\n        super(sink);\n        this.f = f;\n        this.defaultValue = defaultValue;\n        this.index = 0;\n    }\n    next(data) {\n        if (!this.f || this.f(data, this.index++)) {\n            this.defaultValue = data;\n        }\n    }\n    complete() {\n        if (this.defaultValue === void 0) {\n            this.error(new Error('no elements in sequence'));\n            return;\n        }\n        else\n            this.sink.next(this.defaultValue);\n        super.complete();\n    }\n}\nexport const last = deliver(Last, 'last');\nclass Every extends Sink {\n    constructor(sink, predicate) {\n        super(sink);\n        this.predicate = predicate;\n        this.index = 0;\n    }\n    next(data) {\n        if (!this.predicate(data, this.index++)) {\n            this.result = false;\n            this.complete();\n        }\n        else {\n            this.result = true;\n        }\n    }\n    complete() {\n        if (this.result === void 0) {\n            this.error(new Error('no elements in sequence'));\n            return;\n        }\n        else\n            this.sink.next(this.result);\n        super.complete();\n    }\n}\nexport const every = deliver(Every, \"every\");\n","import { Sink, deliver, nothing } from \"./common\";\nimport { subject } from \"./producer\";\nclass Scan extends Sink {\n    constructor(sink, f, seed) {\n        super(sink);\n        this.f = f;\n        if (typeof seed === \"undefined\") {\n            this.next = (d) => {\n                this.acc = d;\n                this.resetNext();\n                this.sink.next(this.acc);\n            };\n        }\n        else {\n            this.acc = seed;\n        }\n    }\n    next(data) {\n        this.sink.next(this.acc = this.f(this.acc, data));\n    }\n}\nexport const scan = deliver(Scan, \"scan\");\nclass Pairwise extends Sink {\n    constructor() {\n        super(...arguments);\n        this.hasLast = false;\n    }\n    next(data) {\n        if (this.hasLast) {\n            this.sink.next([this.last, data]);\n        }\n        else {\n            this.hasLast = true;\n        }\n        this.last = data;\n    }\n}\nexport const pairwise = deliver(Pairwise, \"pairwise\");\nclass MapObserver extends Sink {\n    constructor(sink, mapper, thisArg) {\n        super(sink);\n        this.mapper = mapper;\n        this.thisArg = thisArg;\n    }\n    next(data) {\n        super.next(this.mapper.call(this.thisArg, data));\n    }\n}\nexport const map = deliver(MapObserver, \"map\");\nexport const mapTo = (target) => deliver(MapObserver, \"mapTo\")((_x) => target);\nclass InnerSink extends Sink {\n    constructor(sink, data, context) {\n        super(sink);\n        this.data = data;\n        this.context = context;\n    }\n    next(data) {\n        const combineResults = this.context.combineResults;\n        if (combineResults) {\n            this.sink.next(combineResults(this.data, data));\n        }\n        else {\n            this.sink.next(data);\n        }\n    }\n    // 如果complete先于context的complete触发，则激活原始的context的complete\n    tryComplete() {\n        this.context.resetComplete();\n        this.dispose();\n    }\n}\nclass Maps extends Sink {\n    constructor(sink, makeSource, combineResults) {\n        super(sink);\n        this.makeSource = makeSource;\n        this.combineResults = combineResults;\n        this.index = 0;\n    }\n    subInner(data, c) {\n        const sink = this.currentSink = new c(this.sink, data, this);\n        this.complete = this.tryComplete;\n        sink.complete = sink.tryComplete;\n        sink.subscribe(this.makeSource(data, this.index++));\n    }\n    // 如果complete先于inner的complete触发，则不传播complete\n    tryComplete() {\n        // 如果tryComplete被调用，说明currentSink已经存在\n        this.currentSink.resetComplete();\n        this.dispose();\n    }\n}\nclass _SwitchMap extends InnerSink {\n}\nclass SwitchMap extends Maps {\n    next(data) {\n        this.subInner(data, _SwitchMap);\n        this.next = (data) => {\n            this.currentSink.dispose();\n            this.subInner(data, _SwitchMap);\n        };\n    }\n}\nexport const switchMap = deliver(SwitchMap, \"switchMap\");\nfunction makeMapTo(f) {\n    return (innerSource, combineResults) => f(() => innerSource, combineResults);\n}\nexport const switchMapTo = makeMapTo(deliver(SwitchMap, \"switchMapTo\"));\nclass _ConcatMap extends InnerSink {\n    tryComplete() {\n        this.dispose();\n        if (this.context.sources.length) {\n            this.context.subNext();\n        }\n        else {\n            this.context.resetNext();\n            this.context.resetComplete();\n        }\n    }\n}\nclass ConcatMap extends Maps {\n    constructor() {\n        super(...arguments);\n        this.sources = [];\n        this.next2 = this.sources.push.bind(this.sources);\n    }\n    next(data) {\n        this.next2(data);\n        this.subNext();\n    }\n    subNext() {\n        this.next = this.next2; //后续直接push，不触发subNext\n        this.subInner(this.sources.shift(), _ConcatMap);\n        if (this.disposed && this.sources.length === 0) {\n            // 最后一个innerSink，需要激活其真实的complete\n            this.currentSink.resetComplete();\n        }\n    }\n    tryComplete() {\n        if (this.sources.length === 0)\n            // 最后一个innerSink，需要激活其真实的complete\n            this.currentSink.resetComplete();\n        this.dispose();\n    }\n}\nexport const concatMap = deliver(ConcatMap, \"concatMap\");\nexport const concatMapTo = makeMapTo(deliver(ConcatMap, \"concatMapTo\"));\nclass _MergeMap extends InnerSink {\n    tryComplete() {\n        this.context.inners.delete(this);\n        super.dispose();\n        if (this.context.inners.size === 0)\n            this.context.resetComplete();\n    }\n}\n// type __Maps<C> = C extends MapContext<infer T, infer U, infer R> ? C : never;\n// type _Maps<C> = C extends InnerSink<infer T, infer U, infer R, infer> ? Maps<T, U, R, C> : never;\nclass MergeMap extends Maps {\n    constructor() {\n        super(...arguments);\n        this.inners = new Set();\n    }\n    next(data) {\n        this.subInner(data, _MergeMap);\n        this.inners.add(this.currentSink);\n    }\n    tryComplete() {\n        // 最后一个innerSink，需要激活其真实的complete\n        if (this.inners.size === 1)\n            this.inners.forEach(s => s.resetComplete());\n        else\n            this.dispose();\n    }\n}\nexport const mergeMap = deliver(MergeMap, \"mergeMap\");\nexport const mergeMapTo = makeMapTo(deliver(MergeMap, \"mergeMapTo\"));\nclass _ExhaustMap extends InnerSink {\n    dispose() {\n        this.context.resetNext();\n        super.dispose();\n    }\n}\nclass ExhaustMap extends Maps {\n    next(data) {\n        this.next = nothing;\n        this.subInner(data, _ExhaustMap);\n    }\n}\nexport const exhaustMap = deliver(ExhaustMap, \"exhaustMap\");\nexport const exhaustMapTo = makeMapTo(deliver(ExhaustMap, \"exhaustMapTo\"));\nclass GroupBy extends Sink {\n    constructor(sink, f) {\n        super(sink);\n        this.f = f;\n        this.groups = new Map();\n    }\n    next(data) {\n        const key = this.f(data);\n        let group = this.groups.get(key);\n        if (typeof group === 'undefined') {\n            group = subject();\n            group.key = key;\n            this.groups.set(key, group);\n            super.next(group);\n        }\n        group.next(data);\n    }\n    complete() {\n        this.groups.forEach((group) => group.complete());\n        super.complete();\n    }\n    error(err) {\n        this.groups.forEach((group) => group.error(err));\n        super.error(err);\n    }\n}\nexport const groupBy = deliver(GroupBy, \"groupBy\");\nclass TimeInterval extends Sink {\n    constructor() {\n        super(...arguments);\n        this.start = new Date();\n    }\n    next(value) {\n        this.sink.next({ value, interval: Number(new Date()) - Number(this.start) });\n        this.start = new Date();\n    }\n}\nexport const timeInterval = deliver(TimeInterval, \"timeInterval\");\nclass BufferTime extends Sink {\n    constructor(sink, miniseconds) {\n        super(sink);\n        this.miniseconds = miniseconds;\n        this.buffer = [];\n        this.id = setInterval(() => {\n            this.sink.next(this.buffer.concat());\n            this.buffer.length = 0;\n        }, this.miniseconds);\n    }\n    next(data) {\n        this.buffer.push(data);\n    }\n    complete() {\n        this.sink.next(this.buffer);\n        super.complete();\n    }\n    dispose() {\n        clearInterval(this.id);\n        super.dispose();\n    }\n}\nexport const bufferTime = deliver(BufferTime, \"bufferTime\");\nclass Delay extends Sink {\n    constructor(sink, delay) {\n        super(sink);\n        this.buffer = [];\n        this.delayTime = delay;\n    }\n    dispose() {\n        clearTimeout(this.timeoutId);\n        super.dispose();\n    }\n    delay(delay) {\n        this.timeoutId = setTimeout(() => {\n            const d = this.buffer.shift();\n            if (d) {\n                const { time: lastTime, data } = d;\n                super.next(data);\n                if (this.buffer.length) {\n                    this.delay(Number(this.buffer[0].time) - Number(lastTime));\n                }\n            }\n        }, delay);\n    }\n    next(data) {\n        if (!this.buffer.length) {\n            this.delay(this.delayTime);\n        }\n        this.buffer.push({ time: new Date(), data });\n    }\n    complete() {\n        this.timeoutId = setTimeout(() => super.complete(), this.delayTime);\n    }\n}\nexport const delay = deliver(Delay, \"delay\");\nclass CatchError extends Sink {\n    constructor(sink, selector) {\n        super(sink);\n        this.selector = selector;\n    }\n    error(err) {\n        this.dispose();\n        this.selector(err)(this.sink);\n    }\n}\nexport const catchError = deliver(CatchError, \"catchError\");\n","import { merge, share } from \"./combination\";\nimport { nothing, create, pipe } from \"./common\";\nimport { takeUntil } from \"./filtering\";\nimport { switchMap } from \"./transformation\";\nexport function subject(source) {\n    const args = arguments;\n    const observable = share()(create((sink) => {\n        observable.next = (data) => sink.next(data);\n        observable.complete = () => sink.complete();\n        observable.error = (err) => sink.error(err);\n        source && sink.subscribe(source);\n    }, \"subject\", args));\n    observable.next = nothing;\n    observable.complete = nothing;\n    observable.error = nothing;\n    return observable;\n}\n;\nexport function defer(f) {\n    return create(sink => sink.subscribe(f()), \"defer\", arguments);\n}\nexport function of(...data) {\n    return create(fromArray(data), \"of\", arguments);\n}\nconst asap = (f) => (sink) => {\n    setTimeout(() => f(sink));\n};\nexport function fromArray(data) {\n    return create(asap((sink) => {\n        for (let i = 0; !sink.disposed && i < data.length; i++) {\n            sink.next(data[i]);\n        }\n        sink.complete();\n    }), \"fromArray\", arguments);\n}\nexport function interval(period) {\n    return create((sink) => {\n        let i = 0;\n        const id = setInterval(() => sink.next(i++), period);\n        sink.defer(() => { clearInterval(id); });\n        return \"interval\";\n    }, \"interval\", arguments);\n}\nexport function timer(delay, period) {\n    return create((sink) => {\n        let i = 0;\n        const id = setTimeout(() => {\n            sink.removeDefer(deferF);\n            sink.next(i++);\n            if (period) {\n                const id = setInterval(() => sink.next(i++), period);\n                sink.defer(() => { clearInterval(id); });\n            }\n            else {\n                sink.complete();\n            }\n        }, delay);\n        const deferF = () => { clearTimeout(id); };\n        sink.defer(deferF);\n    }, \"timer\", arguments);\n}\n;\nexport function fromEventPattern(add, remove) {\n    return create((sink) => {\n        const n = (d) => sink.next(d);\n        sink.defer(() => remove(n));\n        add(n);\n        return name;\n    }, \"fromEventPattern\", arguments);\n}\n;\nexport function fromEvent(target, name) {\n    if (\"on\" in target) {\n        return create(fromEventPattern((h) => target.on(name, h), (h) => target.off(name, h)), \"fromEvent\", arguments);\n    }\n    else if (\"addListener\" in target) {\n        return create(fromEventPattern((h) => target.addListener(name, h), (h) => target.removeListener(name, h)), \"fromEvent\", arguments);\n    }\n    else if (\"addEventListener\" in target) {\n        return create(fromEventPattern((h) => target.addEventListener(name, h), (h) => target.removeEventListener(name, h)), \"fromEvent\", arguments);\n    }\n    else\n        throw 'target is not a EventDispachter';\n}\n;\n/**\n *\n * @param {window | Worker | EventSource | WebSocket | RTCPeerConnection} target\n * @returns\n */\nexport function fromMessageEvent(target) {\n    return create((sink) => {\n        const closeOb = fromEvent(target, 'close');\n        const messageOb = fromEvent(target, 'message');\n        const errorOb = fromEvent(target, 'error');\n        sink.defer(() => target.close());\n        sink.subscribe(pipe(merge(messageOb, switchMap(throwError)(errorOb)), takeUntil(closeOb)));\n    }, \"fromMessageEvent\", arguments);\n}\n;\nexport function fromPromise(promise) {\n    return create((sink) => {\n        promise.then(sink.next.bind(sink), sink.error.bind(sink));\n    }, \"fromPromise\", arguments);\n}\nexport function fromFetch(input, init) {\n    return create(defer(() => fromPromise(fetch(input, init))), \"fromFetch\", arguments);\n}\nexport function fromIterable(source) {\n    return create(asap((sink) => {\n        try {\n            for (const data of source) {\n                if (sink.disposed)\n                    return;\n                sink.next(data);\n            }\n            sink.complete();\n        }\n        catch (err) {\n            sink.error(err);\n        }\n    }), \"fromIterable\", arguments);\n}\nexport function fromAnimationFrame() {\n    return create((sink) => {\n        let id = requestAnimationFrame(function next(t) {\n            if (!sink.disposed) {\n                sink.next(t);\n                id = requestAnimationFrame(next);\n            }\n        });\n        sink.defer(() => cancelAnimationFrame(id));\n    }, \"fromAnimationFrame\", arguments);\n}\nexport function range(start, count) {\n    return create((sink, pos = start, end = count + start) => {\n        while (pos < end && !sink.disposed)\n            sink.next(pos++);\n        sink.complete();\n        return \"range\";\n    }, \"range\", arguments);\n}\nexport function bindCallback(call, thisArg, ...args) {\n    return create((sink) => {\n        const inArgs = args.concat((res) => (sink.next(res), sink.complete()));\n        call.apply(thisArg, inArgs);\n    }, \"bindCallback\", arguments);\n}\nexport function bindNodeCallback(call, thisArg, ...args) {\n    return create((sink) => {\n        const inArgs = args.concat((err, res) => err ? (sink.error(err)) : (sink.next(res), sink.complete()));\n        call.apply(thisArg, inArgs);\n    }, \"bindNodeCallback\", arguments);\n}\nexport function never() {\n    return create(() => { }, \"never\", arguments);\n}\n;\nexport function throwError(e) {\n    return create(sink => sink.error(e), \"throwError\", arguments);\n}\nexport function empty() {\n    return create(sink => sink.complete(), \"empty\", arguments);\n}\n;\n","import { nothing, Sink, deliver, TimeoutError, Subscribe } from \"./common\";\nexport const toPromise = () => (source) => new Promise((resolve, reject) => {\n    let value;\n    new Subscribe(source, (d) => (value = d), reject, () => resolve(value));\n});\n// //SUBSCRIBER\nexport const subscribe = (n = nothing, e = nothing, c = nothing) => (source) => new Subscribe(source, n, e, c);\n// // UTILITY\nclass Tap extends Sink {\n    constructor(sink, ob) {\n        super(sink);\n        if (ob instanceof Function) {\n            this.next = (data) => { ob(data); sink.next(data); };\n        }\n        else {\n            if (ob.next)\n                this.next = (data) => { ob.next(data); sink.next(data); };\n            if (ob.complete)\n                this.complete = () => { ob.complete(); sink.complete(); };\n            if (ob.error)\n                this.error = (err) => { ob.error(err); sink.error(err); };\n        }\n    }\n}\nexport const tap = deliver(Tap, \"tap\");\nclass Timeout extends Sink {\n    constructor(sink, timeout) {\n        super(sink);\n        this.timeout = timeout;\n        this.id = setTimeout(() => this.error(new TimeoutError(this.timeout)), this.timeout);\n    }\n    next(data) {\n        super.next(data);\n        clearTimeout(this.id);\n        this.next = super.next;\n    }\n    dispose() {\n        clearTimeout(this.id);\n        super.dispose();\n    }\n}\nexport const timeout = deliver(Timeout, \"timeout\");\n"],"names":["nothing","call","f","identity","x","dispose","inspect","__FASTRX_DEVTOOLS__","obids","Inspect","name","args","length","join","sink","ns","NodeSink","streamId","Events","subscribe","id","end","nodeId","sourceId","Function","LastSink","defers","Set","disposed","data","err","complete","error","next","doDefer","source","forEach","clear","df","add","delete","Sink","defer","bindDispose","Subscribe","_next","_error","_complete","then","node","toString","create","pipe","first","cbs","reduce","aac","c","ob","result","Object","defineProperties","setPrototypeOf","prototype","value","writable","i","arg","addSource","deliver","observer","deliverSink","arguments","send","event","payload","window","postMessage","who","update","TimeoutError","timeout","Error","Share","sinks","remove","size","reset","s","share","bind","merge","sources","nLife","bindSubscribe","race","Map","r","set","resetNext","resetComplete","get","concat","pos","len","shareReplay","bufferSize","buffer","push","shift","cache","iif","condition","trueS","falseS","combineLatest","nTotal","nRun","array","Array","onComplete","ss","zip","every","map","startWith","xs","inputSource","l","WithLatestFrom","withLatestFrom","BufferCount","startBufferEvery","count","buffers","bufferCount","Buffer","closingNotifier","_data","Reduce","seed","accSet","acc","d","max","Math","min","sum","Filter","filter","thisArg","Ignore","ignoreElements","Take","take","TakeUntil","control","_takeUntil","takeUntil","TakeWhile","takeWhile","takeLast","Skip","skip","SkipUntil","_skipUntil","skipUntil","SkipWhile","skipWhile","defaultThrottleConfig","leading","trailing","_Throttle","durationSelector","last","throttle","Throttle","config","_throttle","cacheValue","defaultAuditConfig","audit","_Debounce","Debounce","_debounce","debounce","debounceTime","period","_d","timer","ElementAt","defaultValue","elementAt","find","FindIndex","findIndex","First","index","Last","Every","predicate","Scan","scan","Pairwise","hasLast","pairwise","MapObserver","mapper","mapTo","target","_x","InnerSink","context","combineResults","Maps","makeSource","currentSink","tryComplete","_SwitchMap","SwitchMap","subInner","switchMap","makeMapTo","innerSource","switchMapTo","_ConcatMap","subNext","ConcatMap","next2","concatMap","concatMapTo","_MergeMap","inners","MergeMap","mergeMap","mergeMapTo","_ExhaustMap","ExhaustMap","exhaustMap","exhaustMapTo","GroupBy","groups","key","group","subject","groupBy","TimeInterval","start","Date","interval","Number","timeInterval","BufferTime","miniseconds","setInterval","clearInterval","bufferTime","Delay","delay","delayTime","clearTimeout","timeoutId","setTimeout","lastTime","time","CatchError","selector","catchError","observable","of","fromArray","asap","removeDefer","deferF","fromEventPattern","n","fromEvent","h","on","off","addListener","removeListener","addEventListener","removeEventListener","fromMessageEvent","closeOb","messageOb","errorOb","close","throwError","fromPromise","promise","fromFetch","input","init","fetch","fromIterable","fromAnimationFrame","requestAnimationFrame","t","cancelAnimationFrame","range","bindCallback","inArgs","res","apply","bindNodeCallback","never","e","empty","toPromise","Promise","resolve","reject","Tap","tap","Timeout"],"mappings":"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"}