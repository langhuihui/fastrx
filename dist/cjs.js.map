{"version":3,"file":"cjs.js","sources":["../common.js","../combination.js","../mathematical.js","../fusion.js","../filtering.js","../producer.js","../transformation.js","../pipe.js","../devtools.js","../index.js"],"sourcesContent":["export function noop() {}\n\n//第一次调用有效\nexport const once =\n  (f) =>\n  (...args) => {\n    if (f) {\n      let r = f(...args);\n      f = null;\n      return r;\n    }\n  };\n\nexport class Sink {\n  constructor(sink, ...args) {\n    this.defers = new Set();\n    this.sink = sink;\n    this.init(...args);\n    if (sink) sink.defers.add(this);\n  }\n  init() {}\n  set disposePass(value) {\n    if (!this.sink) return;\n    if (value) this.sink.defers.add(this);\n    else this.sink.defers.delete(this);\n  }\n  next(data) {\n    this.sink && this.sink.next(data);\n  }\n  complete(err) {\n    this.sink && this.sink.complete(err);\n    this.dispose(false);\n  }\n  error(err) {\n    this.complete(err);\n  }\n  dispose(defer = true) {\n    this.disposed = true;\n    this.complete = noop;\n    this.next = noop;\n    this.dispose = noop;\n    this.subscribes = this.subscribe = noop;\n    defer && this.defer(); //销毁时终止事件源\n  }\n  defer(add) {\n    if (add) {\n      this.defers.add(add);\n    } else {\n      this.defers.forEach((defer) => {\n        switch (true) {\n          case defer.dispose != void 0:\n            defer.dispose();\n            break;\n          case typeof defer == 'function':\n            defer();\n            break;\n          case defer.length > 0:\n            {\n              let [f, thisArg, ...args] = defer;\n              if (f.call) f.call(thisArg, ...args);\n              else f(...args);\n            }\n            break;\n        }\n      });\n      this.defers.clear();\n    }\n  }\n  subscribe(source) {\n    source(this);\n    return this;\n  }\n  subscribes(sources) {\n    sources.forEach((source) => source(this));\n  }\n}\nclass Asap {\n  constructor() {\n    this.asaps = [];\n    this._asaps = [];\n  }\n  push(task) {\n    this.asaps.push(task);\n  }\n  _push(task) {\n    this._asaps.push(task);\n  }\n  run(task) {\n    this.run = this.push;\n    if (task) this.asaps.push(task);\n    Promise.resolve(this).then((_this) => {\n      _this.run = _this._push;\n      for (let i = 0, l = _this.asaps.length; i < l; i++) {\n        _this.asaps[i]();\n      }\n      _this.asaps = _this._asaps;\n      _this._asaps = [];\n      delete _this.run;\n      if (_this.asaps.length) {\n        _this.run();\n      }\n    });\n  }\n}\n\nconst _asap = new Asap();\n\nexport function asap(task, defer) {\n  _asap.run(task);\n  return defer;\n}\n\nexport const deliver =\n  (Class) =>\n  (...args) =>\n  (source) =>\n  (sink) =>\n    source(new Class(sink, ...args));\n","/* eslint-disable no-fallthrough */\nimport { Sink, deliver, noop } from './common';\nclass Share extends Sink {\n  init(source) {\n    this.source = source;\n    this.sinks = new Set();\n  }\n  add(sink) {\n    this.sinks.add(sink);\n    if (this.sinks.size === 1) {\n      this.source(this);\n    }\n  }\n  remove(sink) {\n    this.sinks.delete(sink);\n    if (this.sinks.size === 0) {\n      this.defer();\n    }\n  }\n  next(data) {\n    this.sinks.forEach((s) => s.next(data));\n  }\n  complete(err) {\n    this.sinks.forEach((s) => s.complete(err));\n    this.sinks.clear();\n  }\n}\nexport const share = () => (source) => {\n  const share = new Share(null, source);\n  return (sink) => {\n    sink.defer([share.remove, share, sink]);\n    share.add(sink);\n  };\n};\nexport const shareReplay = (bufferSize) => (source) => {\n  const share = new Share(null, source);\n  const buffer = [];\n  share.next = function (data) {\n    buffer.push(data);\n    if (buffer.length > bufferSize) {\n      buffer.shift();\n    }\n    this.sinks.forEach((s) => s.next(data));\n  };\n  return (sink) => {\n    sink.defer([share.remove, share, sink]);\n    buffer.forEach((cache) => sink.next(cache));\n    share.add(sink);\n  };\n};\nexport const iif = (condition, trueS, falseS) => (sink) => condition() ? trueS(sink) : falseS(sink);\nclass Race extends Sink {\n  init(nLife) {\n    this.nLife = nLife;\n  }\n  next(data) {\n    this.defer();\n    this.sink.next(data);\n    super.complete();\n  }\n  complete(err) {\n    if (--this.nLife === 0) super.complete(err);\n  }\n}\nexport const race =\n  (...sources) =>\n  (sink) =>\n    new Race(sink, sources.length).subscribes(sources);\nclass Concat extends Sink {\n  init(sources) {\n    this.sources = sources;\n    this.pos = 0;\n    this.len = sources.length;\n  }\n  complete(err) {\n    if (err) {\n      super.complete(err);\n      return;\n    }\n    if (this.pos < this.len && !this.disposed) this.sources[this.pos++](this);\n    else super.complete();\n  }\n}\nexport const concat =\n  (...sources) =>\n  (sink) =>\n    new Concat(sink, sources).complete();\n\nclass Merge extends Sink {\n  init(nLife) {\n    this.nLife = nLife;\n  }\n  complete() {\n    if (--this.nLife === 0) super.complete();\n  }\n}\nexport const mergeArray = (sources) => (sink) =>\n  new Merge(sink, sources.length).subscribes(sources);\nexport const merge =\n  (...sources) =>\n  (sink) =>\n    new Merge(sink, sources.length).subscribes(sources);\nclass CombineLatest extends Sink {\n  init(index, array, context) {\n    this.index = index;\n    this.context = context;\n    this.state = 0;\n    this.array = array;\n  }\n  next(data) {\n    switch (this.state) {\n      case 0:\n        ++this.context.nRun;\n        this.state = 1;\n      case 1:\n        if (this.context.nRun === this.context.nTotal) {\n          this.state = 2;\n        } else {\n          this.array[this.index] = data;\n          break;\n        }\n      case 2:\n        this.array[this.index] = data;\n        this.sink.next(this.array);\n        break;\n    }\n  }\n  complete(err) {\n    if (err || --this.context.nLife === 0) super.complete(err);\n  }\n}\nexport const combineLatest =\n  (...sources) =>\n  (sink) => {\n    const nTotal = sources.length;\n    const context = {\n      nTotal,\n      nLife: nTotal,\n      nRun: 0,\n    };\n    const array = new Array(nTotal);\n    // const defers = new Array(nTotal)\n    // for (let i = 0; i < nTotal; ++i) defers[i] = sources[i](new CombineLatest(sink, i, array, context))\n    sources.forEach((source, i) => source(new CombineLatest(sink, i, array, context)));\n  };\nclass WithLatestFrom extends Sink {\n  init(...sources) {\n    this._withLatestFrom = new Sink(this.sink);\n    this._withLatestFrom.next = (data) => (this.buffer = data);\n    this._withLatestFrom.complete = noop;\n    combineLatest(...sources)(this._withLatestFrom);\n  }\n  next(data) {\n    if (this.buffer) {\n      this.sink.next([data].concat(this.buffer));\n    }\n  }\n  complete(err) {\n    this._withLatestFrom.dispose();\n    super.complete(err);\n  }\n}\nexport const withLatestFrom = deliver(WithLatestFrom);\nclass Zip extends Sink {\n  init(index, array, context) {\n    this.index = index;\n    this.context = context;\n    this.array = array;\n    this.buffer = [];\n    array[index] = this.buffer;\n  }\n  next(data) {\n    this.buffer.push(data);\n    if (this.array.every((x) => x.length)) {\n      this.sink.next(this.array.map((x) => x.shift()));\n    }\n  }\n  complete(err) {\n    if (err || --this.context.nLife === 0) super.complete(err);\n  }\n}\nexport const zip =\n  (...sources) =>\n  (sink) => {\n    const nTotal = sources.length;\n    const context = {\n      nTotal,\n      nLife: nTotal,\n    };\n    const array = new Array(nTotal);\n    sources.forEach((source, i) => source(new Zip(sink, i, array, context)));\n  };\n\nexport const startWith =\n  (...xs) =>\n  (inputSource) =>\n  (sink, pos = 0, l = xs.length) => {\n    while (pos < l) {\n      if (sink.disposed) return;\n      sink.next(xs[pos++]);\n    }\n    sink.disposed || inputSource(sink);\n  };\n\nclass BufferCount extends Sink {\n  init(bufferSize, startBufferEvery) {\n    this.bufferSize = bufferSize;\n    this.startBufferEvery = startBufferEvery;\n    this.buffer = [];\n    if (startBufferEvery) {\n      this.buffers = [[]];\n      this.count = 0;\n    }\n  }\n  next(data) {\n    if (this.startBufferEvery) {\n      if (this.count++ === this.startBufferEvery) {\n        this.buffers.push([]);\n        this.count = 1;\n      }\n      this.buffers.forEach((buffer) => {\n        buffer.push(data);\n      });\n      if (this.buffers[0].length === this.bufferSize) {\n        this.sink.next(this.buffers.shift());\n      }\n    } else {\n      this.buffer.push(data);\n      if (this.buffer.length === this.bufferSize) {\n        this.sink.next(this.buffer);\n        this.buffer = [];\n      }\n    }\n  }\n  complete(err) {\n    if (!err) {\n      if (this.buffer.length) {\n        this.sink.next(this.buffer);\n      } else if (this.buffers.size) {\n        this.buffers.forEach((buffer) => this.sink.next(buffer));\n      }\n    }\n    super.complete(err);\n  }\n}\n\nexport const bufferCount = deliver(BufferCount);\n\nclass ConcatAll extends Sink {\n  init() {\n    this.sources = [];\n    this.running = false;\n  }\n  sub(data) {\n    const s = new Sink(this.sink);\n    this.running = true;\n    s.complete = (err) => {\n      this.running = false;\n      if (err) {\n        s.dispose(true);\n        super.complete(err);\n      } else {\n        s.dispose(false);\n        if (this.sources.length) {\n          this.sub(this.sources.shift());\n        } else if (this.disposed) {\n          super.complete();\n        }\n      }\n    };\n    data(s);\n  }\n  next(data) {\n    if (!this.running) {\n      this.sub(data);\n    } else {\n      this.sources.push(data);\n    }\n  }\n  complete(err) {\n    if (err) {\n      if (!this.running) super.complete(err);\n    } else if (this.running) this.dispose(false);\n    else super.complete();\n  }\n}\n\nexport const concatAll = deliver(ConcatAll);\n","import { Sink } from './common';\nclass Reduce extends Sink {\n  init(hasSeed, f, seed) {\n    this.f = f;\n    this.aac = seed;\n    if (!hasSeed) {\n      this.next = (d) => {\n        delete this.next;\n        this.aac = d;\n      };\n    }\n  }\n  next(data) {\n    const f = this.f;\n    this.aac = f(this.aac, data);\n  }\n  complete(err) {\n    err || this.sink.next(this.aac);\n    super.complete(err);\n  }\n}\nexport const reduce =\n  (...args) =>\n  (source) =>\n  (sink) =>\n    source(new Reduce(sink, args.length === 2, ...args));\nexport const count = (f) => reduce((aac, c) => (f(c) ? aac + 1 : aac), 0);\nexport const max = () => reduce(Math.max);\nexport const min = () => reduce(Math.min);\nexport const sum = () => reduce((aac, c) => aac + c, 0);\n","import { Sink } from './common';\n\nfunction compose(g, f) {\n  return (x) => g(f(x));\n}\n\nfunction and(a, b) {\n  return (x) => a(x) && b(x);\n}\nexport class Filter extends Sink {\n  init(f) {\n    this.f = f;\n  }\n  next(data) {\n    const f = this.f;\n    f(data) && this.sink.next(data);\n  }\n  fusionFilter(f) {\n    this.f = and(f, this.f);\n    return this;\n    // return new Filter(this.sink, this.and(f, this.f))\n  }\n}\nclass FilterMapSink extends Sink {\n  init(f, m) {\n    this.f = f;\n    this.m = m;\n  }\n  next(data) {\n    const f = this.f;\n    const m = this.m;\n    f(data) && this.sink.next(m(data));\n  }\n  fusionFilter(f) {\n    this.f = and(f, this.f);\n    return this;\n    // return new Filter(this, f)\n  }\n}\nexport class MapSink extends Sink {\n  init(f) {\n    this.f = f;\n  }\n  next(data) {\n    const f = this.f;\n    this.sink.next(f(data));\n  }\n  fusionFilter(f) {\n    this.disposePass = false;\n    this.dispose(false);\n    return new FilterMapSink(this.sink, f, this.f);\n  }\n  fusionMap(f) {\n    this.f = compose(this.f, f);\n    return this;\n    // return new MapSink(this.sink, this.compose(this.f, f))\n  }\n}\n","import { Sink, deliver, noop } from './common';\nimport { reduce } from './mathematical';\nimport { Filter } from './fusion';\nexport const filter = (f) => (source) => (sink) =>\n  source(sink.fusionFilter ? sink.fusionFilter(f) : new Filter(sink, f));\n\nclass Ignore extends Sink {\n  next() {}\n}\nexport const ignoreElements = (source) => (sink) => source(new Ignore(sink));\n\nclass Take extends Sink {\n  init(count) {\n    this.count = count;\n  }\n  next(data) {\n    this.sink.next(data);\n    if (--this.count === 0) {\n      this.defer();\n      this.complete();\n    }\n  }\n}\nexport const take = deliver(Take);\n\nclass TakeUntil extends Sink {\n  init(sSrc) {\n    this._takeUntil = new Sink(this.sink);\n    this._takeUntil.next = () => {\n      this.defer();\n      this.complete();\n    };\n    this._takeUntil.complete = noop;\n    sSrc(this._takeUntil);\n  }\n  complete(err) {\n    //完成事件，单方面终结开关sink\n    this._takeUntil.dispose();\n    super.complete(err);\n  }\n}\n\nexport const takeUntil = deliver(TakeUntil);\n\nclass TakeWhile extends Sink {\n  init(f) {\n    this.f = f;\n  }\n  next(data) {\n    const f = this.f;\n    if (f(data)) {\n      this.sink.next(data);\n    } else {\n      this.defer();\n      this.complete();\n    }\n  }\n}\nexport const takeWhile = deliver(TakeWhile);\n\nexport const takeLast = (count) =>\n  reduce((buffer, d) => {\n    buffer.push(d);\n    if (buffer.length > count) buffer.shift();\n    return buffer;\n  }, []);\n\nclass Skip extends Sink {\n  init(count) {\n    this.count = count;\n  }\n  next() {\n    if (--this.count === 0) {\n      this.next = super.next;\n    }\n  }\n}\nexport const skip = deliver(Skip);\n\nclass _SkipUntil extends Sink {\n  next() {\n    this.dispose();\n    delete this.sourceSink.next;\n  }\n  init(sourceSink) {\n    this.sourceSink = sourceSink;\n  }\n}\n\nclass SkipUntil extends Sink {\n  init(sSrc) {\n    this._skipUntil = new _SkipUntil(null, this).subscribe(sSrc);\n    this.defer(this._skipUntil);\n    this.next = noop;\n  }\n  complete(err) {\n    this._skipUntil.dispose();\n    super.complete(err);\n  }\n}\nexport const skipUntil = deliver(SkipUntil);\n\nclass SkipWhile extends Sink {\n  init(f) {\n    this.f = f;\n  }\n  next(data) {\n    const f = this.f;\n    if (!f(data)) {\n      this.next = super.next;\n      this.next(data);\n    }\n  }\n}\nexport const skipWhile = deliver(SkipWhile);\n\nconst defaultThrottleConfig = {\n  leading: true,\n  trailing: false,\n};\nclass _Throttle extends Sink {\n  init(durationSelector, trailing) {\n    this.durationSelector = durationSelector;\n    this.trailing = trailing;\n    this.hasValue = true;\n    this.isComplete = false;\n  }\n  send(data) {\n    if (this.hasValue) {\n      this.sink.next(data);\n      this.isComplete = false;\n      this.durationSelector(data)(this);\n    }\n    this.hasValue = false;\n  }\n  next() {\n    this.complete();\n  }\n  complete() {\n    this.defer();\n    this.isComplete = true;\n    if (this.trailing) {\n      this.send(this.last);\n    }\n  }\n}\nclass Throttle extends Sink {\n  init(durationSelector, config = defaultThrottleConfig) {\n    this.durationSelector = durationSelector;\n    this.leading = config.leading;\n    this.trailing = config.trailing;\n    this.hasValue = false;\n  }\n\n  throttle(data) {\n    this._throttle.isComplete = false;\n    this._throttle.last = data;\n    this._throttle.hasValue = true;\n    this.durationSelector(data)(this._throttle);\n  }\n  next(data) {\n    if (!this._throttle || this._throttle.isComplete) {\n      if (!this._throttle) {\n        this._throttle = new _Throttle(this.sink, this.durationSelector, this.trailing);\n        this.defer(this._throttle);\n      }\n\n      if (this.leading) {\n        this.sink.next(data);\n        this.throttle(data);\n        this._throttle.hasValue = false;\n      } else {\n        this.throttle(data);\n      }\n    } else {\n      this._throttle.last = data;\n      this._throttle.hasValue = true;\n    }\n  }\n  complete(err) {\n    if (err) {\n      this._throttle && this._throttle.dispose();\n      super.complete(err);\n    } else {\n      this._throttle && this._throttle.complete();\n      super.complete();\n    }\n  }\n}\nexport const throttle = deliver(Throttle);\nconst defaultAuditConfig = {\n  leading: false,\n  trailing: true,\n};\nexport const audit = (durationSelector) => throttle(durationSelector, defaultAuditConfig);\nclass ThrottleTime extends Sink {\n  init(period, config = defaultThrottleConfig) {\n    this.config = config;\n    this.period = period;\n    this.timerId = null;\n  }\n  next(data) {\n    if (this.timerId) {\n      this.last = data;\n      this.hasValue = true;\n    } else {\n      this.timerId = setTimeout(() => {\n        this.timerId = null;\n        if (this.config.trailing && this.hasValue) {\n          this.sink.next(this.last);\n        }\n      }, this.period);\n      if (this.config.leading) {\n        this.sink.next(data);\n      } else {\n        this.last = data;\n        this.hasValue = true;\n      }\n    }\n  }\n  complete(err) {\n    if (!err) {\n      if (this.config.trailing && this.hasValue) {\n        this.sink.next(this.last);\n      }\n    }\n    super.complete(err);\n  }\n}\nexport const throttleTime = deliver(ThrottleTime);\nclass DebounceTime extends Sink {\n  init(period) {\n    this.period = period;\n    this.timerId = null;\n  }\n  next(data) {\n    this.buffer = data;\n    if (this.timerId) {\n      clearTimeout(this.timerId);\n    }\n    this.timerId = setTimeout(() => {\n      this.sink.next(data);\n      this.timerId = null;\n    }, this.period);\n  }\n  complete(error) {\n    if (this.timerId) {\n      clearTimeout(this.timerId);\n      if (!error && this.hasOwnProperty('buffer')) {\n        this.sink.next(this.buffer);\n      }\n    }\n    super.complete(error);\n  }\n}\n\nexport const debounceTime = deliver(DebounceTime);\n\nclass _Debounce extends Sink {\n  next() {\n    this.complete();\n  }\n  complete(err) {\n    this.defer();\n    this.sink.next(this.last);\n    this.isComplete = true;\n  }\n}\nclass Debounce extends Sink {\n  init(durationSelector) {\n    this.durationSelector = durationSelector;\n  }\n  next(data) {\n    if (!this._debounce) {\n      this._debounce = new _Debounce(this.sink);\n      this.defer(this._debounce);\n    } else if (this._debounce.isComplete) {\n      this._debounce.isComplete = false;\n    } else {\n      this._debounce.defer();\n    }\n    this.durationSelector(data)(this._debounce);\n    this._debounce.last = data;\n  }\n  complete(err) {\n    if (err) {\n      this._debounce && this._debounce.dispose();\n      super.complete(err);\n    } else {\n      this._debounce && this._debounce.complete();\n      super.complete();\n    }\n  }\n}\n\nexport const debounce = deliver(Debounce);\nclass ElementAt extends Sink {\n  init(count, defaultValue) {\n    this.count = count;\n    this.value = defaultValue;\n  }\n  next(data) {\n    if (this.count-- === 0) {\n      this.sink.next(data);\n      this.defer();\n      super.complete();\n    }\n  }\n  complete(err) {\n    if (!err) {\n      if (this.value === void 0) err = new Error('not enough elements in sequence');\n      else this.sink.next(this.value);\n    }\n    super.complete(err);\n  }\n}\n\nexport const elementAt = deliver(ElementAt);\nexport const find = (f) => (source) => take(1)(skipWhile((d) => !f(d))(source));\n\nclass FindIndex extends Sink {\n  init(f) {\n    this.f = f;\n    this.i = 0;\n  }\n  next(data) {\n    const f = this.f;\n    if (f(data)) {\n      this.sink.next(this.i++);\n      this.defer();\n      this.complete();\n    } else {\n      ++this.i;\n    }\n  }\n}\n\nexport const findIndex = deliver(FindIndex);\n\nclass First extends Sink {\n  init(f, defaultValue) {\n    this.f = f;\n    this.value = defaultValue;\n    this.count = 0;\n  }\n  next(data) {\n    const f = this.f;\n    if (!f || f(data, this.count++)) {\n      this.value = data;\n      this.defer();\n      this.complete();\n    }\n  }\n  complete(err) {\n    if (!err) {\n      if (this.value === void 0) err = new Error('no elements in sequence');\n      else this.sink.next(this.value);\n    }\n    super.complete(err);\n  }\n}\n\nexport const first = deliver(First);\n\nclass Last extends Sink {\n  init(f, defaultValue) {\n    this.f = f;\n    this.value = defaultValue;\n    this.count = 0;\n  }\n  next(data) {\n    const f = this.f;\n    if (!f || f(data, this.count++)) {\n      this.value = data;\n    }\n  }\n  complete(err) {\n    if (!err) {\n      if (this.value === void 0) err = new Error('no elements in sequence');\n      else this.sink.next(this.value);\n    }\n    super.complete(err);\n  }\n}\n\nexport const last = deliver(Last);\n\nclass Every extends Sink {\n  init(f) {\n    this.f = f;\n    this.ret = void 0;\n  }\n  next(data) {\n    const f = this.f;\n    if (!f(data)) {\n      this.ret = false;\n      this.defer();\n      this.complete();\n    } else {\n      this.ret = true;\n    }\n  }\n  complete(err) {\n    if (!err) {\n      if (this.ret === void 0) err = new Error('no elements in sequence');\n      else this.sink.next(true);\n    }\n    super.complete(err);\n  }\n}\n\nexport const every = deliver(Every);\n","import { noop } from './common';\nimport { share } from './combination';\nexport const subject = (source) => {\n  let subSink = null;\n  const observable = share()((sink) => {\n    subSink = sink;\n    source && source(subSink);\n  });\n  observable.next = (d) => subSink && subSink.next(d);\n  observable.complete = () => subSink && subSink.complete();\n  observable.error = (err) => subSink && subSink.complete(err);\n  return observable;\n};\n\nexport const fromArray = (array) => (sink) => {\n  let pos = 0;\n  const l = array.length;\n  while (pos < l && !sink.disposed) sink.next(array[pos++]);\n  sink.complete();\n};\nexport const of = (...items) => fromArray(items);\nexport const interval = (period) => (sink) => {\n  let i = 0;\n  sink.defer([clearInterval, , setInterval(() => sink.next(i++), period)]);\n};\nexport const timer = (delay, period) => (sink) => {\n  const defer = [\n    clearTimeout,\n    ,\n    setTimeout(() => {\n      if (period) {\n        defer[0] = clearInterval;\n        let i = 0;\n        defer[2] = setInterval(() => sink.next(i++), period);\n      } else {\n        sink.next(0);\n        sink.complete();\n      }\n    }, delay),\n  ];\n  sink.defer(defer);\n};\nexport const fromAnimationFrame = () => (sink) => {\n  function next(t) {\n    sink.next(t);\n    defer[2] = requestAnimationFrame(next);\n  }\n  const defer = [cancelAnimationFrame, , requestAnimationFrame(next)];\n  sink.defer(defer);\n};\nexport const fromEventPattern = (add, remove) => (sink) => {\n  const n = (d) => sink.next(d);\n  sink.defer([remove, , n]);\n  add(n);\n};\nexport const fromEvent = (target, name) => {\n  const addF = ['on', 'addEventListener', 'addListener'].find(\n    (x) => typeof target[x] == 'function'\n  );\n  const removeF = ['off', 'removeEventListener', 'removeListener'].find(\n    (x) => typeof target[x] == 'function'\n  );\n  if (addF && removeF)\n    return fromEventPattern(\n      (handler) => target[addF](name, handler),\n      (handler) => target[removeF](name, handler)\n    );\n  else throw 'target is not a EventDispachter';\n};\nexport const fromVueEvent = (vm, name) => (sink) => {\n  const ls = (e) => sink.next(e);\n  vm.$on(name, ls);\n  sink.defer([vm.$off, vm, ls]);\n};\nexport const fromVueEventOnce = (vm, name) => (sink) => vm.$once(name, (e) => sink.next(e));\n\nexport const fromEventSource = (src, arg) => (sink) => {\n  if (typeof EventSource == 'undefined') {\n    return sink.complete(new Error('No EventSource defined!'));\n  }\n  const evtSource = new EventSource(src, arg);\n  evtSource.onerror = (err) => sink.complete(err);\n  evtSource.onmessage = (evt) => sink.next(evt.data);\n  sink.defer([evtSource.close, evtSource]);\n};\nexport const fromFetch = (url, opt) => (sink) => {\n  fetch(url, opt)\n    .then((res) => {\n      sink.next(res);\n      sink.complete();\n    })\n    .catch((err) => sink.complete(err));\n};\nexport const fromNextTick = (vm) => (sink) => {\n  vm.$nextTick(() => {\n    sink.next(vm);\n    sink.complete();\n  });\n};\nexport const range =\n  (start, count) =>\n  (sink, pos = start, end = count + start) => {\n    while (pos < end && !sink.disposed) sink.next(pos++);\n    sink.complete();\n  };\n\nexport const fromPromise = (source) => (sink) => {\n  source.then((d) => (sink.next(d), sink.complete())).catch((e) => sink.complete(e));\n};\n\nexport const fromIterable = (source) => (sink) => {\n  try {\n    for (let data of source) {\n      sink.next(data);\n      if (sink.disposed) return;\n    }\n    sink.complete();\n  } catch (err) {\n    sink.complete(err);\n  }\n};\nexport const from = (source) => {\n  switch (true) {\n    case source instanceof Array:\n      return fromArray(source);\n    case source instanceof Promise:\n      return fromPromise(source);\n    case source[Symbol.iterator] && typeof source[Symbol.iterator] === 'function':\n      return fromIterable(source);\n    default:\n      return of(source);\n  }\n};\nexport const bindCallback =\n  (call, thisArg, ...args) =>\n  (sink) => {\n    const inArgs = args.concat(\n      (...rargs) => (sink.next(rargs.length > 1 ? rargs : rargs[0]), sink.complete())\n    );\n    call.apply ? call.apply(thisArg, inArgs) : call(...inArgs);\n  };\nexport const bindNodeCallback =\n  (call, thisArg, ...args) =>\n  (sink) => {\n    const inArgs = args.concat((err, ...rargs) =>\n      err ? sink.complete(err) : (sink.next(rargs.length > 1 ? rargs : rargs[0]), sink.complete())\n    );\n    call.apply ? call.apply(thisArg, inArgs) : call(...inArgs);\n  };\nexport const never = () => noop;\nexport const throwError = (e) => (sink) => sink.complete(e);\nexport const empty = () => throwError();\n","import { Sink, deliver } from './common';\nimport { MapSink } from './fusion';\nclass Scan extends Sink {\n  init(hasSeed, f, seed) {\n    this.f = f;\n    this.aac = seed;\n    if (!hasSeed) {\n      this.next = (d) => {\n        delete this.next;\n        this.sink.next((this.aac = d));\n      };\n    }\n  }\n  next(data) {\n    const f = this.f;\n    this.aac = f(this.aac, data);\n    this.sink.next(this.aac);\n  }\n}\nexport const scan =\n  (...args) =>\n  (source) =>\n  (sink) =>\n    source(new Scan(sink, args.length == 2, ...args));\n\nexport const map = (f) => (source) => (sink) =>\n  source(sink.fusionMap ? sink.fusionMap(f) : new MapSink(sink, f));\nexport const mapTo = (target) => map((x) => target);\nexport const pluck = (s) => map((d) => d[s]);\n\nclass Pairwise extends Sink {\n  init() {\n    this.hasLast = false;\n  }\n  next(data) {\n    if (this.hasLast) {\n      this.sink.next([this.last, data]);\n    } else {\n      this.hasLast = true;\n    }\n    this.last = data;\n  }\n}\nexport const pairwise = deliver(Pairwise);\n\nclass Repeat extends Sink {\n  init(count) {\n    this.buffer = [];\n    this.count = count;\n  }\n  next(data) {\n    this.buffer.push(data);\n    this.sink.next(data);\n  }\n  complete(err) {\n    if (err) super.complete(err);\n    else {\n      while (this.count--) {\n        for (let i = 0, l = this.buffer.length; i < l; this.sink.next(this.buffer[i++])) {\n          if (this.disposed) return;\n        }\n      }\n      super.complete();\n    }\n  }\n}\n\nexport const repeat = deliver(Repeat);\nclass _SwitchMap extends Sink {\n  init(data, context) {\n    this.data = data;\n    this.context = context;\n  }\n  next(data) {\n    const combineResults = this.context.combineResults;\n    if (combineResults) {\n      this.sink.next(combineResults(this.data, data));\n    } else {\n      this.sink.next(data);\n    }\n  }\n  complete(err) {\n    if (this.context.disposed) super.complete(err);\n    else this.dispose(false);\n  }\n}\nclass SwitchMap extends Sink {\n  init(makeSource, combineResults) {\n    this.makeSource = makeSource;\n    this.combineResults = combineResults;\n    this.index = 0;\n  }\n  next(data) {\n    const makeSource = this.makeSource;\n    if (this.switch) {\n      this.switch.disposePass = false;\n      this.switch.dispose();\n    }\n    this.switch = new _SwitchMap(this.sink, data, this);\n    makeSource(data, this.index++)(this.switch);\n  }\n  complete(err) {\n    if (!this.switch || this.switch.disposed) super.complete(err);\n    else this.dispose(false);\n  }\n}\n\nexport const switchMap = deliver(SwitchMap);\n\nexport const switchMapTo = (innerSource, combineResults) =>\n  switchMap((d) => innerSource, combineResults);\nclass _MergeMap extends Sink {\n  init(data, context) {\n    this.data = data;\n    this.context = context;\n  }\n  next(data) {\n    const combineResults = this.context.combineResults;\n    if (combineResults) {\n      this.sink.next(combineResults(this.data, data));\n    } else {\n      this.sink.next(data);\n    }\n  }\n  complete(err) {\n    this.context.subDisposed++;\n    if (this.context.subDisposed == this.context.count && this.context.disposed)\n      super.complete(err);\n    else this.dispose(false);\n  }\n}\nclass MergeMap extends Sink {\n  init(makeSource, combineResults) {\n    this.makeSource = makeSource;\n    this.combineResults = combineResults;\n    this.subDisposed = 0;\n    this.count = 0;\n  }\n  next(data) {\n    const makeSource = this.makeSource;\n    makeSource(data, this.count++)(new _MergeMap(this.sink, data, this));\n  }\n  complete(err) {\n    if (this.subDisposed === this.count) super.complete(err);\n    else this.dispose(false);\n  }\n}\nexport const mergeMap = deliver(MergeMap);\nexport const mergeMapTo = (innerSource, combineResults) =>\n  mergeMap((d) => innerSource, combineResults);\nclass BufferTime extends Sink {\n  init(miniseconds) {\n    this.buffer = [];\n    this.id = setInterval(() => {\n      this.sink.next(this.buffer.concat());\n      this.buffer.length = 0;\n    }, miniseconds);\n    this.defer([clearInterval, , this.id]);\n  }\n  next(data) {\n    this.buffer.push(data);\n  }\n  complete(err) {\n    clearInterval(this.id);\n    if (!err) this.sink.next(this.buffer);\n    super.complete(err);\n  }\n}\n\nexport const bufferTime = deliver(BufferTime);\n\nclass TimeInterval extends Sink {\n  init() {\n    this.start = new Date();\n  }\n  next(value) {\n    this.sink.next({ value, interval: new Date() - this.start });\n    this.start = new Date();\n  }\n}\nexport const timeInterval = deliver(TimeInterval);\n","/* eslint-disable require-jsdoc */\nimport { Sink, deliver, noop } from './common';\nexport * from './common';\nexport const pipe = (first, ...cbs) => cbs.reduce((aac, c) => c(aac), first);\nclass Reuse {\n  constructor(subscribe, ...args) {\n    this.subscribe = subscribe;\n    this.source = pipe(...args);\n  }\n  start() {\n    this.subscriber = this.subscribe(this.source);\n  }\n  stop() {\n    this.subscriber && this.subscriber.dispose();\n  }\n}\n\n// //在pipe的基础上增加了start和stop方法，方便反复调用\nexport const reusePipe = (...args) => new Reuse(...args);\n\nexport const toPromise = () => (source) =>\n  new Promise((resolve, reject) => {\n    const sink = new Sink();\n    sink.next = (d) => (sink.value = d);\n    sink.complete = (err) => (err ? reject(err) : resolve(sink.value));\n    source(sink);\n  });\n\n// //SUBSCRIBER\nexport const subscribe =\n  (n = noop, e = noop, c = noop) =>\n  (source) => {\n    const sink = new Sink();\n    sink.next = n;\n    sink.complete = (err) => (err ? e(err) : c());\n    sink.then = noop;\n    source(sink);\n    return sink;\n  };\n// // UTILITY\nclass Tap extends Sink {\n  init(f) {\n    this.f = f;\n  }\n  next(data) {\n    const f = this.f;\n    f(data);\n    this.sink.next(data);\n  }\n}\n\nexport const tap = deliver(Tap);\n\nclass Delay extends Sink {\n  init(delay) {\n    this.delayTime = delay;\n    this.buffer = [];\n    // eslint-disable-next-line no-sparse-arrays\n    this.timeoutId = [clearTimeout, ,];\n    this.defer(this.timeoutId);\n  }\n  delay(delay) {\n    this.timeoutId[2] = setTimeout(this.pop, delay, this);\n  }\n  pop(_this) {\n    const { time: lastTime, data } = _this.buffer.shift();\n    _this.sink.next(data);\n    if (_this.buffer.length) {\n      _this.delay(_this.buffer[0].time - lastTime);\n    }\n  }\n  next(data) {\n    if (!this.buffer.length) {\n      this.delay(this.delayTime);\n    }\n    this.buffer.push({ time: new Date(), data });\n  }\n  complete(err) {\n    if (err) this.sink.complete(err);\n    else {\n      this.timeoutId[2] = setTimeout(() => this.sink.complete(), this.delayTime);\n    }\n  }\n}\nexport const delay = deliver(Delay);\nclass CatchError extends Sink {\n  init(selector) {\n    this.selector = selector;\n  }\n  complete(err) {\n    if (err) {\n      this.selector(err)(this.sink);\n    } else {\n      super.complete();\n    }\n  }\n}\n\nexport const catchError = deliver(CatchError);\nexport * from './combination';\nexport * from './filtering';\nexport * from './mathematical';\nexport * from './producer';\nexport * from './transformation';\nimport { subject } from './producer';\nclass GroupBy extends Sink {\n  init(f) {\n    this.f = f;\n    this.groups = new Map();\n  }\n  next(data) {\n    const key = this.f(data);\n    let group = this.groups.get(key);\n    if (!group) {\n      group = subject();\n      group.key = key;\n      this.groups.set(key, group);\n      this.sink.next(group);\n    }\n    group.next(data);\n  }\n  complete(err) {\n    this.groups.forEach((group) => group.complete(err));\n    super.complete(err);\n  }\n}\nexport const groupBy = deliver(GroupBy);\n\nexport const Events = {\n  addSource: noop,\n  subscribe: noop,\n  next: noop,\n  complete: noop,\n  defer: noop,\n  pipe: noop,\n  update: noop,\n  create: noop,\n};\nfunction send(event, payload) {\n  window.postMessage({ source: 'fastrx-devtools-backend', payload: { event, payload } });\n}\nEvents.create = (who) => {\n  send('create', { name: who.toString(), id: who.id });\n};\nEvents.next = (who, streamId, data) => {\n  send('next', { id: who.id, streamId, data: data && data.toString() });\n};\nEvents.complete = (who, streamId, err) => {\n  send('complete', { id: who.id, streamId, err: err ? err.toString() : null });\n};\nEvents.defer = (who, streamId) => {\n  send('defer', { id: who.id, streamId });\n};\nEvents.addSource = (who, source) => {\n  send('addSource', {\n    id: who.id,\n    name: who.toString(),\n    source: { id: source.id, name: source.toString() },\n  });\n};\nEvents.pipe = (who) => {\n  send('pipe', {\n    name: who.toString(),\n    id: who.id,\n    source: { id: who.source.id, name: who.source.toString() },\n  });\n};\nEvents.update = (who) => {\n  send('update', { id: who.id, name: who.toString() });\n};\nEvents.subscribe = ({ id, end }, sink) => {\n  send('subscribe', {\n    id,\n    end,\n    sink: { nodeId: sink && sink.nodeId, streamId: sink && sink.streamId },\n  });\n};\n","import * as fastrx from './pipe';\nconst { Events, Sink } = fastrx;\nlet COUNT = 0;\nexport class Node {\n  constructor(name = '', arg = []) {\n    this.name = name;\n    this.arg = arg;\n    this.source = null;\n    this.id = COUNT++;\n    switch (name) {\n      case 'subscribe':\n      case 'toPromise':\n      case 'toRef':\n        this.end = true;\n        break;\n      default:\n        this.end = false;\n    }\n    Events.create(this);\n    if (arg.length) {\n      this.args = arg;\n    }\n  }\n  toString() {\n    return `${typeof this.name == 'string' ? this.name : this.name.name}(${this.arg\n      .map((x) =>\n        typeof x == 'object' || typeof x == 'function'\n          ? (typeof x.name == 'function' ? x.name.name : x.name) || '...'\n          : x\n      )\n      .join(',')})`;\n  }\n  get unProxy() {\n    return this;\n  }\n  //是否属于子流\n  checkSubNode(x) {\n    if (typeof x == 'function') {\n      const isNode = x.unProxy;\n      return isNode\n        ? (Events.addSource(this, isNode),\n          (s) => {\n            s.nodeId = this.id;\n            s.streamId = 0;\n            isNode.subscribe(s);\n          })\n        : (...arg) => this.checkSubNode(x(...arg));\n    }\n    return x;\n  }\n  //过滤子事件流，放入sources数组中，就能显示\n  set args(value) {\n    this.arg = value.map((x) => this.checkSubNode(x));\n  }\n  // 通过返回proxy产生链式调用\n  pipe() {\n    if (this.end) {\n      return this.subscribe();\n    }\n    const target = this;\n    return new Proxy((sink) => this.subscribe(sink), {\n      get(_, prop) {\n        if (prop != 'subscribe' && (target[prop] || target.hasOwnProperty(prop)))\n          return target[prop];\n        if (prop == 'subscribe' && target.subscribeSink) return target.subscribeSink;\n        const sink = target.createSink(prop);\n        return (target.subscribeSink = (...args) => {\n          sink.args = args;\n          Events.update(sink);\n          return sink.pipe();\n        });\n      },\n    });\n  }\n  createSink(name) {\n    const sink = new Node(name);\n    sink.source = this;\n    Events.pipe(sink);\n    return sink;\n  }\n  subscribe(sink) {\n    const { source, name, arg } = this;\n    const realrx = typeof name == 'string' ? fastrx[name](...arg) : name;\n    let f =\n      source && !this.end\n        ? realrx((s) => {\n            s.streamId = streamCount - 1;\n            s.nodeId = this.id;\n            source.subscribe(s);\n          })\n        : realrx;\n    let streamCount = 0;\n    this.subscribe = function (sink) {\n      const streamId = streamCount++;\n      if (this.end) {\n        return f((s) => {\n          const oNext = s.next;\n          const oComplete = s.complete;\n          s.next = (data) => {\n            Events.next(this, streamId, data);\n            oNext(data);\n          };\n          s.complete = (err) => {\n            Events.complete(this, streamId, err);\n            oComplete(err);\n          };\n          s.streamId = streamId;\n          s.nodeId = this.id;\n          Events.subscribe(this);\n          source.subscribe(s);\n        });\n      }\n\n      const newSink = new Sink(sink);\n      newSink.next = (data) => {\n        Events.next(this, streamId, data);\n        sink.next(data);\n      };\n      newSink.complete = (err) => {\n        Events.complete(this, streamId, err);\n        sink.complete(err);\n      };\n      newSink.defer(() => {\n        Events.defer(this, streamId);\n      });\n      Events.subscribe(this, sink);\n      f(newSink);\n      return newSink;\n    };\n    return this.subscribe(sink);\n  }\n}\n","import * as _observables from './pipe';\n\nimport { Node } from './devtools';\n\nconst { Sink, pipe, reusePipe, Events, deliver, noop, ...observables } = _observables;\nclass GroupBy extends Sink {\n  init(f) {\n    this.f = f;\n    this.groups = new Map();\n  }\n  next(data) {\n    const key = this.f(data);\n    let group = this.groups.get(key);\n    if (!group) {\n      group = rx.subject();\n      group.key = key;\n      this.groups.set(key, group);\n      this.sink.next(group);\n    }\n    group.next(data);\n  }\n  complete(err) {\n    this.groups.forEach((group) => group.complete(err));\n    super.complete(err);\n  }\n}\nobservables.groupBy = deliver(GroupBy);\n\nfunction inspect() {\n  return typeof window != 'undefined' && window.__FASTRX_DEVTOOLS__;\n}\nfunction createRx() {\n  if (typeof Proxy == 'undefined') {\n    const prototype = {};\n    //将一个Observable函数的原型修改为具有所有operator的方法\n    const rx = (f) => Object.setPrototypeOf(f, prototype);\n    //提供动态添加Obserable以及operator的方法\n    rx.set = (ext) => {\n      for (let key in ext) {\n        const f = ext[key];\n        switch (key) {\n          case 'subscribe':\n            prototype[key] = function (...args) {\n              return f(...args)(this);\n            };\n            break;\n          case 'toPromise':\n            prototype[key] = function () {\n              return f(this);\n            };\n            break;\n          default:\n            prototype[key] = function (...args) {\n              return rx(f(...args)(this));\n            };\n            rx[key] = (...args) => rx(f(...args));\n        }\n      }\n    };\n    rx.set(observables);\n    return rx;\n  } else {\n    const rxProxy = {\n      get: (target, prop) =>\n        prop in target\n          ? target[prop]\n          : (...args) => new Proxy(observables[prop](...args)(target), rxProxy),\n    };\n    return new Proxy((f) => (inspect() ? new Node(f).pipe() : new Proxy(f, rxProxy)), {\n      get: (_target, prop) =>\n        inspect()\n          ? (...arg) => new Node(prop, arg).pipe()\n          : (...args) => new Proxy(observables[prop](...args), rxProxy),\n      set: (_target, prop, value) => (observables[prop] = value),\n    });\n  }\n}\nconst rx = createRx();\nexport default rx;\n"],"names":["noop","once","f","r","Sink","sink","defers","Set","args","init","add","value","delete","data","next","err","complete","dispose","defer","disposed","subscribes","subscribe","forEach","length","thisArg","call","clear","source","sources","Asap","asaps","_asaps","task","push","run","Promise","resolve","then","_this","_push","i","l","_asap","asap","deliver","Class","Share","sinks","size","s","share","remove","shareReplay","bufferSize","buffer","shift","cache","iif","condition","trueS","falseS","Race","nLife","race","Concat","pos","len","concat","Merge","mergeArray","merge","CombineLatest","index","array","context","state","nRun","nTotal","combineLatest","Array","WithLatestFrom","_withLatestFrom","withLatestFrom","Zip","every","x","map","zip","startWith","xs","inputSource","BufferCount","startBufferEvery","buffers","count","bufferCount","ConcatAll","running","sub","concatAll","Reduce","hasSeed","seed","aac","d","reduce","c","max","Math","min","sum","compose","g","and","a","b","Filter","FilterMapSink","m","MapSink","disposePass","filter","fusionFilter","Ignore","ignoreElements","Take","take","TakeUntil","sSrc","_takeUntil","takeUntil","TakeWhile","takeWhile","takeLast","Skip","skip","_SkipUntil","sourceSink","SkipUntil","_skipUntil","skipUntil","SkipWhile","skipWhile","defaultThrottleConfig","leading","trailing","_Throttle","durationSelector","hasValue","isComplete","send","last","Throttle","config","_throttle","throttle","defaultAuditConfig","audit","ThrottleTime","period","timerId","setTimeout","throttleTime","DebounceTime","clearTimeout","error","hasOwnProperty","debounceTime","_Debounce","Debounce","_debounce","debounce","ElementAt","defaultValue","Error","elementAt","find","FindIndex","findIndex","First","first","Last","Every","ret","subject","subSink","observable","fromArray","of","items","interval","clearInterval","setInterval","timer","delay","fromAnimationFrame","t","requestAnimationFrame","cancelAnimationFrame","fromEventPattern","n","fromEvent","target","name","addF","removeF","handler","fromVueEvent","vm","ls","e","$on","$off","fromVueEventOnce","$once","fromEventSource","src","arg","EventSource","evtSource","onerror","onmessage","evt","close","fromFetch","url","opt","fetch","res","catch","fromNextTick","$nextTick","range","start","end","fromPromise","fromIterable","from","Symbol","iterator","bindCallback","inArgs","rargs","apply","bindNodeCallback","never","throwError","empty","Scan","scan","fusionMap","mapTo","pluck","Pairwise","hasLast","pairwise","Repeat","repeat","_SwitchMap","combineResults","SwitchMap","makeSource","switch","switchMap","switchMapTo","innerSource","_MergeMap","subDisposed","MergeMap","mergeMap","mergeMapTo","BufferTime","miniseconds","id","bufferTime","TimeInterval","Date","timeInterval","pipe","cbs","Reuse","subscriber","reusePipe","toPromise","reject","Tap","tap","Delay","delayTime","timeoutId","pop","lastTime","time","CatchError","selector","catchError","GroupBy","groups","Map","key","group","get","set","groupBy","Events","addSource","update","create","event","payload","window","postMessage","who","toString","streamId","nodeId","fastrx","COUNT","Node","join","isNode","unProxy","checkSubNode","Proxy","_","prop","subscribeSink","createSink","realrx","streamCount","oNext","oComplete","newSink","_observables","observables","rx","inspect","__FASTRX_DEVTOOLS__","createRx","prototype","Object","setPrototypeOf","ext","rxProxy","_target"],"mappings":"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"}