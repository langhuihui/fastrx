{"version":3,"file":"cjs.js","sources":["../common.js","../combination.js","../mathematical.js","../fusion.js","../filtering.js","../producer.js","../transformation.js","../devtools.js","../index.js"],"sourcesContent":["export function noop() { }\n\n    //第一次调用有效\nexport const once = f => (...args) => {\n    if (f) {\n        let r = f(...args)\n        f = null\n        return r\n    }\n}\n\nexport class Sink {\n    constructor(sink, ...args) {\n        this.defers = new Set()\n        this.sink = sink\n        this.init(...args)\n        if (sink) sink.defers.add(this)\n    }\n    init() {\n\n    }\n    set disposePass(value) {\n        if (!this.sink) return\n        if (value)\n            this.sink.defers.add(this)\n        else this.sink.defers.delete(this)\n    }\n    next(data) {\n        this.sink && this.sink.next(data)\n    }\n    complete(err) {\n        this.sink && this.sink.complete(err)\n        this.dispose(false)\n    }\n    error(err) {\n        this.complete(err)\n    }\n    dispose(defer = true) {\n        this.disposed = true\n        this.complete = noop\n        this.next = noop\n        this.dispose = noop\n        this.subscribes = this.subscribe = noop\n        defer && this.defer() //销毁时终止事件源\n    }\n    defer(add) {\n        if (add) {\n            this.defers.add(add)\n        } else {\n            this.defers.forEach(defer => {\n                switch (true) {\n                    case defer.dispose != void 0:\n                        defer.dispose()\n                        break;\n                    case typeof defer == 'function':\n                        defer()\n                        break\n                    case defer.length > 0:\n                        let [f, thisArg, ...args] = defer\n                        if (f.call)\n                            f.call(thisArg, ...args)\n                        else f(...args)\n                        break\n                }\n            })\n            this.defers.clear()\n        }\n    }\n    subscribe(source) {\n        source(this)\n        return this\n    }\n    subscribes(sources) {\n        sources.forEach(source => source(this))\n    }\n}\nclass Asap {\n    constructor() {\n        this.asaps = []\n        this._asaps = []\n    }\n    push(task) {\n        this.asaps.push(task)\n    }\n    _push(task) {\n        this._asaps.push(task)\n    }\n    run(task) {\n        this.run = this.push\n        if (task) this.asaps.push(task)\n        Promise.resolve(this).then(_this => {\n            _this.run = _this._push\n            for (let i = 0, l = _this.asaps.length; i < l; i++) {\n                _this.asaps[i]()\n            }\n            _this.asaps = _this._asaps\n            _this._asaps = []\n            delete _this.run;\n            if (_this.asaps.length) {\n                _this.run()\n            }\n        })\n    }\n}\n\nconst _asap = new Asap\n\nexport function asap(task, defer) {\n    _asap.run(task)\n    return defer\n}\n\nexport const deliver = Class => (...args) => source => sink => source(new Class(sink, ...args))","import { Sink, deliver, noop } from './common'\nclass Share extends Sink {\n    init(source) {\n        this.source = source\n        this.sinks = new Set()\n    }\n    add(sink) {\n        this.sinks.add(sink)\n        if (this.sinks.size === 1) {\n            this.source(this)\n        }\n    }\n    remove(sink) {\n        this.sinks.delete(sink)\n        if (this.sinks.size === 0) {\n            this.defer()\n        }\n    }\n    next(data) {\n        this.sinks.forEach(s => s.next(data))\n    }\n    complete(err) {\n        this.sinks.forEach(s => s.complete(err))\n        this.sinks.clear()\n    }\n}\nexport const share = () => source => {\n    const share = new Share(null, source)\n    return sink => {\n        sink.defer([share.remove, share, sink])\n        share.add(sink);\n    }\n}\nexport const shareReplay = bufferSize => source => {\n    const share = new Share(null, source)\n    const buffer = []\n    share.next = function (data) {\n        buffer.push(data)\n        if (buffer.length > bufferSize) {\n            buffer.shift()\n        }\n        this.sinks.forEach(s => s.next(data))\n    }\n    return sink => {\n        sink.defer([share.remove, share, sink])\n        buffer.forEach(cache => sink.next(cache))\n        share.add(sink);\n    }\n}\nexport const iif = (condition, trueS, falseS) => sink => condition() ? trueS(sink) : falseS(sink)\nclass Race extends Sink {\n    init(nLife) {\n        this.nLife = nLife;\n    }\n    next(data) {\n        this.defer()\n        this.sink.next(data)\n        super.complete()\n    }\n    complete(err) {\n        if (--this.nLife === 0) super.complete(err)\n    }\n}\nexport const race = (...sources) => sink => new Race(sink, sources.length).subscribes(sources)\nclass Concat extends Sink {\n    init(sources) {\n        this.sources = sources\n        this.pos = 0\n        this.len = sources.length\n    }\n    complete(err) {\n        if (err) {\n            super.complete(err)\n            return\n        }\n        if (this.pos < this.len && !this.disposed) this.sources[this.pos++](this)\n        else super.complete()\n    }\n}\nexport const concat = (...sources) => sink => new Concat(sink, sources).complete()\n\nclass Merge extends Sink {\n    init(nLife) {\n        this.nLife = nLife;\n    }\n    complete() {\n        if (--this.nLife === 0) super.complete()\n    }\n}\nexport const mergeArray = sources => sink => new Merge(sink, sources.length).subscribes(sources)\nexport const merge = (...sources) => sink => new Merge(sink, sources.length).subscribes(sources)\nclass CombineLatest extends Sink {\n    init(index, array, context) {\n        this.index = index\n        this.context = context\n        this.state = 0\n        this.array = array\n    }\n    next(data) {\n        switch (this.state) {\n            case 0:\n                ++this.context.nRun;\n                this.state = 1\n            case 1:\n                if (this.context.nRun === this.context.nTotal) {\n                    this.state = 2\n                } else {\n                    this.array[this.index] = data\n                    break\n                }\n            case 2:\n                this.array[this.index] = data\n                this.sink.next(this.array)\n                break\n        }\n    }\n    complete(err) {\n        if (err || (--this.context.nLife) === 0) super.complete(err)\n    }\n}\nexport const combineLatest = (...sources) => sink => {\n    const nTotal = sources.length;\n    const context = {\n        nTotal,\n        nLife: nTotal,\n        nRun: 0\n    }\n    const array = new Array(nTotal)\n    // const defers = new Array(nTotal)\n    // for (let i = 0; i < nTotal; ++i) defers[i] = sources[i](new CombineLatest(sink, i, array, context))\n    sources.forEach((source, i) => source(new CombineLatest(sink, i, array, context)))\n}\nclass WithLatestFrom extends Sink {\n    init(...sources) {\n        this._withLatestFrom = new Sink(this.sink)\n        this._withLatestFrom.next = data => this.buffer = data\n        this._withLatestFrom.complete = noop\n        exports.combineLatest(...sources)(this._withLatestFrom)\n    }\n    next(data) {\n        if (this.buffer) {\n            this.sink.next([data].concat(this.buffer))\n        }\n    }\n    complete(err) {\n        this._withLatestFrom.dispose()\n        super.complete(err)\n    }\n}\nexport const withLatestFrom = deliver(WithLatestFrom)\nclass Zip extends Sink {\n    init(index, array, context) {\n        this.index = index\n        this.context = context\n        this.array = array\n        this.buffer = []\n        array[index] = this.buffer\n    }\n    next(data) {\n        this.buffer.push(data)\n        if (this.array.every(x => x.length)) {\n            this.sink.next(this.array.map(x => x.shift()))\n        }\n    }\n    complete(err) {\n        if (err || (--this.context.nLife) === 0) super.complete(err)\n    }\n}\nexport const zip = (...sources) => sink => {\n    const nTotal = sources.length;\n    const context = {\n        nTotal,\n        nLife: nTotal\n    }\n    const array = new Array(nTotal)\n    sources.forEach((source, i) => source(new Zip(sink, i, array, context)))\n}\n\nexport const startWith = (...xs) => inputSource => (sink, pos = 0, l = xs.length) => {\n    while (pos < l) {\n        if (sink.disposed) return\n        sink.next(xs[pos++])\n    }\n    sink.disposed || inputSource(sink)\n}","import { Sink } from './common'\nclass Reduce extends Sink {\n    init(hasSeed, f, seed) {\n        this.f = f\n        this.aac = seed\n        if (!hasSeed) {\n            this.next = d => {\n                delete this.next\n                this.aac = d\n            }\n        }\n    }\n    next(data) {\n        const f = this.f\n        this.aac = f(this.aac, data)\n    }\n    complete(err) {\n        err || this.sink.next(this.aac)\n        super.complete(err)\n    }\n}\nexport const reduce = (...args) => source => sink => source(new Reduce(sink, args.length === 2, ...args))\nexport const count = f => reduce((aac, c) => f(c) ? aac + 1 : aac, 0)\nexport const max = reduce(Math.max)\nexport const min = reduce(Math.min)","import { Sink } from './common'\n\nfunction compose(g, f) {\n    return x => g(f(x))\n}\n\nfunction and(a, b) {\n    return x => a(x) && b(x)\n}\nexport class Filter extends Sink {\n    init(f) {\n        this.f = f\n    }\n    next(data) {\n        const f = this.f\n        f(data) && this.sink.next(data)\n    }\n    fusionFilter(f) {\n        this.f = and(f, this.f)\n        return this\n        // return new Filter(this.sink, this.and(f, this.f))\n    }\n}\nclass FilterMapSink extends Sink {\n    init(f, m) {\n        this.f = f\n        this.m = m\n    }\n    next(data) {\n        const f = this.f\n        const m = this.m\n        f(data) && this.sink.next(m(data))\n    }\n    fusionFilter(f) {\n        this.f = and(f, this.f)\n        return this\n        // return new Filter(this, f)\n    }\n}\nexport class MapSink extends Sink {\n    init(f) {\n        this.f = f\n    }\n    next(data) {\n        const f = this.f\n        this.sink.next(f(data))\n    }\n    fusionFilter(f) {\n        this.disposePass = false\n        this.dispose(false)\n        return new FilterMapSink(this.sink, f, this.f)\n    }\n    fusionMap(f) {\n        this.f = compose(this.f, f)\n        return this\n        // return new MapSink(this.sink, this.compose(this.f, f))\n    }\n}","import { Sink, deliver, noop } from './common'\nimport { reduce } from './mathematical'\nimport { Filter } from './fusion'\nexport const filter = f => source => sink => source(sink.fusionFilter ? sink.fusionFilter(f) : new Filter(sink, f))\n\nclass Ignore extends Sink {\n    next() { }\n}\nexport const ignoreElements = source => sink => source(new Ignore(sink))\n\nclass Take extends Sink {\n    init(count) {\n        this.count = count\n    }\n    next(data) {\n        this.sink.next(data)\n        if (--this.count === 0) {\n            this.defer()\n            this.complete()\n        }\n    }\n}\nexport const take = deliver(Take)\n\nclass TakeUntil extends Sink {\n    init(sSrc) {\n        this._takeUntil = new Sink(this.sink)\n        this._takeUntil.next = () => {\n            this.defer()\n            this.complete()\n        }\n        this._takeUntil.complete = noop\n        sSrc(this._takeUntil)\n    }\n    complete(err) {\n        //完成事件，单方面终结开关sink\n        this._takeUntil.dispose()\n        super.complete(err)\n    }\n}\n\nexport const takeUntil = deliver(TakeUntil)\n\nclass TakeWhile extends Sink {\n    init(f) {\n        this.f = f\n    }\n    next(data) {\n        const f = this.f\n        if (f(data)) {\n            this.sink.next(data)\n        } else {\n            this.defer()\n            this.complete()\n        }\n    }\n}\nexport const takeWhile = deliver(TakeWhile)\n\nexport const takeLast = count => reduce((buffer, d) => {\n    buffer.push(d)\n    if (buffer.length > count) buffer.shift()\n    return buffer\n}, [])\n\nclass Skip extends Sink {\n    init(count) {\n        this.count = count\n    }\n    next() {\n        if (--this.count === 0) {\n            this.next = super.next\n        }\n    }\n}\nexport const skip = deliver(Skip)\n\nclass _SkipUntil extends Sink {\n    next() {\n        this.dispose()\n        delete this.sourceSink.next\n    }\n    init(sourceSink) {\n        this.sourceSink = sourceSink\n    }\n}\n\nclass SkipUntil extends Sink {\n    init(sSrc) {\n        this._skipUntil = new _SkipUntil(null, this).subscribe(sSrc)\n        this.defer(this._skipUntil)\n        this.next = noop\n    }\n    complete(err) {\n        this._skipUntil.dispose()\n        super.complete(err)\n    }\n}\nexport const skipUntil = deliver(SkipUntil)\n\nclass SkipWhile extends Sink {\n    init(f) {\n        this.f = f\n    }\n    next(data) {\n        const f = this.f\n        if (!f(data)) {\n            this.next = super.next\n            this.next(data)\n        }\n    }\n}\nexport const skipWhile = deliver(SkipWhile)\n\nconst defaultThrottleConfig = {\n    leading: true,\n    trailing: false\n}\nclass _Throttle extends Sink {\n    init(durationSelector, trailing) {\n        this.durationSelector = durationSelector\n        this.trailing = trailing\n        this.hasValue = true\n        this.isComplete = false;\n    }\n    send(data) {\n        if (this.hasValue) {\n            this.sink.next(data)\n            this.isComplete = false\n            this.durationSelector(data)(this)\n        }\n        this.hasValue = false\n    }\n    next() {\n        this.complete()\n    }\n    complete() {\n        this.defer()\n        this.isComplete = true\n        if (this.trailing) {\n            this.send(this.last)\n        }\n    }\n}\nclass Throttle extends Sink {\n    init(durationSelector, config = defaultThrottleConfig) {\n        this.durationSelector = durationSelector\n        this.leading = config.leading\n        this.trailing = config.trailing\n        this.hasValue = false\n    }\n\n    throttle(data) {\n        this._throttle.isComplete = false\n        this._throttle.last = data\n        this._throttle.hasValue = true\n        this.durationSelector(data)(this._throttle)\n    }\n    next(data) {\n        if (!this._throttle || this._throttle.isComplete) {\n            if (!this._throttle) {\n                this._throttle = new _Throttle(this.sink, this.durationSelector, this.trailing)\n                this.defer(this._throttle)\n            }\n\n            if (this.leading) {\n                this.sink.next(data)\n                this.throttle(data)\n                this._throttle.hasValue = false\n            } else {\n                this.throttle(data)\n            }\n        } else {\n            this._throttle.last = data\n            this._throttle.hasValue = true\n        }\n    }\n    complete(err) {\n        if (err) {\n            this._throttle && this._throttle.dispose()\n            super.complete(err)\n        } else {\n            this._throttle && this._throttle.complete()\n            super.complete()\n        }\n    }\n}\nexport const throttle = deliver(Throttle)\nconst defaultAuditConfig = {\n    leading: false,\n    trailing: true\n}\nexport const audit = durationSelector => throttle(durationSelector, defaultAuditConfig)\nclass ThrottleTime extends Sink {\n    init(period, config = defaultThrottleConfig) {\n        this.config = config\n        this.period = period\n        this.timerId = null\n    }\n    next(data) {\n        if (this.timerId) {\n            this.last = data\n            this.hasValue = true\n        } else {\n            this.timerId = setTimeout(() => {\n                this.timerId = null\n                if (this.config.trailing && this.hasValue) {\n                    this.sink.next(this.last)\n                }\n            }, this.period)\n            if (this.config.leading) {\n                this.sink.next(data)\n            } else {\n                this.last = data\n                this.hasValue = true\n            }\n        }\n    }\n    complete(err) {\n        if (!err) {\n            if (this.config.trailing && this.hasValue) {\n                this.sink.next(this.last)\n            }\n        }\n        super.complete(err)\n    }\n}\nexport const throttleTime = deliver(ThrottleTime)\nclass DebounceTime extends Sink {\n    init(period) {\n        this.period = period\n        this.timerId = null\n    }\n    next(data) {\n        this.buffer = data\n        if (this.timerId) {\n            clearTimeout(this.timerId)\n        }\n        this.timerId = setTimeout(() => {\n            this.sink.next(data)\n            this.timerId = null\n        }, this.period)\n    }\n    complete(error) {\n        if (this.timerId) {\n            clearTimeout(this.timerId)\n            if (!error && this.hasOwnProperty(\"buffer\")) {\n                this.sink.next(this.buffer)\n            }\n        }\n        super.complete(error)\n    }\n}\n\nexport const debounceTime = deliver(DebounceTime)\n\nclass _Debounce extends Sink {\n    next() {\n        this.complete()\n    }\n    complete(err) {\n        this.defer()\n        this.sink.next(this.last)\n        this.isComplete = true\n    }\n}\nclass Debounce extends Sink {\n    init(durationSelector) {\n        this.durationSelector = durationSelector\n    }\n    next(data) {\n        if (!this._debounce) {\n            this._debounce = new _Debounce(this.sink)\n            this.defer(this._debounce)\n        } else if (this._debounce.isComplete) {\n            this._debounce.isComplete = false\n        } else {\n            this._debounce.defer()\n        }\n        this.durationSelector(data)(this._debounce)\n        this._debounce.last = data\n    }\n    complete(err) {\n        if (err) {\n            this._debounce && this._debounce.dispose()\n            super.complete(err)\n        } else {\n            this._debounce && this._debounce.complete()\n            super.complete()\n        }\n    }\n}\n\nexport const debounce = deliver(Debounce)\nclass ElementAt extends Sink {\n    init(count, defaultValue) {\n        this.count = count\n        this.value = defaultValue\n    }\n    next(data) {\n        if (this.count-- === 0) {\n            this.sink.next(data)\n            this.defer()\n            super.complete()\n        }\n    }\n    complete(err) {\n        if (!err) {\n            if (this.value === void 0) err = new Error('not enough elements in sequence')\n            else this.sink.next(this.value)\n        }\n        super.complete(err)\n    }\n}\n\nexport const elementAt = deliver(ElementAt)\nexport const find = f => source => take(1)(skipWhile(d => !f(d))(source))\n\nclass FindIndex extends Sink {\n    init(f) {\n        this.f = f\n        this.i = 0\n    }\n    next(data) {\n        const f = this.f\n        if (f(data)) {\n            this.sink.next(this.i++)\n            this.defer()\n            this.complete()\n        } else {\n            ++this.i\n        }\n    }\n}\n\nexport const findIndex = deliver(FindIndex)\n\nclass First extends Sink {\n    init(f, defaultValue) {\n        this.f = f\n        this.value = defaultValue\n        this.count = 0\n    }\n    next(data) {\n        const f = this.f\n        if (!f || f(data, this.count++)) {\n            this.value = data\n            this.defer()\n            this.complete()\n        }\n    }\n    complete(err) {\n        if (!err) {\n            if (this.value === void 0) err = new Error('no elements in sequence')\n            else this.sink.next(this.value)\n        }\n        super.complete(err)\n    }\n}\n\nexport const first = deliver(First)\n\nclass Last extends Sink {\n    init(f, defaultValue) {\n        this.f = f\n        this.value = defaultValue\n        this.count = 0\n    }\n    next(data) {\n        const f = this.f\n        if (!f || f(data, this.count++)) {\n            this.value = data\n        }\n    }\n    complete(err) {\n        if (!err) {\n            if (this.value === void 0) err = new Error('no elements in sequence')\n            else this.sink.next(this.value)\n        }\n        super.complete(err)\n    }\n}\n\nexport const last = deliver(Last)","import { noop } from './common'\nimport { share } from './combination'\nexport const subject = source => {\n    let subSink = null\n    const observable = share()(sink => {\n        subSink = sink\n        source && source(subSink)\n    })\n    observable.next = d => subSink && subSink.next(d)\n    observable.complete = () => subSink && subSink.complete()\n    observable.error = err => subSink && subSink.complete(err)\n    return observable\n}\n\nexport const fromArray = array => sink => {\n    let pos = 0\n    const l = array.length\n    while (pos < l && !sink.disposed) sink.next(array[pos++])\n    sink.complete()\n}\nexport const of = (...items) => fromArray(items)\nexport const interval = period => sink => {\n    let i = 0;\n    sink.defer([clearInterval, , setInterval(() => sink.next(i++), period)])\n}\nexport const timer = (delay, period) => sink => {\n    const defer = [clearTimeout, , setTimeout(() => {\n        if (period) {\n            defer[0] = clearInterval\n            let i = 0;\n            defer[2] = setInterval(() => sink.next(i++), period)\n        } else {\n            sink.next(0)\n            sink.complete()\n        }\n    }, delay)]\n    sink.defer(defer)\n}\nexport const fromAnimationFrame = () => sink => {\n    function next(t) {\n        sink.next(t)\n        defer[2] = requestAnimationFrame(next)\n    }\n    const defer =\n        [cancelAnimationFrame, , requestAnimationFrame(next)]\n    sink.defer(defer)\n}\nexport const fromEventPattern = (add, remove) => sink => {\n    const n = d => sink.next(d);\n    sink.defer([remove, , n])\n    add(n)\n}\nexport const fromEvent = (target, name) => {\n    const addF = ['on', 'addEventListener', 'addListener'].find(x => typeof target[x] == 'function')\n    const removeF = ['off', 'removeEventListener', 'removeListener'].find(x => typeof target[x] == 'function')\n    if (addF && removeF)\n        return fromEventPattern(handler => target[addF](name, handler), handler => target[removeF](name, handler))\n    else throw 'target is not a EventDispachter'\n}\nexport const fromVueEvent = (vm, name) => sink => {\n    const ls = e => sink.next(e)\n    vm.$on(name, ls)\n    sink.defer([vm.$off, vm, ls])\n}\nexport const fromVueEventOnce = (vm, name) => sink => vm.$once(name, e => sink.next(e))\n\nexport const fromEventSource = (src, arg) => sink => {\n    if (typeof EventSource == 'undefined') {\n        return sink.complete(new Error('No EventSource defined!'))\n    }\n    const evtSource = new EventSource(src, arg)\n    evtSource.onerror = err => sink.complete(err)\n    evtSource.onmessage = evt => sink.next(evt.data)\n    sink.defer([evtSource.close, evtSource])\n}\nexport const fromFetch = (url, opt) => sink => {\n    fetch(url, opt).then(res => {\n        sink.next(res)\n        sink.complete()\n    }).catch(err => sink.complete(err))\n}\nexport const fromNextTick = vm => sink => {\n    vm.$nextTick(() => {\n        sink.next(vm)\n        sink.complete()\n    })\n}\nexport const range = (start, count) => (sink, pos = start, end = count + start) => {\n    while (pos < end && !sink.disposed) sink.next(pos++)\n    sink.complete()\n}\n\nexport const fromPromise = source => sink => {\n    source.then(d => (sink.next(d), sink.complete())).catch(e => sink.complete(e))\n}\n\nexport const fromIterable = source => sink => {\n    try {\n        for (let data of source) {\n            sink.next(data)\n            if (sink.disposed) return\n        }\n        sink.complete()\n    } catch (err) {\n        sink.complete(err)\n    }\n}\nexport const from = source => {\n    switch (true) {\n        case source instanceof Array:\n            return fromArray(source)\n        case source instanceof Promise:\n            return fromPromise(source)\n        case source[Symbol.iterator] && typeof source[Symbol.iterator] === 'function':\n            return fromIterable(source)\n        default:\n            return of(source)\n    }\n}\nexport const bindCallback = (call, thisArg, ...args) => sink => {\n    const inArgs = args.concat((...rargs) => (sink.next(rargs.length > 1 ? rargs : rargs[0]), sink.complete()));\n    call.apply ? call.apply(thisArg, inArgs) : call(...inArgs)\n}\nexport const bindNodeCallback = (call, thisArg, ...args) => sink => {\n    const inArgs = args.concat((err, ...rargs) => err ? sink.complete(err) : (sink.next(rargs.length > 1 ? rargs : rargs[0]), sink.complete()));\n    call.apply ? call.apply(thisArg, inArgs) : call(...inArgs)\n}\nexport const never = () => noop\nexport const throwError = e => sink => sink.complete(e)\nexport const empty = () => throwError()\n","import { Sink, deliver } from './common'\nimport { MapSink } from './fusion'\nclass Scan extends Sink {\n    init(hasSeed, f, seed) {\n        this.f = f\n        this.aac = seed\n        if (!hasSeed) {\n            this.next = d => {\n                delete this.next\n                this.sink.next(this.aac = d)\n            }\n        }\n    }\n    next(data) {\n        const f = this.f\n        this.aac = f(this.aac, data)\n        this.sink.next(this.aac)\n    }\n}\nexport const scan = (...args) => source => sink => source(new Scan(sink, args.length == 2, ...args))\n\nexport const map = f => source => sink => source(sink.fusionMap ? sink.fusionMap(f) : new MapSink(sink, f))\nexport const mapTo = target => map(x => target)\nexport const pluck = s => map(d => d[s])\n\nclass Pairwise extends Sink {\n    init() {\n        this.hasLast = false\n    }\n    next(data) {\n        if (this.hasLast) {\n            this.sink.next([this.last, data])\n        } else {\n            this.hasLast = true\n        }\n        this.last = data\n    }\n}\nexport const pairwise = deliver(Pairwise)\n\nclass Repeat extends Sink {\n    init(count) {\n        this.buffer = []\n        this.count = count\n    }\n    next(data) {\n        this.buffer.push(data)\n        this.sink.next(data)\n    }\n    complete(err) {\n        if (err) super.complete(err)\n        else {\n            while (this.count--) {\n                for (let i = 0, l = this.buffer.length; i < l; this.sink.next(this.buffer[i++])) {\n                    if (this.disposed) return\n                }\n            }\n            super.complete()\n        }\n    }\n}\n\nexport const repeat = deliver(Repeat)\nclass _SwitchMap extends Sink {\n    init(data, context) {\n        this.data = data\n        this.context = context\n    }\n    next(data) {\n        const combineResults = this.context.combineResults\n        if (combineResults) {\n            this.sink.next(combineResults(this.data, data))\n        } else {\n            this.sink.next(data)\n        }\n    }\n    complete(err) {\n        if (this.context.disposed) super.complete(err)\n        else this.dispose(false)\n    }\n}\nclass SwitchMap extends Sink {\n    init(makeSource, combineResults) {\n        this.makeSource = makeSource\n        this.combineResults = combineResults\n    }\n    next(data) {\n        const makeSource = this.makeSource\n        if (this.switch) {\n            this.switch.disposePass = false\n            this.switch.dispose()\n        }\n        this.switch = new _SwitchMap(this.sink, data, this)\n        makeSource(data)(this.switch)\n    }\n    complete(err) {\n        if (!this.switch || this.switch.disposed) super.complete(err)\n        else this.dispose(false)\n    }\n}\n\nexport const switchMap = deliver(SwitchMap)\n\nexport const switchMapTo = (innerSource, combineResults) => switchMap(d => innerSource, combineResults)\n\nclass BufferTime extends Sink {\n    init(miniseconds) {\n        this.buffer = []\n        this.id = setInterval(() => {\n            this.sink.next(this.buffer.concat());\n            this.buffer.length = 0\n        }, miniseconds)\n        this.defer([clearInterval, , this.id])\n    }\n    next(data) {\n        this.buffer.push(data)\n    }\n    complete(err) {\n        clearInterval(this.id)\n        if (!err) this.sink.next(this.buffer)\n        super.complete(err)\n    }\n}\n\nexport const bufferTime = deliver(BufferTime)","import * as fastrx from './index'\nconst Sink = fastrx.Sink\nconst Events = fastrx.Events\nlet COUNT = 0\n\nexport class Node {\n    constructor(name = \"\", arg = []) {\n        this.name = name\n        this.arg = arg\n        this.source = null\n        this.id = COUNT++\n        switch (name) {\n            case \"subscribe\":\n            case \"toPromise\":\n            case \"toRef\":\n                this.end = true\n                break\n            default:\n                this.end = false\n        }\n        Events.create(this)\n        if (arg.length) {\n            this.args = arg\n        }\n    }\n    toString() {\n        return `${typeof this.name == 'string' ? this.name : this.name.name}(${this.arg.map(x => typeof x == 'object' || typeof x == 'function' ? (typeof x.name == 'function' ? x.name.name : x.name) || '...' : x).join(',')})`\n    }\n    get unProxy() {\n        return this\n    }\n    //是否属于子流\n    checkSubNode(x) {\n        if (typeof x == 'function') {\n            const isNode = x.unProxy\n            return isNode ? (Events.addSource(this, isNode), s => {\n                s.nodeId = this.id\n                s.streamId = 0\n                isNode.subscribe(s)\n            }) : (...arg) => this.checkSubNode(x(...arg))\n        }\n        return x\n    }\n    //过滤子事件流，放入sources数组中，就能显示\n    set args(value) {\n        this.arg = value.map(x => this.checkSubNode(x))\n    }\n    // 通过返回proxy产生链式调用\n    pipe() {\n        if (this.end) {\n            return this.subscribe()\n        }\n        const target = this\n        return new Proxy(sink => this.subscribe(sink), {\n            get(_, prop) {\n                if (prop != \"subscribe\" && (target[prop] || target.hasOwnProperty(prop))) return target[prop]\n                if (prop == \"subscribe\" && target.subscribeSink) return target.subscribeSink\n                const sink = target.createSink(prop)\n                return target.subscribeSink = (...args) => {\n                    sink.args = args\n                    Events.update(sink)\n                    return sink.pipe()\n                }\n            }\n        })\n    }\n    createSink(name) {\n        const sink = new Node(name)\n        sink.source = this\n        Events.pipe(sink)\n        return sink\n    }\n    subscribe(sink) {\n        const { source, name, arg } = this\n        const realrx = typeof name == 'string' ? fastrx[name](...arg) : name\n        let f = source && !this.end ? realrx(s => {\n            s.streamId = streamCount - 1\n            s.nodeId = this.id\n            source.subscribe(s)\n        }) : realrx\n        let streamCount = 0\n        this.subscribe = function (sink) {\n            const streamId = streamCount++\n            if (this.end) {\n                return f(s => {\n                    const oNext = s.next\n                    const oComplete = s.complete\n                    s.next = data => {\n                        Events.next(this, streamId, data)\n                        oNext(data);\n                    }\n                    s.complete = err => {\n                        Events.complete(this, streamId, err)\n                        oComplete(err)\n                    }\n                    s.streamId = streamId\n                    s.nodeId = this.id\n                    Events.subscribe(this)\n                    source.subscribe(s)\n                })\n            }\n\n            const newSink = new Sink(sink)\n            newSink.next = data => {\n                Events.next(this, streamId, data)\n                sink.next(data);\n            }\n            newSink.complete = err => {\n                Events.complete(this, streamId, err)\n                sink.complete(err);\n            }\n            newSink.defer(() => {\n                Events.defer(this, streamId)\n            })\n            Events.subscribe(this, sink)\n            f(newSink)\n            return newSink\n        };\n        return this.subscribe(sink)\n    }\n}","import { Sink, deliver, noop } from './common'\nexport * from './common'\nexport const pipe = (first, ...cbs) => cbs.reduce((aac, c) => c(aac), first);\nclass Reuse {\n    constructor(subscribe, ...args) {\n        this.subscribe = subscribe\n        this.source = exports.pipe(...args)\n    }\n    start() {\n        this.subscriber = this.subscribe(this.source)\n    }\n    stop() {\n        this.subscriber && this.subscriber.dispose()\n    }\n}\n\n// //在pipe的基础上增加了start和stop方法，方便反复调用\nexport const reusePipe = (...args) => new Reuse(...args)\n\nexport const toPromise = () => source => new Promise((resolve, reject) => {\n    const sink = new Sink()\n    sink.next = d => sink.value = d\n    sink.complete = err => err ? reject(err) : resolve(sink.value)\n    source(sink)\n})\n\n// //SUBSCRIBER\nexport const subscribe = (n, e = noop, c = noop) => source => {\n    const sink = new Sink()\n    sink.next = n\n    sink.complete = err => err ? e(err) : c()\n    sink.then = noop\n    source(sink)\n    return sink\n}\n// // UTILITY \nclass Tap extends Sink {\n    init(f) {\n        this.f = f\n    }\n    next(data) {\n        const f = this.f\n        f(data)\n        this.sink.next(data)\n    }\n}\n\nexport const tap = deliver(Tap)\n\nclass Delay extends Sink {\n    init(delay) {\n        this.delayTime = delay\n        this.buffer = []\n        this.timeoutId = [clearTimeout, ,]\n        this.defer(this.timeoutId)\n    }\n    delay(delay) {\n        this.timeoutId[2] = setTimeout(this.pop, delay, this)\n    }\n    pop(_this) {\n        const { time: lastTime, data } = _this.buffer.shift()\n        _this.sink.next(data)\n        if (_this.buffer.length) {\n            _this.delay(_this.buffer[0].time - lastTime)\n        }\n    }\n    next(data) {\n        if (!this.buffer.length) {\n            this.delay(this.delayTime)\n        }\n        this.buffer.push({ time: new Date, data })\n    }\n    complete(err) {\n        if (err) this.sink.complete(err)\n        else {\n            this.timeoutId[2] = setTimeout(() => this.sink.complete(), this.delayTime)\n        }\n    }\n}\nexport const delay = deliver(Delay)\nclass CatchError extends Sink {\n    init(selector) {\n        this.selector = selector\n    }\n    complete(err) {\n        if (err) {\n            this.selector(err)(this.sink)\n        } else {\n            super.complete()\n        }\n    }\n}\nexport const Events = {\n    addSource: noop, subscribe: noop, next: noop, complete: noop, defer: noop, pipe: noop, update: noop, create: noop\n}\nexport const catchError = deliver(CatchError)\nimport * as combination from './combination'\nimport * as filtering from './filtering'\nimport * as mathematical from './mathematical'\nimport * as producer from './producer'\nimport * as transformation from './transformation'\nexport * from './combination'\nexport * from './filtering'\nexport * from './mathematical'\nexport * from './producer'\nexport * from './transformation'\nimport { Node } from './devtools'\nconst observables = { delay, tap, toPromise, subscribe, catchError, ...combination, ...filtering, ...mathematical, ...producer, ...transformation }\n\nfunction createRx() {\n    if (typeof Proxy == 'undefined') {\n        const prototype = {};\n        //将一个Observable函数的原型修改为具有所有operator的方法\n        const rx = f => Object.setPrototypeOf(f, prototype);\n        //提供动态添加Obserable以及operator的方法\n        rx.set = ext => {\n            for (let key in ext) {\n                const f = ext[key]\n                switch (key) {\n                    case 'Sink':\n                    case 'pipe':\n                    case 'reusePipe':\n                        break\n                    case 'subscribe':\n                        prototype[key] = function (...args) { return f(...args)(this) }\n                        break\n                    case 'toPromise':\n                        prototype[key] = function () { return f(this) }\n                        break\n                    default:\n                        prototype[key] = function (...args) { return rx(f(...args)(this)) }\n                        rx[key] = (...args) => rx(f(...args))\n                }\n            }\n        }\n        rx.set(observables)\n        return rx\n    } else {\n        const rxProxy = {\n            get: (target, prop) => prop in target ? target[prop] : ((...args) => new Proxy(observables[prop](...args)(target), rxProxy))\n        }\n        return new Proxy(f => inspect() ? (new Node(f)).pipe() : new Proxy(f, rxProxy), {\n            get: (target, prop) => inspect() ? (...arg) => (new Node(prop, arg)).pipe() : (...args) => new Proxy(observables[prop](...args), rxProxy),\n            set: (target, prop, value) => observables[prop] = value\n        })\n    }\n}\nfunction inspect() {\n    return typeof window != 'undefined' && window.__FASTRX_DEVTOOLS__\n}\nfunction send(event, payload) {\n    window.postMessage({ source: \"fastrx-devtools-backend\", payload: { event, payload } })\n}\nEvents.create = (who) => {\n    send(\"create\", { name: who.toString(), id: who.id })\n}\nEvents.next = (who, streamId, data) => {\n    send(\"next\", { id: who.id, streamId, data: data && data.toString() })\n}\nEvents.complete = (who, streamId, err) => {\n    send(\"complete\", { id: who.id, streamId, err: err ? err.toString() : null })\n}\nEvents.defer = (who, streamId) => {\n    send(\"defer\", { id: who.id, streamId })\n}\nEvents.addSource = (who, source) => {\n    send(\"addSource\", { id: who.id, name: who.toString(), source: { id: source.id, name: source.toString() } })\n}\nEvents.pipe = (who) => {\n    send(\"pipe\", { name: who.toString(), id: who.id, source: { id: who.source.id, name: who.source.toString() } })\n}\nEvents.update = who => {\n    send('update', { id: who.id, name: who.toString() })\n}\nEvents.subscribe = ({ id, end }, sink) => {\n    send(\"subscribe\", { id, end, sink: { nodeId: sink && sink.nodeId, streamId: sink && sink.streamId } })\n}\nexport default createRx()"],"names":["noop","once","f","r","Sink","sink","defers","Set","args","init","add","data","next","err","complete","dispose","defer","disposed","subscribes","subscribe","forEach","length","thisArg","call","clear","source","sources","value","delete","Asap","asaps","_asaps","task","push","run","Promise","resolve","then","_this","_push","i","l","_asap","asap","deliver","Class","Share","sinks","size","s","share","remove","shareReplay","bufferSize","buffer","shift","cache","iif","condition","trueS","falseS","Race","nLife","race","Concat","pos","len","concat","Merge","mergeArray","merge","CombineLatest","index","array","context","state","nRun","nTotal","combineLatest","Array","WithLatestFrom","_withLatestFrom","exports","withLatestFrom","Zip","every","x","map","zip","startWith","xs","inputSource","Reduce","hasSeed","seed","aac","d","reduce","count","c","max","Math","min","compose","g","and","a","b","Filter","FilterMapSink","m","MapSink","disposePass","filter","fusionFilter","Ignore","ignoreElements","Take","take","TakeUntil","sSrc","_takeUntil","takeUntil","TakeWhile","takeWhile","takeLast","Skip","skip","_SkipUntil","sourceSink","SkipUntil","_skipUntil","skipUntil","SkipWhile","skipWhile","defaultThrottleConfig","leading","trailing","_Throttle","durationSelector","hasValue","isComplete","send","last","Throttle","config","_throttle","throttle","defaultAuditConfig","audit","ThrottleTime","period","timerId","setTimeout","throttleTime","DebounceTime","clearTimeout","error","hasOwnProperty","debounceTime","_Debounce","Debounce","_debounce","debounce","ElementAt","defaultValue","Error","elementAt","find","FindIndex","findIndex","First","first","Last","subject","subSink","observable","fromArray","of","items","interval","clearInterval","setInterval","timer","delay","fromAnimationFrame","t","requestAnimationFrame","cancelAnimationFrame","fromEventPattern","n","fromEvent","target","name","addF","removeF","handler","fromVueEvent","vm","ls","e","$on","$off","fromVueEventOnce","$once","fromEventSource","src","arg","EventSource","evtSource","onerror","onmessage","evt","close","fromFetch","url","opt","fetch","res","catch","fromNextTick","$nextTick","range","start","end","fromPromise","fromIterable","from","Symbol","iterator","bindCallback","inArgs","rargs","apply","bindNodeCallback","never","throwError","empty","Scan","scan","fusionMap","mapTo","pluck","Pairwise","hasLast","pairwise","Repeat","repeat","_SwitchMap","combineResults","SwitchMap","makeSource","switch","switchMap","switchMapTo","innerSource","BufferTime","miniseconds","id","bufferTime","fastrx","Events","COUNT","Node","create","join","isNode","unProxy","addSource","nodeId","streamId","checkSubNode","Proxy","get","_","prop","subscribeSink","createSink","update","pipe","realrx","streamCount","oNext","oComplete","newSink","cbs","Reuse","subscriber","reusePipe","toPromise","reject","Tap","tap","Delay","delayTime","timeoutId","pop","lastTime","time","Date","CatchError","selector","catchError","observables","combination","filtering","mathematical","producer","transformation","createRx","prototype","rx","Object","setPrototypeOf","set","ext","key","rxProxy","inspect","window","__FASTRX_DEVTOOLS__","event","payload","postMessage","who","toString"],"mappings":"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"}